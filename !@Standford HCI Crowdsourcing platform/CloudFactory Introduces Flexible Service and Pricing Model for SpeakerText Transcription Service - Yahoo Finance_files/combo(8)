
/* content-manager.js c15b49c */ YUI.add("media-content-manager",function(h){var f="ContentManager",a="content-manager:",e="request-manager:",c="media:remove-node",b="yog-type-index",g="yog-type-content",d="nav-collapse";h.namespace("Media")[f]=h.Base.create("media-content-manager",h.Base,[],{initializer:function(j){var i=this;j=j||{};i.setAttrs({nodePaths:j.nodePaths||{},transition:j.transition||{},scrollToNext:j.scrollToNext||{},bodyNode:h.one("body"),pageChrome:h.Media.pageChrome,refreshRightRailContent:(parseInt(j.refreshRightRailContent,10)||0),lastIndexPath:h.Media.pageChrome.getGridType()==="index"?window.location.pathname:null,enablePersistentMods:j.enablePersistentMods||false});i._initEventListener();if(i.get("scrollToNext.enabled")){i._setupScrollToNextTrigger()}return i},toggleContentNode:function(p,r){var u=this,k=h.one("body"),m=h.one(u.get("nodePaths.content")),j=u.get("transition.style"),t=u.get("pageChrome"),i=t.getDevice(),q=h.one("#yog-np"),s=h.one(u.get("nodePaths.related")),n,l,o;r=r||{};if(m){if(j==="none"){if(p){k.replaceClass("wait-cursor-on","wait-cursor-off")}else{k.addClass("wait-cursor-on")}}else{if(j==="fade"){if(p){if(i!=="full"){m.replaceClass("content-fade-out","content-fade-in")}else{if(q&&s){m.replaceClass("content-fade-out","content-fade-in");q.replaceClass("content-fade-out","content-fade-in");s.replaceClass("content-fade-out","content-fade-in")}}}else{if(i!=="full"){m.addClass("content-fade-out")}else{if(k&&q&&s){if(k.hasClass("yog-type-index")){m.addClass("content-fade-out");q.addClass("content-fade-out");s.addClass("content-fade-out")}else{m.addClass("content-fade-out")}}}}}else{if(j==="slide"){l=r.transitionFeature;o=l==="scroll-to-next";if(p){m.removeClass(u.get("transition.class"));if(!o){m.removeClass("slide-out-sticky")}}else{if(!o){m.addClass("slide-out-sticky")}n="slide-out-"+u._getRequestGridType(r.requestGridType||"")+(l?"-"+l:"");m.addClass(n);u.set("transition.start",new Date().getTime());u.set("transition.class",n)}}}}}},_renderContent:function(O){var B=this,L=O.markup,E=h.Node.create(L),w=B.get("pageChrome"),l=B.get("bodyNode"),k=B._transitionFinishIn(),q=O.persistentData,J=O.requestMetadata||{},x,j=B._getPageMetaField("gridtype","index"),y=B._getPageMetaField("navtype",""),M=B._getPageMetaField("theme","default"),m=B._getPageMetaField("theme_css",""),H=B._getPageMetaField("theme_glass_css",""),C=B._getPageMetaField("theme_imagery_css",""),D=w.getGridType(),p,G=B._getPageMetaField("contentuuid",""),u=B._getPageMetaField("spaceid"),o=B.get("nodePaths"),K=o.content,z=o.related,s=o.navigation,F=o.superlead,t=h.one(K),i=h.one(z),n=h.one(s),v=h.one(F),N=E.one(K),r=E.one(z),I=E.one(s),A=E.one(F);w.setSpaceId(u);if(k<0){B._handleGridTypeChange(j);B._handleNavTypeChange(y);B._handleThemeChange(M,m,H,C);B._handlePersistentModules(t,N);h.Global.fire(c,{node:t});t.setHTML(N.getHTML());t.setStyle("visibility","hidden");h.later(10,this,function(){t.setStyle("visibility","")});B.toggleContentNode(true);B._handleContentChange(G,O.path,q);p=l.hasClass("scroll-bandit");if(!p||j!=="content"){window.scroll(0,0);if("smartphone"===w.getDevice()){l.one("#yog-bd").set("scrollTop",0)}}}else{x=J.transitionFeature==="scroll-to-next";if(x){N.addClass("background")}t.get("parentNode").insertBefore(N,t);setTimeout(function(){h.Global.fire(c,{node:t});t.remove(true);B._handleGridTypeChange(j);B._handleNavTypeChange(y);if(x){N.removeClass("background")}B._handleContentChange(G,O.path,q);p=l.hasClass("scroll-bandit");if((j==="content"&&!p)||j!=="content"){window.scroll(0,0)}},k)}if(((j==="index"||D==="index")&&i&&r)||(j==="content"&&B.get("refreshRightRailContent"))){h.Global.fire(c,{node:i});B._handlePersistentModules(i,r);i.setHTML(r.getHTML())}if(v&&A){h.Global.fire(c,{node:v});B._handlePersistentModules(v,A);v.setHTML(A.getHTML())}if(n&&I){h.Global.fire(c,{node:n});B._handlePersistentModules(n,I);n.setHTML(I.getHTML())}},_initEventListener:function(){var i=this;h.Global.on(e+"page-requested",i._handleContentRequested,i);h.Global.on(e+"content-ready",i._renderContent,i);h.Global.on(e+"metadata-ready",i._handleMetadataReady,i)},_handleContentRequested:function(j){var i=this;i.toggleContentNode(false,j)},_handleMetadataReady:function(k){var i=this,j;i.page={};if(k.json){j=k.json;h.Array.each(["gridtype","navtype","contenttype","contentuuid","spaceid","theme","theme_css","theme_glass_css","theme_imagery_css"],function(l){if(typeof j[l]!=="undefined"){i.page[l]=j[l]}})}},_handlePersistentModules:function(l,k){var j=this,i=false;if(!j.get("enablePersistentMods")){return false}i=k.all("div.yom-persist");if(i){i.each(function(m){var n="#"+m.get("id");if(l.one(n)){k.one(n).setHTML(l.one(n).getHTML())}})}},_transitionFinishIn:function(){var i=this,j=i.get("transition");if(j.style!=="slide"){return -1}return(j.start||0)+j.duration-new Date().getTime()},_getPageMetaField:function(l,j){var k=this,i;if(typeof j==="undefined"){j=""}i=k.page[l]||j;return i},_handleGridTypeChange:function(j){var i=this,k=i.get("bodyNode"),l=i.get("pageChrome");if(k){if(j==="index"){if(!k.hasClass(b)){k.replaceClass(g,b)}}else{if(!k.hasClass(g)){k.replaceClass(b,g)}}}l.setGridType(j);h.Global.fire(e+"before-active-content-change");h.Global.fire(a+"before-active-content-change")},_handleNavTypeChange:function(i){var j=this,k=j.get("bodyNode");if(k){if(i==="collapse"){if(!k.hasClass(d)){k.addClass(d)}}else{if(k.hasClass(d)){k.removeClass(d)}}}},_handleThemeChange:function(n,k,r,t){var l=h.all("link")._nodes,u=null,o="",s="",q="",p="",j="";l=h.all("link")._nodes;u=null;for(var m=0;m<l.length;m++){o=l[m].getAttribute("href");if(o.match(/v[0-9]+_base/)){u=l[m];break}}if(!u){return false}s=u.getAttribute("href");q=s.match("/media/themes/(v[0-9]+_(?!base)[^/]+)/");if(h.Lang.isArray(q)&&q.length>1){p=q[1]}if(p==n||!p||!s){return false}j=k.split("/media/themes");if(h.Lang.isArray(j)&&j.length>1){k=j[1]}j=r.split("/media/themes");if(h.Lang.isArray(j)&&j.length>1){r=j[1]}j=t.split("/media/themes");if(h.Lang.isArray(j)&&j.length>1){t=j[1]}if(!k||!r||!t){return false}s=s.replace(new RegExp("/"+p+"/theme-min-[0-9]*.css"),k);s=s.replace(new RegExp("/"+p+"/theme-glass-min-[0-9]*.css"),r);s=s.replace(new RegExp("/"+p+"/theme-imagery-min-[0-9]*.css"),t);u.setAttribute("href",s)},_handleContentChange:function(k,n,o){var j=this,m=j.get("pageChrome"),i=m.getGridType(),l;m.setContentId(k);h.Global.fire(e+"loaded",{uuid:k});l={uuid:k,data:o,lastIndexPath:i==="index"?null:j.get("lastIndexPath")};h.Global.fire(e+"active-content-changed",l);h.Global.fire(a+"active-content-changed",l);if(i==="index"){j.set("lastIndexPath",n)}},_getRequestGridType:function(j){var i=this;if(!j){j=i.get("pageChrome").getGridType()==="content"?"index":"content"}if(j!=="index"&&j!=="content"){j="content"}return j},_setupScrollToNextTrigger:function(){var s=this,o=window.innerHeight,n=h.one(s.get("nodePaths.content")).get("parentNode"),r,q=false,l=false,k,j=(h.UA.android||!h.UA.touchEnabled)?"tap":"scroll",i=h.UA.android?false:true,p=s.get("scrollToNext."+j+"Text"),m=s.get("scrollToNext."+j+"ReturnText");r=n.appendChild('<div class="yom-scroll-to-next-trigger"></div>');h.Global.on(e+"page-requested",s._archiveStreamItems,s);h.Global.on(a+"active-content-changed",function(){var t;k=null;if(s.get("enableTriggerNode")){t=s.getNextStreamItem(window.location.pathname);if(t){k=t;r.setHTML(p)}else{if(s.get("pageChrome").getGridType()==="content"){k=s.get("lastIndexPath");r.setHTML(m)}}}r.setStyle("display",k?"block":"none")});if(j==="scroll"){n.on("touchend",function(){if(k){if(!q){if(window.innerHeight>o){o=window.innerHeight}}else{if(!l&&document.height-window.scrollY-o<-40){l=true}}}});if(typeof window.onorientationchange!=="undefined"){h.on("orientationchange",function(){o=window.innerHeight})}}else{r.on("click",function(){if(q){s._triggerPage(k)}})}h.one(window).on("scroll",function(){if(k&&!q&&(document.height-window.scrollY-o<50||!i)){r.setStyle("opacity",1);q=true}if(l){s._triggerPage(k);l=false}});h.Global.on(e+"page-requested",function(){if(q){q=false;r.setStyle("opacity",0)}})},_triggerPage:function(i){h.Global.fire(e+"page-request-metadata",{requestGridType:"content",transitionFeature:"scroll-to-next"});h.Global.fire(e+"navigate",{url:i})},_archiveStreamItems:function(){var j=this,k=h.one("#p_30345786"),m,l,i=j.get("pageChrome").getGridType();j.set("enableTriggerNode",true);if(k){m=k.all("li.content");l=[]}else{if(i==="index"){j.setAttrs({streamItems:[],enableTriggerNode:false})}return}m.each(function(q){var p=decodeURIComponent(q.getData("url")),n=q.one(".body a"),o=n&&n.getAttribute("href");if(o&&p.indexOf(o)>0){l[l.length]=o}});j.set("streamItems",l)},getNextStreamItem:function(j){var i=this,k=i.get("streamItems"),l;if(i.get("pageChrome").getGridType()!=="index"&&k&&k.length>0){l=k.indexOf(j);if(l>=0){if(l<k.length-1){return k[l+1]}}else{return k[0]}}return null}})},"0.0.1",{requires:["base","node-base"]});
/* perf-timeable.js 3201e29 */ YUI.add("media-perf-timeable",function(b){var a="PerfTimeable";b.namespace("Media")[a]=function(){};b.Media[a].prototype={_timer:window.MediaPerfTiming,_time:function(d,f,e){var c=this,g=f+"Timer";if(c._timer){c._timer[g](c.NAME,d,e)}},_stopTimer:function(c){this._time(c,"end")},_startTimer:function(c,d){this._time(c,"start",d)},_cancelTimer:function(c){this._time(c,"cancel")},_beaconTimers:function(){var c=this;if(c._timer){c._timer.done(c.NAME)}}}},"0.0.1",{requires:[]});
/* beacon-manager.js c84baae */ YUI.add("media-beacon-manager",function(f){var e="BeaconManager",a="beacon-manager:",d=a+"pageview",c=a+"comscore-pageview",b="content:reveal",g=[];f.namespace("Media")[e]=f.Base.create("media-beacon-manager",f.Base,[],{chrome:null,contentRevealConfig:null,initializer:function(i){var h=this;h.chrome=i.chrome;if(g.length>0){f.Array.each(g,function(j){j.detach()},h)}g.push(f.Global.on(d,function(j){h._handlePageView(j)}));g.push(f.Global.on(c,function(k){var j=true;h._handlePageView(k,j)}));g.push(f.Global.on(b,function(j){h._handleRapidPageView(h.contentRevealConfig||(j&&j.config))}))},_handlePageView:function(k,h){var i=this,j=k&&k.config||null;if(h){i._handleComscorePageview(k)}else{i._handleRapidPageView(j)}},_handleComscorePageview:function(k){var h=this,j=k&&k.force===true,l=YAHOO&&YAHOO.i13n&&YAHOO.i13n.spaceid||"";if(h._shouldFirePv()||j){try{YMEDIA_REQ_ATTR.csbeacon(true,l)}catch(i){}}},_handleRapidPageView:function(i){var h=this;if(i){if(h._shouldFirePv()){if(f.Media.requestManager&&f.Media.requestManager.referrerurl){i.referrer=f.Media.requestManager.referrerurl}f.Global.fire("rapid-tracker:reinit",i);h.contentRevealConfig=i}else{h.contentRevealConfig=i}}else{f.log("Did not receive the required PV data","error",e)}},_shouldFirePv:function(){var h=!!((f.one("#yom-slideshow-lightbox")||f.one("#content-lightbox"))||false);return !h}})},"0.0.1",{requires:["event-custom","node-base"]});/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("array-extras",function(e,t){var n=e.Array,r=e.Lang,i=Array.prototype;n.lastIndexOf=r._isNative(i.lastIndexOf)?function(e,t,n){return n||n===0?e.lastIndexOf(t,n):e.lastIndexOf(t)}:function(e,t,n){var r=e.length,i=r-1;if(n||n===0)i=Math.min(n<0?r+n:n,r);if(i>-1&&r>0)for(;i>-1;--i)if(i in e&&e[i]===t)return i;return-1},n.unique=function(e,t){var n=0,r=e.length,i=[],s,o,u,a;e:for(;n<r;n++){a=e[n];for(s=0,u=i.length;s<u;s++){o=i[s];if(t){if(t.call(e,a,o,n,e))continue e}else if(a===o)continue e}i.push(a)}return i},n.filter=r._isNative(i.filter)?function(e,t,n){return i.filter.call(e,t,n)}:function(e,t,n){var r=0,i=e.length,s=[],o;for(;r<i;++r)r in e&&(o=e[r],t.call(n,o,r,e)&&s.push(o));return s},n.reject=function(e,t,r){return n.filter(e,function(e,n,i){return!t.call(r,e,n,i)})},n.every=r._isNative(i.every)?function(e,t,n){return i.every.call(e,t,n)}:function(e,t,n){for(var r=0,i=e.length;r<i;++r)if(r in e&&!t.call(n,e[r],r,e))return!1;return!0},n.map=r._isNative(i.map)?function(e,t,n){return i.map.call(e,t,n)}:function(e,t,n){var r=0,s=e.length,o=i.concat.call(e);for(;r<s;++r)r in e&&(o[r]=t.call(n,e[r],r,e));return o},n.reduce=r._isNative(i.reduce)?function(e,t,n,r){return i.reduce.call(e,function(e,t,i,s){return n.call(r,e,t,i,s)},t)}:function(e,t,n,r){var i=0,s=e.length,o=t;for(;i<s;++i)i in e&&(o=n.call(r,o,e[i],i,e));return o},n.find=function(e,t,n){for(var r=0,i=e.length;r<i;r++)if(r in e&&t.call(n,e[r],r,e))return e[r];return null},n.grep=function(e,t){return n.filter(e,function(e,n){return t.test(e)})},n.partition=function(e,t,r){var i={matches:[],rejects:[]};return n.each(e,function(n,s){var u=t.call(r,n,s,e)?i.matches:i.rejects;u.push(n)}),i},n.zip=function(e,t){var r=[];return n.each(e,function(e,n){r.push([e,t[n]])}),r},n.flatten=function(e){var t=[],i,s,o;if(!e)return t;for(i=0,s=e.length;i<s;++i)o=e[i],r.isArray(o)?t.push.apply(t,n.flatten(o)):t.push(o);return t}},"3.18.1",{requires:["yui-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("plugin",function(e,t){function n(t){!this.hasImpl||!this.hasImpl(e.Plugin.Base)?n.superclass.constructor.apply(this,arguments):n.prototype.initializer.apply(this,arguments)}n.ATTRS={host:{writeOnce:!0}},n.NAME="plugin",n.NS="plugin",e.extend(n,e.Base,{_handles:null,initializer:function(e){this._handles=[]},destructor:function(){if(this._handles)for(var e=0,t=this._handles.length;e<t;e++)this._handles[e].detach()},doBefore:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.beforeHostMethod(e,t,n):r.on&&(i=this.onHostEvent(e,t,n)),i},doAfter:function(e,t,n){var r=this.get("host"),i;return e in r?i=this.afterHostMethod(e,t,n):r.after&&(i=this.afterHostEvent(e,t,n)),i},onHostEvent:function(e,t,n){var r=this.get("host").on(e,t,n||this);return this._handles.push(r),r},onceHostEvent:function(e,t,n){var r=this.get("host").once(e,t,n||this);return this._handles.push(r),r},afterHostEvent:function(e,t,n){var r=this.get("host").after(e,t,n||this);return this._handles.push(r),r},onceAfterHostEvent:function(e,t,n){var r=this.get("host").onceAfter(e,t,n||this);return this._handles.push(r),r},beforeHostMethod:function(t,n,r){var i=e.Do.before(n,this.get("host"),t,r||this);return this._handles.push(i),i},afterHostMethod:function(t,n,r){var i=e.Do.after(n,this.get("host"),t,r||this);return this._handles.push(i),i},toString:function(){return this.constructor.NAME+"["+this.constructor.NS+"]"}}),e.namespace("Plugin").Base=n},"3.18.1",{requires:["base-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("node-scroll-info",function(e,t){var n=e.config.doc,r=e.config.win,i="scroll",s="scrollDown",o="scrollLeft",u="scrollRight",a="scrollUp",f="scrollToBottom",l="scrollToLeft",c="scrollToRight",h="scrollToTop";e.Plugin.ScrollInfo=e.Base.create("scrollInfoPlugin",e.Plugin.Base,[],{initializer:function(e){this._host=e.host,this._hostIsBody=this._host.get("nodeName").toLowerCase()==="body",this._scrollDelay=this.get("scrollDelay"),this._scrollMargin=this.get("scrollMargin"),this._scrollNode=this._getScrollNode(),this.refreshDimensions(),this._lastScroll=this.getScrollInfo(),this._bind()},destructor:function(){(new e.EventHandle(this._events)).detach(),this._events=null},getOffscreenNodes:function(t,n){typeof n=="undefined"&&(n=this._scrollMargin);var r=e.Selector.query(t||"*",this._host._node);return new e.NodeList(e.Array.filter(r,function(e){return!this._isElementOnscreen(e,n)},this))},getOnscreenNodes:function(t,n){typeof n=="undefined"&&(n=this._scrollMargin);var r=e.Selector.query(t||"*",this._host._node);return new e.NodeList(e.Array.filter(r,function(e){return this._isElementOnscreen(e,n)},this))},getScrollInfo:function(){var e=this._scrollNode,t=this._lastScroll,n=this._scrollMargin,r=e.scrollLeft,i=e.scrollHeight,s=e.scrollTop,o=e.scrollWidth,u=s+this._height,a=r+this._width;return{atBottom:u>i-n,atLeft:r<n,atRight:a>o-n,atTop:s<n,isScrollDown:t&&s>t.scrollTop,isScrollLeft:t&&r<t.scrollLeft,isScrollRight:t&&r>t.scrollLeft,isScrollUp:t&&s<t.scrollTop,scrollBottom:u,scrollHeight:i,scrollLeft:r,scrollRight:a,scrollTop:s,scrollWidth:o}},isNodeOnscreen:function(t,n){return t=e.one(t),!!t&&!!this._isElementOnscreen(t._node,n)},refreshDimensions:function(){var t=n.documentElement;e.UA.ios||e.UA.android&&e.UA.chrome?(this._winHeight=r.innerHeight,this._winWidth=r.innerWidth):(this._winHeight=t.clientHeight,this._winWidth=t.clientWidth),this._hostIsBody?(this._height=this._winHeight,this._width=this._winWidth):(this._height=this._scrollNode.clientHeight,this._width=this._scrollNode.clientWidth),this._refreshHostBoundingRect()},_bind:function(){var t=e.one("win");this._events=[this.after({scrollDelayChange:this._afterScrollDelayChange,scrollMarginChange:this._afterScrollMarginChange}),t.on("windowresize",this._afterResize,this)],this._hostIsBody?this._events.push(t.after("scroll",this._afterHostScroll,this)):this._events.push(t.after("scroll",this._afterWindowScroll,this),this._host.after("scroll",this._afterHostScroll,this))},_getScrollNode:function(){return this._hostIsBody&&!e.UA.webkit?n.documentElement:e.Node.getDOMNode(this._host)},_isElementOnscreen:function(e,t){var n=this._hostRect,r=e.getBoundingClientRect();return typeof t=="undefined"&&(t=this._scrollMargin),!(r.top>n.bottom+t||r.bottom<n.top-t||r.right<n.left-t||r.left>n.right+t)},_refreshHostBoundingRect:function(){var e=this._winHeight,t=this._winWidth,n;this._hostIsBody?(n={bottom:e,height:e,left:0,right:t,top:0,width:t},this._isHostOnscreen=!0):n=this._scrollNode.getBoundingClientRect(),this._hostRect=n},_triggerScroll:function(t){var n=this.getScrollInfo(),r=e.merge(t,n),p=this._lastScroll;this._lastScroll=n,this.fire(i,r),n.isScrollLeft?this.fire(o,r):n.isScrollRight&&this.fire(u,r),n.isScrollUp?this.fire(a,r):n.isScrollDown&&this.fire(s,r),n.atBottom&&(!p.atBottom||n.scrollHeight>p.scrollHeight)&&this.fire(f,r),n.atLeft&&!p.atLeft&&this.fire(l,r),n.atRight&&(!p.atRight||n.scrollWidth>p.scrollWidth)&&this.fire(c,r),n.atTop&&!p.atTop&&this.fire(h,r)},_afterHostScroll:function(e){var t=this;clearTimeout(this._scrollTimeout),this._scrollTimeout=setTimeout(function(){t._triggerScroll(e)},this._scrollDelay)},_afterResize:function(){this.refreshDimensions()},_afterScrollDelayChange:function(e){this._scrollDelay=e.newVal},_afterScrollMarginChange:function(e){this._scrollMargin=e.newVal},_afterWindowScroll:function(){this._refreshHostBoundingRect()}},{NS:"scrollInfo",ATTRS:{scrollDelay:{value:50},scrollMargin:{value:50}}})},"3.18.1",{requires:["array-extras","base-build","event-resize","node-pluginhost","plugin","selector"]});

/* ad-controller.js cc0aa40 */ YUI.add("media-ad-controller",function(d){var c="AdController",b="lightbox",a="AUTO";d.namespace("Media")[c]=d.Base.create("media-ad-controller",d.Base,[],{initializer:function(f){var e=this;f=f||{};e.set("env",f.env||"");e.set("hideOnFailure",typeof f.hideOnFailure!=="undefined"?f.hideOnFailure:false);e.set("fetchOnPjaxOnly",typeof f.fetchOnPjaxOnly!=="undefined"?f.fetchOnPjaxOnly:false);e.set("fetchingPositions",[]);e.set("spaceid","");e.set("isEventBasedRotation",true);e._initEventListeners();return e},_setupDevConfig:function(){var k=["beaconPath","msgPath","renderPath","servicePath"],j,f=window.location.hostname+(window.location.port?(":"+window.location.port):""),e,g,h;for(e=0,g=k.length;e<g;e++){j=k[e];h=DARLA_CONFIG[j];if(h){DARLA_CONFIG[j]=h.replace(/\/\/[^/]+\//,"//"+f+"/")}}DARLA.config(DARLA_CONFIG)},_initEventListeners:function(){var e=this;d.log("listen to darla ready event","info",c);d.Global.on("darla:ready",function(){if(e.get("env")==="dev"){e._setupDevConfig()}});d.Global.on("darla:failure",function(f){if(e.get("hideOnFailure")){e._toggleAdContainerView(f.positions||null,false)}});d.Global.on("darla:success",function(g){var f=d.Media.requestManager.get("requestType")||"";if("pjax"===f){e._enableDmrosFallbacks(g.positions)}if(e.get("hideOnFailure")){e._toggleAdContainerView(g.positions||null,true)}})},_isDarlaReady:function(){return DARLA&&typeof DARLA_CONFIG&&YUI&&YUI.AdsDarla&&YUI.AdsDarla.fetch},_toggleAdContainerView:function(j,h){var k=this,l,m,f,e,g=k.get("fetchingPositions");if(!j){return}for(l=0,m=j.length;l<m;l++){e=j[l];f=d.one("#yom-ad-"+e);if(f){if(h){f.show()}else{f.hide()}}}if(h){for(l=0,m=g.length;l<m;l++){e=g[l];if(d.Array.indexOf(j,e)<0){f=d.one("#yom-ad-"+e);if(f){f.hide()}}}}},refreshAd:function(e){var f=b,g=["#yom-ad-LREC-lb","#yom-ad-LREC2-lb"];if(DARLA&&DARLA.inProgress()){return}if(e){f=e.name;DARLA.add(e)}g.map(function(h){var j=d.one(h),i;if(!j){return}i=j.previous(".Ad-Container");if(!i){return}i.remove(true)});DARLA.event(f)},fetchAd:function(h,n,u){var s=this,o,g,k,t,q="",r,p,f,e,m={},j,l;if(u){o=u.enableViewportRotation;g=u.viewportRotationDuration;k=u.enableTimeBasedRotation;t=u.timeBasedRotationInterval}if(DARLA&&DARLA.abort){DARLA.abort()}if(!s._isDarlaReady()){d.log("trying to fetch ad before darla is ready","warn",c);return}r=s._getDarlaEventId();s.set("spaceid",DARLA_CONFIG.events[r].sp);if(h){f=d.clone(DARLA_CONFIG.events[r]);if(n&&n.length>0){d.log("spaceid is overrided as "+n,"info",c);f.sp=n;s.set("spaceid",n)}s.set("fetchingPositions",h);if(o||k){DARLA_CONFIG.rotationTimingDisabled=false;f.name=a;if(o){d.log("viewport rotation is enabled","info",c);for(j=0,l=h.length;j<l;j++){e=h[j];m[e]={autoIV:1,autoMax:15}}}else{m=h.join(",")}f.ps=m;f.autoStart=true;f.autoRT=(o?g:t)||30000;r=a;s.set("isEventBasedRotation",false)}else{f.name=b;f.ps=h.join(",");r=b;s.set("isEventBasedRotation",true)}}else{DARLA.render.RenderMgr.nuke("*");DARLA.del("*");p=DARLA.config(DARLA_CONFIG);if(p!=="OK"){d.log("failed to configure darla","error")}}p=DARLA.add(f);d.log("calling darla fetch","info",c);DARLA.event(r)},isEventBasedRotation:function(){return this.get("isEventBasedRotation")},_getDarlaEventId:function(){var e;for(e in DARLA_CONFIG.events){return e}return},_enableDmrosFallbacks:function(g){var e=this._getDmrosFallbackPositions(g),f,h;if(e.length>0){f=YUI.namespace("Media").ads_dmros_fallbacks||{};for(h in f){if(f.hasOwnProperty(h)){if(-1===e.indexOf(h)||"function"!==typeof(f[h])){continue}f[h]()}}}},_getDmrosFallbackPositions:function(j){var h=DARLA_CONFIG.positions,g=d.Media.requestManager.referrerurl||"",i=(""!==g)?g.replace(/\?.*/,"").replace(/.*.yahoo.com/,""):"",f=[],e;for(e in h){if(-1===d.Array.indexOf(j,e)){if("MAST"===e){if(""!==i&&-1===i.indexOf(".html")){f.push(e)}}else{f.push(e)}}}return f}})},"0.0.1",{requires:["node-scroll-info","event-custom"]});
/* interest-manager.js 0527e1c */ YUI.add("media-interest-manager",function(b){var j="InterestManager",e="interest-manager:",i="interests:change",f=b.guid(),h,d={},a,c=[],g;g=function(){var r=function(){l()},l=function(){b.Global.on(e+"request-interest",function(u){var w=u?u.callback:null,v=u?u.start:null,s=u?u.recent:null,t=u?u.state:null;if(typeof w==="function"){n(w,s,t,v)}});b.Global.on(e+"update-interest",function(w){var v=w?w.interest:null,s=(w&&typeof w.propagate!=="undefined")?w.propagate:true,t={},u;if(v){d=b.merge(d,v);if(a){clearTimeout(a);a=null}a=setTimeout(o,1000);for(u in v){c[c.length]=u;t[u]={state:v[u].state,declared:1}}if(s){b.Global.fire(i,{origin:f,data:t})}}});b.Global.on(i,function(w){var s,u,t,v={},x=0;if(w){s=w.origin||"";u=w.data||{};if(s&&s!==f&&typeof u==="object"){for(t in u){if(u.hasOwnProperty(t)){v[t]={state:u[t].state};x++}}if(x){b.Global.fire(e+"update-interest",{interest:v,propagate:false})}}}})},o=function(){var x,v,w,t,y={},s=0,u=window.YMEDIA_CRUMB||"";for(x in d){v=d[x];w=v.state;t=v.module||"";if(!h[x]||h[x].state!==w){y[x]={state:w,module:t};s++}}if(s>0){b.io("/_xhr/update-topic-interest/",{method:"POST",data:{crumb:u,updates:b.JSON.stringify(y)},on:{success:function(A,G){var B=(G&&G.responseText)?G.responseText:"",C,H,z,F,E;try{B=b.JSON.parse(B);C=B.results||{};for(z in C){H=C[z];F=H.id;if(!F){continue}E=F.indexOf("yct:")===0?F.replace("yct:","YCT:"):("WIKIID:"+F);if(h[E]&&H.name&&H.url){h[E].name=H.name;h[E].url=H.url}}}catch(D){b.log(D,"error",j)}},end:function(){b.Global.fire(e+"interest-updated")}}})}h=p(true);d={}},n=function(v,s,t,u){if(h){m(v,s,t,u)}else{b.io("/_xhr/get-topic-interest/",{timeout:2500,on:{success:function(y,z){var w=(z&&z.responseText)?z.responseText:"",A;try{A=b.JSON.parse(w)}catch(x){}if(A){q(A)}},end:function(){m(v,s,t,u)}}})}},m=function(v,s,t,u){if(s&&t){v(k(s,t,u))}else{v(p())}},k=function(z,t,u){var C=p(),s=[],v=0,y,A,x,w,B=z+(u||0);loopTopicHistory:for(x=c.length-1;x>=0;x--){A=c[x];for(w=s.length-1;w>=0;w--){if(s[w].id===A){continue loopTopicHistory}}y=C[A];if(y.state===t&&y.name&&y.url){s[v]={id:A,rawId:y.rawId,name:y.name,state:y.state,url:y.url};v++;if(v>=B){break}}}if(u){return s.splice(u,z)}return s},q=function(z){var y=z.declared||[],u=z.inferred||[],x=0,w,v,t,s;h={};for(t=0,v=u.length;t<v;t++){w=u[t];if(w.id){h[w.id]={name:w.name,state:w.state,url:w.url,rawId:w.raw_id,type:"inferred"}}}for(t=0,v=y.length;t<v;t++){w=y[t];if(w.id&&typeof w.state!=="undefined"){s=h[w.id]?"inf-dec":"declared";h[w.id]={name:w.name,state:w.state,url:w.url,rawId:w.raw_id,type:s};c[x]=w.id;x++}}},p=function(s){var u,t;for(u in d){t=s?h:b.clone(h,true);break}for(u in d){if(!t[u]){t[u]={}}t[u].state=d[u].state}if(t){return t}return h};r()};g.prototype={};b.namespace("Media")[j]=g},"0.0.1",{requires:["node-base","io-base","json-parse","json-stringify"]});
if(typeof YAHOO==="undefined"||!YAHOO){YAHOO={};}
if(!YAHOO.ULT){YAHOO.ULT={};}
if(!YAHOO.ULT.CONF){YAHOO.ULT.CONF={};}
if(!YAHOO.ULT.BEACON){YAHOO.ULT.BEACON=location.protocol+"//geo.yahoo.com/t";}
if(!YAHOO.ULT.DOMAIN){YAHOO.ULT.DOMAIN=".yahoo.com";}
if(!YAHOO.ULT.IMG){YAHOO.ULT.IMG=new Image();}
if(typeof(YAHOO.ULT.DEBUG)==="undefined"){YAHOO.ULT.DEBUG=0;}
YAHOO.ULT.DELIMITERS={'/':'P',';':'1','?':'P','&':'1','#':'P'};(function(){var YLT=YAHOO.ULT;}());(function(){var YLT=YAHOO.ULT;YLT.strip_rd=function(u,data){var idx=u.indexOf('/**');if(idx!==-1){data.clean=u.substr(idx+3);data.clean=decodeURIComponent(data.clean);}
return data;};YLT.strip=function(u){var delims=YLT.DELIMITERS;var data={url:u,clean:'',cookie:'',keys:[]};var idx=0;while(u.indexOf('_yl',idx)!==-1){var start=u.indexOf('_yl',idx);if(idx<start){data.clean+=u.slice(idx,start-1);}
idx=start+3;if(delims[u.charAt(start-1)]&&u.charAt(start+4)==='='){data.ult=1;var key="_yl"+u.charAt(start+3);var value="";for(start=start+5;start<u.length&&!delims[u.charAt(start)];start++){value+=u.charAt(start);}
data.keys.push(key);data[key]=value;if(key!=='_ylv'){data.cookie+="&"+key+"="+value;}
if(delims[u.charAt(start)]&&delims[u.charAt(start)]==='P'){data.clean+=u.charAt(start);}
idx=start+1;}else{data.clean+=u.slice(start-1,idx);}}
if(idx){data.clean+=u.substr(idx);}else{data.clean=u;}
if(data.ult){data.cookie=data.cookie.substr(1);if(data._ylv==='0'){YLT.strip_rd(u,data);}}
return data;};YLT.click_token=function(e,u,t,i){if(!i){i=YLT.IMG;}
var src=YLT.BEACON+"?"+t+'&t='+Math.random();YLT.IMG.onerror=YLT.IMG.onload=function(){if(e.currentTarget.get('target')==="_top"){top.location=u;}else{location=u;}};e.preventDefault();i.src=src;};YLT.beacon_token=function(t,i){if(!i){i=YLT.IMG;}
var src=YLT.BEACON+"?"+t+'&t='+Math.random();i.src=src;};}());YUI().use('node-base',function(Y){var YLT=YAHOO.ULT;YLT.set_href=function(el,data,keyname){if(data.html){el.set('href',data[keyname]);el.set('innerHTML',data.html);}else{el.set('href',data[keyname]);}};YLT.clicked=function(e,data){var el=e.currentTarget;while(el&&el.get('nodeName').toLowerCase()!=='a'){el=el.get('parentNode');}
if(!el){return;}
if(el.get('className').indexOf('yltasis')!==-1){}else if(el.get('className').indexOf('yltnofollow')!==-1){YLT.set_href(el,data,"clean");YLT.beacon_token(data.cookie);}else if(data._ylv==3){YLT.set_href(el,data,"clean");var cook="D="+data.cookie+"; Max-Age=10; Path=/; Domain="+YLT.DOMAIN;document.cookie=cook;}else if(data._ylv==8||data._ylv==9){}else if(e.altKey||e.ctrlKey||e.shiftKey||e.metaKey||data.target==="_blank"){YLT.set_href(el,data,"clean");YLT.beacon_token(data.cookie);}else{YLT.set_href(el,data,"clean");YLT.click_token(e,data.clean,data.cookie);}};YLT.revert=function(e,data){var el=e.currentTarget;var ie_ischild=0;while(el&&el.get('nodeName').toLowerCase()!=='a'){el=el.get('parentNode');ie_ischild=1;}
if(!el){}else{if(Y.UA.ie&&ie_ischild){delete data.html;}
YLT.set_href(el,data,"url");}};YLT.clean=function(){if(YAHOO.YHLDEBUG){return;}
var el,data,name,i;for(i=0;i<document.links.length;i++){el=document.links[i];if(el.className.indexOf('yltasis')!==-1){continue;}
data=YLT.strip(el.getAttribute('href',2));if(!data.ult){continue;}else if(YLT.CONF.force_beacon&&data._ylv!=8&&data._ylv!=9){data._ylv='X';}
for(name=0;name<data.keys.length;name++){if(data.keys[name]!=='_ylv'){delete data[data.keys[name]];}}
delete data.keys;delete data.ult;data.target=el.target;if(Y.UA.ie&&el.children.length===0&&(el.innerHTML.indexOf('http')===0||el.innerHTML.indexOf('www')===0||el.innerHTML.indexOf('@')!==-1||el.className.indexOf('yltiefix')!==-1)){data.html=el.innerHTML;}
var node=Y.one(el);YLT.set_href(node,data,"clean");node.on("click",YLT.clicked,null,data);if(!YLT.CONF.cleanest){node.on("mousedown",YLT.revert,null,data);}}};Y.on('domready',function(){YAHOO.ULT.clean();});});YUI.add('media-strip',function(){});YUI.add('ylt-strip',function(){});
/* instrumentation.js a1c712f */ YUI.add("media-instrumentation",function(b){function a(){a.superclass.constructor.apply(this,arguments)}a.NAME="Instrumentation";a.ATTRS={};b.extend(a,b.Base,{initializer:function(d){var c=this;d=d||{};c.instrumentAd()},instrumentAd:function(){b.Global.on("darla:success",function(g){var d=g.positions,f=d.length,h,c,e=["lrec","wp"];while(f--){c=d[f].toLowerCase();if(b.Array.indexOf(e,c)>=0){h={data:{name:c+"_impression",keys:{act:c+"_impression"}}};b.Global.fire("rapid-tracker:event",h);break}}})}});b.namespace("Media").Instrumentation=a},"0.1",{requires:[]});
/* content-lightbox.js fac0ae0 */ YUI.add("media-content-lightbox",function(c){var d={type:"photo",pt:"4",pct:"4"},j="content-video:prefetchvideos",k="content-video:playvideo",r="content-slideshow:share-info",o="content:insert-share-panel",l="body",A='.yom-slideshow[data-type="slideshow"]',f="lb-today-module",h="lb-slideshow-module",a="lb-trending-module",z="mediacontentcomment_slideshow",C="lb-sidekick-top",q="lb-sidekick-mid",i="lb-sidekick-bot",g="embed-module-one",v="embed-module-two",y="embed-module-three",B="embed-module-south",n="#content-lightbox",p="#yom-ad-LREC-lb",w="#yom-ad-LREC2-lb",x="#yom-ad-FILM-lb",t="#yom-ad-LDRB-lb",b=50,m=15,e=2,s=3,u=6;c.namespace("Media").ContentLightbox=c.Base.create("media-content-lightbox",c.Base,[],{initializer:function(G){var E=this,D,H,F;if(window.__headDelta!==undefined&&window.__headDelta>1000){e=0}E.config=G&&G.config?G.config:null;E.chrome=G&&G.chrome?G.chrome:null;if(!E.chrome){return}E.config.device=E.chrome.getDevice();E.config.deviceOS=E.chrome.getDeviceOS();E.config.deviceOSVer=E.chrome.getDeviceOSVer();E.viewport=c.one("window");E.customizedSlideshow=E.config.customizedSlideshow==="1";E.config.modId="mediacontentmodules";E.endslideModId=E.config.endslideModId||"lb-endslide-list";E.showSponsoredLightbox=(("1"===E.config.isSponsored)&&("1"===E.config.enableSponsoredLightbox));E.enableEndSlideRel=E.config.enableEndSlideRel==="1";E.enableEndSlideMP=E.config.enableEndSlideMP==="1";E.endSlideImgRatio=E.config.endSlideImgRatio;E.endSlideImgWidth=E.config.endSlideImgWidth;E.enableIBSlideshow=E.config.enableIBSlideshow==="1";E.enableLBOnPageLoad=E.config.enableLBOnPageLoad==="1";E.enableEmbedSlots=((E.config.enableEmbedSlots==="1")||(true===E.showSponsoredLightbox));if(true===E.showSponsoredLightbox){E.enableRMXAds=("1"===E.enableSponsoredRMXAds)}else{E.enableRMXAds=E.config.enableRMXAds==="1"}E.enableNativeAds=E.config.enableNativeAds==="1";E.enableTrendingModule=E.config.enableTrendingModule==="1";E.enableFilmAd=E.config.enableFilmAd==="1";E.nativeAdsThreshold=E.enableNativeAds?(parseInt(E.config.nativeAdsThreshold,10)||500):0;E.disableComments=E.config.disableComments==="1";E.enableLDRBads=E.config.enableLDRBads==="1";E.strm_cc=E.config.strm_cc||"STRM";E.fetchIBThreshold=E.config.fetchIBThreshold;E.fetchIBCount=E.config.fetchIBCount;E.IBmtype=E.config.IBmtype;E.IBImageThreshold=E.config.IBImageThreshold;E.IBVideoThreshold=E.config.IBVideoThreshold;E.IBMetalen10_filter=E.config.IBMetalen10_filter;E.pagePD=YMedia&&YMedia.rapid&&YMedia.rapid.rapidConfig&&YMedia.rapid.rapidConfig.keys&&YMedia.rapid.rapidConfig.keys.pd;E.rmxFirstIndexLoad=parseInt(E.config.rmxFirstIndexLoad,10)||3;E.rmxAdLoadInterval=parseInt(E.config.rmxAdLoadinterval,10)||7;E.rmxAdsSectionId=E.config.rmxAdsSectionId;E.rmxMaxWidth=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;E.rmxMaxHeight=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;E.rmxAdsToFetchMax=10;E.rmxResponse={};if(E.chrome.getBucketId()==="gs303"||E.chrome.getBucketId()==="gs206"){E.enableRMXAds=true}E.target=null;E.lightboxOpenSource=null;E.body=c.one("body");E.detachableHandles=[];E.activeXhr={};E.nodes={};E.data={};E.currentIndex=0;E.fetchMoreIndex=b-m;E.fetchedBatch=0;E.isSlideshow=true;E.bindOpenCloseEvents();D=c.one(l);H=(D&&D.one(A))||null;if(H&&E.enableLBOnPageLoad){F={id:H.getData("uuid")};if(H.one(".cover.go-to-slideshow-lightbox")){F.selectedId=(H.one(".cover.go-to-slideshow-lightbox").getAttribute("data-selected-id")==="")?H.one(".cover.go-to-slideshow-lightbox").getAttribute("data-id"):H.one(".cover.go-to-slideshow-lightbox").getAttribute("data-selected-id");F.alias=H.one(".cover.go-to-slideshow-lightbox").getAttribute("data-alias")}c.Global.fire("slideshow:open-lightbox",{slideshowData:F,autoOpen:1})}},bindOpenCloseEvents:function(){var E=this,D=E.body;if(!E.allSlideshowOpenLB){E.allSlideshowOpenLB=c.Global.on("slideshow:open-lightbox",E.openLightbox,E)}if(D&&!E.thumbClickSlideshowOpen){E.thumbClickSlideshowOpen=D.delegate("click",E.openLightbox,".go-to-slideshow-lightbox",E)}if(!E.closeSlideshowLB){E.closeSlideshowLB=c.Global.on("slideshow:close-lightbox",E.closeLightbox,E)}},openLightbox:function(H){var E=this,D=E.body,F=D.one("header .headline"),G,I={};E.target=H.currentTarget;if(E.target&&E.target.ancestor(".disable-content-lightbox")){return}if((E.customizedSlideshow===false)&&((E.target&&E.target.hasClass("property-extended"))||(D.one(A+" .property-extended")))){return}E.config.spaceId=E.chrome.getSpaceId();if(E.target){E.commentLightbox=E.target.hasClass("comment-lightbox-enabled")}if(H.slideshowData){E.slideshowId=H.slideshowData.id||null;E.redir_href=H.slideshowData.redir_href||null;E.curSelectedId=H.slideshowData.selectedId||null;E.lightboxOpenSource=(H.autoOpen===1)?0:1}else{E.curSelectedId=E.target.getData("uuid")||E.target.getData("selected-id")||E.target.getData("id")||parseInt(E.target.getData("orig-index"),10);E.isSlideshow=!!(E.target.getData("list-id")||false);E.slideshowId=E.target.getData("list-id")||E.chrome.getContentId();E.lightboxOpenSource=2;E.slideshowType=E.target.getData("type");H.halt(true)}if(!E.data[E.slideshowId]){if(E.target&&E.target.hasClass("get-lbdata-from-dom")&&!E.target.hasClass("slideshow")&&!E.target.hasClass("tumblrphotoset")){G=c.Media.lbData;if(!G){return}E.slideshowTotal=G.total;G.headline=F?F.get("text"):null;G.url=window.location.href;E.addLoadingOverlay();if(E.enableIBSlideshow&&G.total>0&&G.total<=E.fetchIBThreshold){E.fetchIbItems(G)}else{E.processLightboxData(G,false)}}else{if(H.slideshowData&&H.slideshowData.args){I=H.slideshowData.args}if(E.slideshowType==="tumblrphotoset"){I.src="/_xhr/tumblr-photoset/"}if(!I.getStructure){I.getStructure=1}E.addLoadingOverlay();E.getSlideshowData(0,b,1,I)}}else{if(E.data[E.slideshowId].spaceid){E.config.spaceId=E.data[E.slideshowId].spaceid}E.addLoadingOverlay();c.later(300,E,E.renderLightbox)}E.refreshLinkTrackMods();if(typeof adsGlobalObj!=="undefined"&&adsGlobalObj instanceof Array){if(adsGlobalObj.LREC!==undefined){adsGlobalObj.LREC.selector="#yom-ad-LREC-lb"}if(adsGlobalObj.LREC2!==undefined){adsGlobalObj.LREC2.selector="#yom-ad-LREC2-lb"}}},getXhr:function(H){var E=this,I="GET",F=function(L,J,K){if("abort"!==J.statusText&&!H.ignoreErrors){if(H.failure&&"function"===typeof H.failure){H.failure.call(E,L,J,K)}}},G=function(L,J,K){if(H.success&&"function"===typeof H.success){H.success.call(E,L,J,K)}},D=function(J){delete E.activeXhr[H.api];if(H.end&&"function"===typeof H.end){H.end.call(E,J)}};if(E.activeXhr[H.api]&&E.activeXhr[H.api].isInProgress()){return}if(H.method){I=H.method}E.activeXhr[H.api]=c.io(H.api,{method:I,data:H.data,"arguments":H.args,on:{success:G,failure:F,start:H.start||null,end:D}})},getSlideshowData:function(E,J,G,K){var L=this,D="/_xhr/content-lightbox/",I,F=L.config,H=L.chrome;I={count:J||b,start:E,content_id:L.slideshowId,site:H.getSite(),lang:H.getLang(),region:H.getRegion(),getStructure:(K&&K.getStructure)||0,enableSidekick:L.config.enableSidekick};if(F&&F.xhrEndPoint){D=F.xhrEndPoint}if(K){if(K.src){D=K.src}if(K.data){I=c.merge(K.data,I)}}L.getXhr({api:D,data:I,success:L.handleGetDataSuccess,failure:L.handleGetDataFailure,args:{additionalData:(K&&K.additionalData)||false,reRender:(K&&K.reRender)||false,self:L}})},handleGetDataSuccess:function(I,H,F){var E=F.self,D=(H.responseText)?c.JSON.parse(H.responseText):null,G=D?D.responseData:null;if(G){E.slideshowTotal=G.total;E.processLightboxData(G,F)}},handleGetDataFailure:function(G,F,E){var D=E.self;D.body.removeClass("slideshow-hide-1-1");D.nodes.lightboxContainer=c.one("#content-lightbox");D.closeLightbox()},processLightboxData:function(G,E){var D=this,F=D.data[D.slideshowId]||null;D.fetchedBatch++;if(!E.additionalData){if(G.spaceid){D.config.spaceId=G.spaceid}if(G.content){D.data[D.slideshowId]=G}if(G.templates){D.compileTemplates(G.templates)}D.allLoaded=(D.fetchedBatch*b>=D.data[D.slideshowId].total);if(D.allLoaded){D.data[D.slideshowId].total=D.data[D.slideshowId].content.items.length}D.slideshowUrl=G.url||null;D.data[D.slideshowId].slideshowUrl=D.slideshowUrl;D.renderLightbox()}else{if(G.content&&F.content){D.data[D.slideshowId].content.items=(F.content.items)?F.content.items.concat(G.content.items):G.content.items;D.data[D.slideshowId].content.playlist=(F.content.playlist)?F.content.playlist.concat(G.content.playlist):G.content.playlist}D.allLoaded=(D.fetchedBatch*b>=D.data[D.slideshowId].total);if(D.allLoaded){D.data[D.slideshowId].total=D.data[D.slideshowId].content.items.length}}if(E.additionalData&&E.reRender){D.renderLightbox()}if(D.allLoaded){D.fetchEndSlide()}},renderLightbox:function(){var E=this,D=E.data[E.slideshowId].content.items,G="open_lgtbx_automatic",H;E.currentIndex=E.findSelectedPhoto();if(E.currentIndex===null){return}if(!E.nodes||!E.nodes.lightboxContainer){E.setupLightbox()}if(!E.data[E.slideshowId].interstitialSource){E.getInterstitial()}if(E.enableRMXAds){E.bindRmxAdClickEvents()}if(E.lightboxOpenSource===2){G="open_lgtbx";G=(E.target.hasClass("cover")||E.target.ancestor(".cover-wrap",false,l))?G+"_lead":G+"_embed";G=("LI"===E.target.get("tagName"))?G+"_thumb":G}E.chrome.beaconClick(E.getRapidTrackingData(G),E.config.modId);if(!E.commentLightbox){E.renderItem(E.currentIndex)}else{var F=document.getElementsByTagName("meta")["description"];E.nodes.viewport.container.setStyle("display","none");E.nodes.meta.container.setStyle("padding","10px 0");E.nodes.meta.container.setHTML('<div class="lb-meta-caption"><p class="comment-lightbox-summary">'+F.content+"</p></div>")}if(D[E.currentIndex].isVideo){H=E.nodes.viewport.container.one(".lb-video-cta");if(H){H.simulate("click")}}},addLoadingOverlay:function(){var D=this,G=D.body,E=c.one("html"),F='<div id="content-lightbox" class="yom-lb {{ieClass}} lb-spinner">';if(c.UA.ie&&c.UA.ie<10){F=F.replace("{{ieClass}}","ie")}else{F=F.replace("{{ieClass}}","")}E.addClass("noscroll");G.prepend(F);setTimeout(function(){var H=G.one("#content-lightbox");H.addClass("yom-lb-bg")},0)},findSelectedPhoto:function(){var F=this,D,E=F.data[F.slideshowId].content.items,G=E.length;if(F.curSelectedId){if(F.curSelectedId===F.slideshowId){return 0}if(F.curSelectedId<E.length){return F.curSelectedId}if(F.target&&F.target.hasClass("go-to-slideshow-lightbox")&&F.target.hasClass("cover")&&!F.target.hasClass("open-to-index")){return 0}else{D=c.Array.find(E,function(H){if(H.uuid===F.curSelectedId){return true}return false},F);if(D===null&&!F.allLoaded){G+=F.calculateAdPositionOffset();F.getSlideshowData(G,b,0,{additionalData:true,reRender:true});return null}if(D===null&&F.allLoaded){return 0}return c.Array.indexOf(E,D)}}return 0},setupLightbox:function(){var G=this,D=G.body,H=D.one("#content-lightbox"),K,F,J,E,I={slideshowId:G.slideshowId,slideshowTitle:G.data[G.slideshowId].headline,slideshowDesc:(G.data[G.slideshowId].desc)?{slideshowDesc:G.data[G.slideshowId].desc}:null,embedSlotOne:(G.config.embed_slots.one&&G.config.embed_slots.one.m_id)?g:null,embedSlotTwo:(G.config.embed_slots.two&&G.config.embed_slots.two.m_id)?v:null,embedSlotThree:(G.config.embed_slots.three&&G.config.embed_slots.three.m_id)?y:null,embedSlotSouth:(G.config.embed_slots.south&&G.config.embed_slots.south.m_id)?B:null,commentsModuleId:z,todayModuleId:f,moreString:G.config.strings.moreString,lessString:G.config.strings.lessString,slideshowModuleId:h,trendingModuleId:a,enableTrendingModule:G.enableTrendingModule,ieClass:(c.UA.ie&&c.UA.ie<10)?"ie":null,disableComments:G.disableComments,enableLDRBads:G.enableLDRBads?G.enableLDRBads:null};if(G.config.enableSidekick){if(G.config.sidekick_mods.top!==""){I.sidekickTopId=C}if(G.config.sidekick_mods.mid!==""){I.sidekickMidId=q}if(G.config.sidekick_mods.bot!==""){I.sidekickBotId=i}delete I.slideshowDesc;delete I.todayModuleId;delete I.slideshowModuleId;delete I.moreString;delete I.lessString}F=G.templates.structure(I);J=c.Node.create(F);G.nodes.shareButtonsContainer=J.one("#lb-share-btns");G.nodes.preloadContainer=J.one("#lb-preload");K=J.one("#"+z);if(K){G.nodes.commentsContainer=K.ancestor(".lb-comments")}G.nodes.meta={};G.nodes.meta.container=J.one("#lb-meta");G.nodes.viewport={};G.nodes.viewport.container=J.one("#lb-viewport");G.nodes.viewport.list=J.one("#lb-viewport-list");G.nodes.viewport.nextButtonPanel=J.one("#lb-nav-right-panel");G.nodes.viewport.prevButtonPanel=J.one("#lb-nav-left-panel");G.nodes.viewport.nextButton=J.one("#lb-btn-next");G.nodes.viewport.prevButton=J.one("#lb-btn-prev");G.nodes.viewport.title=J.one("#lb-hd > span");G.nodes.rp={};G.nodes.rp.container=J.one("#lb-rp");G.nodes.rp.embedOne=G.nodes.rp.container.one("#"+g);G.nodes.rp.embedTwo=G.nodes.rp.container.one("#"+v);G.nodes.rp.embedThree=G.nodes.rp.container.one("#"+y);G.nodes.rp.info=G.nodes.rp.container.one("#lb-info");G.nodes.rp.desc=G.nodes.rp.container.one("#lb-ss-desc");G.nodes.cp={};G.nodes.cp.container=J.one("#lb-cp");G.nodes.cp.embedSouth=G.nodes.cp.container.one("#"+B);if(D&&H){H.replace(J);E=window.setInterval(function(){if(YMedia&&YMedia.Media&&YMedia.Media.shareButtonsBuilder){window.clearInterval(E);c.Global.fire(o,{type:"content-slideshow",containerNode:G.nodes.shareButtonsContainer,moreMenuPosition:"top",moreMenuDelay:400,sec:"sh"});setTimeout(function(){G.updateSharingData()},200)}},100);G.body.removeClass("slideshow-hide-1-1");if(G.nodes.rp.desc&&G.nodes.rp.desc.get("clientHeight")<230){G.nodes.rp.info.removeClass("truncate")}G.nodes.lightboxContainer=c.one(n);G.bindResizeEvent();G.bindCloseEvents();G.bindNavigationEvents();G.bindKeyboardEvents();G.bindEndSlideLastViewClickEvents();G.bindVideoPlayEvents();G.bindToggleSlideshowTitleEvents();G.bindGoToSlideEvent();G.bindGetCurrentLightboxItemEvent();G.bindMoreCaptionEvents();c.later(100,G,function(){if(G.enableEmbedSlots){G.setupEmbedSlots()}G.fetchAd(G.config.spaceId);if(!G.disableComments){G.setupComments()}if(false===G.showSponsoredLightbox){if(G.config.enableSidekick){G.setupModule(G.config.sidekick_mods.top,C);G.setupModule(G.config.sidekick_mods.mid,q);G.setupModule(G.config.sidekick_mods.bot,i)}else{G.setupModule(G.config.todayInstanceId,f);G.setupModule(G.config.slideshowInstanceId,h)}if(G.enableTrendingModule){G.setupModule(G.config.trendingInstanceId,a)}}})}},compileTemplates:function(F){var D=this,G;D.templates={};try{if(F.metaStructure){D.templates.metaStructure=c.Handlebars.compile(F.metaStructure)}if(F.photoStructure){D.templates.photoStructure=c.Handlebars.compile(F.photoStructure)}if(F.structure){D.templates.structure=c.Handlebars.compile(F.structure)}if(F.rmxStructure){D.templates.rmxStructure=c.Handlebars.compile(F.rmxStructure)}if(F.rmxCtaStructure){D.templates.rmxCtaStructure=c.Handlebars.compile(F.rmxCtaStructure)}}catch(E){if(c&&c.Af&&c.Af.Beacon&&c.Af.Beacon.error){if(E){G=E;G.fileName="content-lightbox.js"}else{G={fileName:"content-lightbox.js",message:"compileTemplates error"}}c.Af.Beacon.error("module_content_lightbox",{method:"compileTemplates"},G)}}},calculateAdPositionOffset:function(){var E=this,D=E.currentIndex,F=0;c.Array.each(E.rmxAdIndices,function(G){if(D>G){F-=1}});return F},renderItem:function(D){var G=this,F=G.data[G.slideshowId].content.items,J=F[D],I;G.currentIndex=D;I=c.one(".lb-viewport-list li");if(F[D].isEndSlide){G.renderEndSlide(J,I);G.bindEndSlideResizeEvent()}else{if(F[D].isInterstitialAd){G.renderInterstitial(J,I);G.renderRmxAdCta(J);G.resizeViewport()}else{G.renderContentItem(J,F,I);G.resizeViewport()}}c.Global.fire("content-lightbox:item-rendered",{content:J});if(F[D].isInterstitialAd){if(!F[D].isBeaconFired){if(F[D].externalbeacons){var E=F[D].externalbeacons;if(typeof(E)==="object"&&E.length>0){for(var H=0;H<E.length;H++){G.fireBeacon(E[H])}}}else{if(F[D].externalbeacon){G.fireBeacon(F[D].externalbeacon)}}G.fireBeacon(F[D].viewbeacon,D);F[D].isBeaconFired=true}}else{if(G.enableRMXAds||G.enableNativeAds){G.removeRmxAdCta()}G.handlePageTracking(F[D],G.lightboxOpenSource,F[D].isEndSlide)}},removeNativeAd:function(D){var E=this,F;E.data[E.slideshowId].content.items.splice(D,1);for(F=0;F<E.rmxAdIndices.length;F++){if(E.rmxAdIndices[F]===D){E.rmxAdIndices.splice(F,1)}}E.currentIndex--},renderContentItem:function(L,G,J){var M=this,K=M.templates.photoStructure,F=M.currentIndex+1,I,E,D,N,H={title:(L.title!==L.caption)?L.title:(L.isIbItem?"":M.data[M.slideshowId].headline),timestamp:L.date,description:L.caption,current:F,ibItem:L.isIbItem,relatedString:M.config.strings.relatedSearchString,more:M.config.strings.moreString,less:M.config.strings.lessString,total:M.data[M.slideshowId].total,video:(L.isVideo)?{duration:L.duration}:null,tumblrAttribution:L.tumblr,isSponsored:L.isSponsored,sponsor_url:L.provider_url,provider:L.provider,attribution:L.attribution,captionToggled:M.captionToggled};if(M.config.enableSidekick){delete H.title;H.descToggled=M.descToggled;H.slideshowTitle=M.data[M.slideshowId].headline;H.slideshowDesc=(M.data[M.slideshowId].desc)?M.data[M.slideshowId].desc:null}F+=M.calculateAdPositionOffset();I=K({imgSrc:L.img&&L.img.url,imgTitle:L.title,hidePrev:M.currentIndex===0,hideNext:M.currentIndex===G.length-1,includeButtons:true,viewportHeight:M.windowViewportHeight,isVideo:L.isVideo,isTumblrVideo:L.isTumblrVideo,isEmbed:L.isEmbed,embed:L.embed,player:L.player,leftPosition:0,id:"id-"+M.currentIndex});if(L.isVideo||L.isTumblrVideo){M.nodes.viewport.container.removeClass("image-container");M.nodes.viewport.container.addClass("video-container")}else{M.nodes.viewport.container.removeClass("video-container");M.nodes.viewport.container.addClass("image-container")}M.nodes.viewport.list.append(I);if(M.currentIndex===0){M.nodes.viewport.prevButton.addClass("hidden")}else{if(M.currentIndex===G.length-1){M.nodes.viewport.nextButton.addClass("hidden")}else{M.nodes.viewport.nextButton.removeClass("hidden");M.nodes.viewport.prevButton.removeClass("hidden")}}E=M.templates.metaStructure;M.nodes.viewport.list.one("#id-"+M.currentIndex).setStyle("left",0);if(J){J.remove()}D=E(H);M.nodes.meta.container.empty();M.nodes.meta.container.prepend(D);if(M.captionToggled){if(M.config.enableSidekick){N=M.nodes.meta.container.one(".lb-meta-caption-container p").get("clientHeight");if(N<31&&N>0){M.nodes.lightboxContainer.one(".less-caption-button").addClass("hidden")}}else{N=M.nodes.meta.container.one(".lb-meta-content").get("clientHeight");if(M.captionToggled&&N<161&&N>0){M.nodes.lightboxContainer.one(".less-caption-button").addClass("hidden")}}}if(M.currentIndex===0){if(M.nodes.meta.container.one(".lb-meta-btn.lb-prev")!==null){M.nodes.meta.container.one(".lb-meta-btn.lb-prev").addClass("lb-btn-disabled")}}else{if(M.currentIndex===G.length-1){if(M.nodes.meta.container.one(".lb-meta-btn.lb-next")!==null){M.nodes.meta.container.one(".lb-meta-btn.lb-next").addClass("lb-btn-disabled")}}}if(M.titleChanged){M.titleChanged=false;M.nodes.cp.container.removeClass("lb-more-cp");if(!M.config.enableSidekick){M.nodes.viewport.title.set("innerHTML",M.data[M.slideshowId].headline)}if(M.nodes.cp.info){M.nodes.cp.info.show()}if(M.nodes.shareButtonsContainer){M.nodes.shareButtonsContainer.show()}if(M.nodes.commentsContainer){M.nodes.commentsContainer.show()}if(M.nodes.meta.container){M.nodes.meta.container.show()}}if(M.refreshTimer){M.refreshTimer.cancel()}M.refreshTimer=c.later(300,M,function(){if(M.comments&&M.comments.nodes.list){M.comments.refreshWithContextID(L.uuid)}M.updateSharingData()});M.preloadItems(M.currentIndex)},preloadItems:function(D){var F=this,E=F.data[F.slideshowId].content.items,I=E.length,J=F.nodes.preloadContainer,H,K=D-e,G=D+e;while(K<=G){if(K>=0&&K<=I-1&&!E[K].isPreloaded&&E[K].img&&E[K].img.url){E[K].isPreloaded=true;H=F.templates.photoStructure({imgSrc:E[K].img.url,viewportHeight:1,leftPosition:0});J.append(H)}K+=1}},prefetchVideos:function(F){var M=this,G=M.data[M.slideshowId].content.playlist||"",E=0,J=0,I,D,K,L,H,N=[];if(M.config.enableVideoPrefetch!==1||G===""){return}L=G.length;if(typeof F==="undefined"||F===null){while(E<L&&N.length<u){if(G[E].player_type==="yep"){if(!G[E].isPreloaded){G[E].isPreloaded=true;N.push(G[E])}}E+=1}c.fire(j,{collectionId:M.slideshowId,playlist:N})}else{D=M.data[M.slideshowId].content.items[M.currentIndex].isVideo;if(D){I=M.data[M.slideshowId].content.items[M.currentIndex].uuid;K=c.Array.find(G,function(O){if(O.id===I){return true}return false},M);if(!K){return}H=c.Array.indexOf(G,K);E=H;while(E<L&&N.length<u){if(G[E].player_type==="yep"){if(!G[E].isPreloaded){G[E].isPreloaded=true;N.push(G[E])}else{J++;if(J>=s){return}}}E+=1}c.fire(j,{collectionId:M.slideshowId,playlist:N})}}},bindMoreCaptionEvents:function(){var D=this;D.detachableHandles.push(D.nodes.meta.container.delegate("click",D.handleMoreCaptionClick,".more-caption-button, .less-caption-button",D))},handleMoreCaptionClick:function(J){var E=this,G,I,D,H=J.currentTarget,F;if(E.config.enableSidekick){F=H.ancestor(".lb-meta-caption-container")}else{F=H.ancestor(".lb-meta-cp")}if(F){D=E.nodes.lightboxContainer.one(".less-caption-button");I=E.nodes.lightboxContainer.one(".more-caption-button");if(H.hasClass("more-caption-button")){F.removeClass("truncate");D.removeClass("hidden");I.addClass("hidden");G=E.getRapidTrackingData("toggle_img_caption_more");E.chrome.beaconClick(G,E.config.modId);E.captionToggled=true}else{if(H.hasClass("less-caption-button")){F.addClass("truncate");I.removeClass("hidden");D.addClass("hidden");G=E.getRapidTrackingData("toggle_img_caption_less");E.chrome.beaconClick(G,E.config.modId);E.captionToggled=null}}}},bindToggleSlideshowTitleEvents:function(){var D=this;if(D.config.enableSidekick){D.detachableHandles.push(D.nodes.lightboxContainer.delegate("click",D.handleSlideshowTitleClick,".more-desc-button, .less-desc-button",D))}else{D.detachableHandles.push(D.nodes.lightboxContainer.delegate("click",D.handleSlideshowTitleClick,".more-ss-desc-button, .less-ss-desc-button",D))}},handleSlideshowTitleClick:function(G){var L=this,H=G.currentTarget,I,D,J,K,E,F;if(L.config.enableSidekick){F=H.ancestor(".lb-meta-desc-container");J="more-desc-button";E="less-desc-button"}else{F=H.ancestor(".lb-info");J="more-ss-desc-button";E="less-ss-desc-button"}if(F){K=L.nodes.lightboxContainer.one("."+E);D=L.nodes.lightboxContainer.one("."+J);if(H.hasClass(J)){F.removeClass("truncate");K.removeClass("hidden");D.addClass("hidden");I=L.getRapidTrackingData("toggle_ss_caption_more");L.chrome.beaconClick(I,L.config.modId);L.descToggled=true}else{if(H.hasClass(E)){F.addClass("truncate");K.addClass("hidden");D.removeClass("hidden");I=L.getRapidTrackingData("toggle_ss_caption_less");L.chrome.beaconClick(I,L.config.modId);L.descToggled=null}}}},bindGoToSlideEvent:function(){var D=this;c.Global.on("content-lightbox:go-to-slide",function(F){var G,E;D.curSelectedId=F.id;D.target=null;E=D.findSelectedPhoto();G=D.getRapidTrackingData("nav_thumb",E);D.chrome.beaconClick(G,D.config.modId);if(E!==null){D.renderItem(E)}if(c.Media.adController.isEventBasedRotation()){c.Media.adController.refreshAd()}D.nodes.lightboxContainer.set("scrollTop",0)},D)},bindGetCurrentLightboxItemEvent:function(){var D=this;c.Global.on("content-lightbox:get-current-item",function(){var G=D.slideshowId,E=D.currentIndex,F;if(G&&D.data[G]&&D.data[G].content&&D.data[G].content.items){F=D.data[G].content.items[E]}c.Global.fire("content-lightbox:current-item",{content:F})},D)},bindNavigationEvents:function(){var D=this;D.detachableHandles.push(D.nodes.viewport.container.delegate("click",D.handleNavigationClick,".lb-nav-left-panel,.lb-nav-right-panel",D));D.detachableHandles.push(D.nodes.lightboxContainer.delegate("click",D.handleNavigationClick,".lb-meta-btn",D))},handleNavigationClick:function(G){var D=this,F,E="img";if(G.currentTarget.hasClass("lb-video-thumbnail")){D.handleVideoPlayClick();return}else{if(G.currentTarget.hasClass("lb-meta-btn")){F=G.currentTarget.hasClass("lb-prev")?"prev":"next";E="desc"}else{if(G.currentTarget.hasClass("lb-nav-right-panel")){F="next"}else{if(G.currentTarget.hasClass("lb-nav-left-panel")){F="prev"}else{if(D.data[D.slideshowId].content.items[D.currentIndex].isInterstitialAd){return}F="next"}}}}D.handleNavigation(G,F,E)},bindKeyboardEvents:function(){var D=this;D.detachableHandles.push(c.one("document").on("keydown",function(E){switch(E.keyCode){case 37:D.handleNavigation(E,"prev","keyboard");break;case 39:D.handleNavigation(E,"next","keyboard");break;case 27:D.prepareToCloseLightbox(E);break;default:break}}))},handleNavigation:function(H,L,E){var M=this,F,I,J="nav_img_",K=M.data[M.slideshowId].content.items,D=K.length,G=("prev"===L)?M.currentIndex-1:M.currentIndex+1;if(e===2){e=5}if(G>=0&&G<K.length){J="nav_"+E+"_"+L;if(K[G].isInterstitialAd&&K[G].interstitialSource==="rmx"){F={paid:K[G].uuid,pad:"1"}}I=M.getRapidTrackingData(J,G,F);if(E==="keyboard"){M.chrome.beaconClick(I,M.config.modId)}else{M.chrome.beaconClick(I,M.config.modId)}if(M.data[M.slideshowId].content.items[M.currentIndex].isEndSlide){if(M.nodes.rp.info){M.nodes.rp.info.show()}}M.nodes.viewport.container.one(".lb-nav-right-panel").removeClass("hidden");M.renderItem(G);if(!K[M.currentIndex].isInterstitialAd){if(c.Media.adController.isEventBasedRotation()){c.Media.adController.refreshAd()}}else{M.toggleAdDisplay([p,w,x,t],"hide");M.removeNativeAd(M.currentIndex)}if(!M.allLoaded&&G>=M.fetchMoreIndex){M.fetchMoreIndex+=b;c.later(100,M,function(){D+=M.calculateAdPositionOffset();M.getSlideshowData(D,b,0,{additionalData:true})})}}},resizeViewport:function(){var H=this,F=window.innerWidth||document.documentElement.clientWidth,I=H.nodes.rp.container;if(H.config.enableSidekick&&I){if(F<1020){I.addClass("D-n")}else{I.removeClass("D-n")}}var D=H.nodes.viewport.container,J=parseInt(D.getComputedStyle("width"),10),E=J*4/6,G=D.one("img");H.windowViewportHeight=E;H.nodes.viewport.container.setStyles({height:E+"px",lineHeight:E+"px"});if(G){G.setStyle("maxHeight",E+"px");G.setStyle("maxWidth",E*1.5+"px")}},bindResizeEvent:function(){var D=this;D.detachableHandles.push(D.viewport.on("resize",D.resizeViewport,D))},fetchAd:function(I){var K=this,D=[],J=K.config.enableViewportRotation==="1",F=parseInt(K.config.enableViewportRotationDuration,10),E=K.config.overrideViewportRotationSpaceid||"",H=K.config.enableTimeBasedRotation==="1",L=parseInt(K.config.timeBasedRotationInterval,10),M={enableViewportRotation:J,viewportRotationDuration:F,enableTimeBasedRotation:H,timeBasedRotationInterval:L};D.push("LREC-1","LREC2-1");if(K.enableLDRBads){D.push("LDRB-1")}if(K.enableFilmAd){D.push("FILM-1")}try{if(J){if(E&&E!==""){c.log("spaceid is overridden to "+E);I=E}}if(c.Media.adController._isDarlaReady()){c.Media.adController.fetchAd(D,I,M)}else{c.Global.on("darla:ready",function(){c.Media.adController.fetchAd(D,I,M)})}}catch(G){c.log("Y.Media.adController.fetchAd failed","error")}},toggleAdDisplay:function(J,I){var F=this,H=F.nodes.lightboxContainer,D=J.length,G,E;for(G=0;G<D;G++){E=H.one(J[G]);if(E){if(I==="hide"){E.hide()}else{E.show()}}}},updateSharingData:function(){var M=this,F=M.data,G=M.currentIndex,J={},I,K,E,H,D,L;if(!(F&&F[M.slideshowId].content&&F[M.slideshowId].content.items)){return}I=F[M.slideshowId].content.items,K=I[G].title||document.title,E=M.isSlideshow?I[G].url||M.getEmbedImageAnchor()||M.slideshowUrl:M.data[M.slideshowId].slideshowUrl,H=I[G].caption||"",D=I[G].uuid||"",L=(I[G].img)?I[G].img.url:"";if(E){J={uuid:D,url:E,title:K,desc:H,img:L};c.Global.fire(r,J)}M.updateUrl(E)},updateUrl:function(D){if(window&&window.history&&typeof window.history.replaceState!=="undefined"){window.history.replaceState({},"",D)}},getEndSlideSharingData:function(){var D=this,E=D.data[D.slideshowId].slideshowUrl,J=D.data[D.slideshowId].desc||"",G=D.slideshowId||"",F=D.data[D.slideshowId].coverPhotoURL||"",I=D.data[D.slideshowId].headline||"",H={};H={uuid:G,url:E,title:I,desc:J,img:F};return H},setupComments:function(){var D=this,F=c.clone(c.Media.pageContentCommentsDefaultConfig,true),E=(D.data[D.slideshowId])?D.data[D.slideshowId].content.items[D.currentIndex].uuid:D.slideshowId;if(D.commentLightbox){E=YUI.Media.CONTENT_ID||D.slideshowId}if(!F){return}F.config.modId=z;F.config.contentId=E;F.config.location="lightbox";F.config.enableCollapsedComment=0;D.comments=new c.Media.ContentComments(F);D.comments.displayModule(null);D.addModToRapid(z)},setupModule:function(E,F){var D=this;if(E&&E!==""){c.Media.RMP.load({srcNode:"#"+F,timeout:D.config.rmpModuleTimeout,continueOnError:true,params:{m_id:"MediaRemoteInstance",instance_id:E,nolz:"1",disable_ad_replacement:D.config.isSponsored},onComplete:function(){if(YMedia&&YMedia.rapid){setTimeout(function(){D.addModToRapid(F)},100)}}})}},tearDown:function(E){var D=this,F=D.comments;if(E){D.nodes={};if(F){D.comments=null}c.Array.each(D.detachableHandles,function(G){G.detach()},D);D.detachableHandles=[]}D.curSelectedId=null;D.isSlideshow=true;D.slideshowId=null;D.slideshowUrl=null;D.redir_href=null;D.allLoaded=null;D.loadAll=null;D.target=null;D.captionToggled=null;D.fetchedBatch=0;D.descToggled=null},bindCloseEvents:function(){var D=this,E=D.nodes.lightboxContainer.one(".close-btn");D.detachableHandles.push(D.nodes.lightboxContainer.on("click",D.prepareToCloseLightbox,D));if(E){D.detachableHandles.push(E.on("click",D.prepareToCloseLightbox,D))}},prepareToCloseLightbox:function(E){var D=this,F=D.chrome.getRapidConfInit();if(E.currentTarget!==E.target&&(E.type!=="keydown"&&E.keyCode!==27)){return}D.chrome.beaconClick(D.getRapidTrackingData("close_lgtbx"),D.config.modId);D.closeLightbox(E);c.Global.fire("beacon-manager:comscore-pageview",{force:true});c.Global.fire("content:reveal",{config:F})},closeLightbox:function(H){var D=this,E=c.one("html"),G=(D.nodes&&D.nodes.lightboxContainer)||null,F=D.redir_href;if(G){G.remove();if(E){E.removeClass("noscroll")}D.tearDown(true);if(H&&c.UA.ie&&c.UA.ie<10&&F){window.location=F;H.halt()}}if(typeof adsGlobalObj!=="undefined"&&adsGlobalObj instanceof Array){if(adsGlobalObj.LREC!==undefined){adsGlobalObj.LREC.selector="#yom-ad-LREC"}if(adsGlobalObj.LREC2!==undefined){adsGlobalObj.LREC2.selector="#yom-ad-LREC2"}}},bindVideoPlayEvents:function(){var D=this;D.detachableHandles.push(D.nodes.lightboxContainer.delegate("click",D.handleVideoPlayClick,".lb-video-cta",D))},handleVideoPlayClick:function(){var D=this,I=D.data[D.slideshowId].content.items[D.currentIndex].uuid,J="lb-video-container",F=D.nodes.viewport.container.one("#"+J),H=D.nodes.viewport.container.one(".lb-video-cta"),G=D.nodes.viewport.container.one("img"),E=D.data[D.slideshowId].content.playlist||"";if(F&&I){F.removeClass("hidden");H.remove(true);G.remove(true);c.fire(k,{id:I,containerId:J,collectionId:D.slideshowId,usePrefetch:D.config.enableVideoPrefetch===1,playlist:E})}},setupRemoteModule:function(H,F){var E=this,J=E.chrome&&E.chrome.getContentId(),D,G;if(B===F){G=E.nodes.cp.container.one("#"+F)}else{G=E.nodes.rp.container.one("#"+F)}if(H&&H.m_id){G.removeClass("hidden");if("td-applet-"===H.m_id.substring(0,10)){D={type:H.m_id,uri:E.config.tdRmpUri,params:H,placement:{node:"#"+F,where:"replace"}};if(c.Af&&c.Af.Content&&YMedia.hasOwnProperty("ApeApp")){c.Af.Content.remoteApplet(YMedia.ApeApp,D,function I(K){c.log(K)})}else{YMedia.after("appletsinit",function(K){c.Af.Content.remoteApplet(K.applets,D,function L(M){c.log(M)})})}}else{H.content_id=J;if(c.Media&&c.Media.RMP){c.Media.RMP.load({srcNode:"#"+F,timeout:E.config.rmpModuleTimeout,continueOnError:true,params:H})}}}},setupEmbedSlots:function(){var D=this;if(!(D.config&&D.config.embed_slots)){return}this.setupRemoteModule(D.config.embed_slots.one,g);this.setupRemoteModule(D.config.embed_slots.two,v);this.setupRemoteModule(D.config.embed_slots.three,y);this.setupRemoteModule(D.config.embed_slots.south,B)},handlePageTracking:function(H,I,F){var O=this,N=null,J=true,M=true,E,L,P,G,K,D=null;if(!H){return}E=O.chrome.getContentId()||null;P=H.id||H.uuid||null;G=(H.isIbItem===true)?"4":"";L=H.title||null;K=O.pagePD?"_"+O.pagePD:"";N={id:E,paid:P,title:L,type:d.type,pt:d.pt,pct:d.pct,pst:G,pd:F?"lghtbx-end":"lghtbx"+K,provider:H.provider,revshare:H.revshare,spaceid:O.config.spaceId};D=YMedia&&YMedia.rapid&&YMedia.rapid.rapidConfig;switch(I){case 0:O.chrome.sendComscoreBeacon(N);break;case 1:O.chrome.logPageView(N,J,M,D);break;case 2:O.chrome.logPageView(N,J,M,D);break;default:O.chrome.logPageView(N,J,M,D)}O.lightboxOpenSource=null},getEmbedImageAnchor:function(){var E=this,D=E.currentIndex,F=E.data[E.slideshowId].content.items[D];if(F.coverId){return((window.location.hash)?window.location.href.replace(window.location.hash,""):window.location.href)+"#"+F.coverId}return null},getRapidTrackingData:function(E,D,G){var F=this,H;if(!E){return""}H={outcome:this.actionDataMap[E].outcome||"",sec:"sshow",linkname:this.actionDataMap[E].slk||"",name:this.actionDataMap[E].name||"",keys:{t2:"sshow",tar:window.location.hostname,g:F.chrome.getContentId()||"",rspns:this.actionDataMap[E].rspns,t1:this.actionDataMap[E].t1,t3:this.actionDataMap[E].t3,t4:this.actionDataMap[E].t4||"",t8:F.ibSlideshowTotal||0,t9:F.slideshowTotal,elm:this.actionDataMap[E].elm||"",elmt:this.actionDataMap[E].elmt||"",itc:this.actionDataMap[E].itc||"0",aid:(this.actionDataMap[E].rspns==="nav"&&D)?F.data[F.slideshowId].content.items[D].uuid:F.data[F.slideshowId].content.items[F.currentIndex].uuid,cpos:(this.actionDataMap[E].rspns==="nav"&&D)?D+1:F.currentIndex+1}};if(G){c.Object.each(G,function(J,I){H.keys[I]=J})}if(F.commentLightbox){H.sec="cmmt";H.linkname="";H.outcome="open";H.keys={ltxt:"view",itc:"1",cf:"all-pop"}}return H},refreshLinkTrackMods:function(){var F,E,D;if(YMedia&&YMedia.rapid&&YMedia.rapid.rapidConfig){F=YMedia.rapid.rapidConfig.tracked_mods;YMedia.rapid.rapidConfig.tracked_mods=[];if(F.length){for(E=0,D=F.length;E<D;E++){YMedia.rapid.removeModule(F[E])}}}},addModToRapid:function(D){if(YMedia&&YMedia.rapid&&YMedia.rapid.rapidConfig&&YMedia.rapid.rapidConfig.tracked_mods){if(!YMedia.rapid.isModuleTracked(D)){YMedia.rapid.rapidConfig.tracked_mods.push(D);YMedia.rapid.addModules(D)}}},actionDataMap:{open_lgtbx_automatic:{rspns:"xpnd",t1:"a3",t3:"auto",slk:"expand",itc:"1"},open_lgtbx_lead:{rspns:"xpnd",t1:"a3",t3:"tp",slk:"expand",elm:"img",elmt:"ct",itc:"0"},open_lgtbx_lead_thumb:{outcome:"pgnt",rspns:"xpnd",t1:"a3",t3:"tp",slk:"expand",elm:"tl",elmt:"ct",itc:"0"},open_lgtbx_embed:{outcome:"pgnt",rspns:"xpnd",t1:"a3",t3:"embd",slk:"expand",elm:"img",elmt:"ct",itc:"0"},open_lgtbx_embed_thumb:{outcome:"pgnt",rspns:"xpnd",t1:"a3",t3:"embd",slk:"expand",elm:"tl",elmt:"ct",itc:"0"},close_lgtbx:{outcome:"pgnt",rspns:"clps",t1:"a0",t3:"full",slk:"cl",elm:"btn",elmt:"cl",itc:"0"},nav_img_next:{outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",t4:"img",slk:"ne",elm:"btn",elmt:"ne",itc:"0"},nav_img_prev:{outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",t4:"img",slk:"pv",elm:"btn",elmt:"pr",itc:"0"},nav_desc_next:{outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",t4:"desc",slk:"ne",elm:"btn",elmt:"ne",itc:"0"},nav_desc_prev:{outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",t4:"desc",slk:"pv",elm:"btn",elmt:"pr",itc:"0"},nav_keyboard_next:{name:"key",outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",slk:"ne",elm:"key",elmt:"ne",itc:"0"},nav_keyboard_prev:{name:"key",outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",slk:"pv",elm:"key",elmt:"pr",itc:"0"},nav_thumb:{outcome:"pgnt",rspns:"nav",t1:"a0",t3:"full",slk:"thumb",elm:"tl",elmt:"ct",itc:"0"},toggle_img_caption_more:{rspns:"xpnd",t1:"a0",t3:"full",t4:"desc",slk:"mr",elm:"itm",elmt:"mr",itc:"1"},toggle_img_caption_less:{rspns:"xpnd",t1:"a0",t3:"full",t4:"desc",slk:"ls",elm:"itm",elmt:"ls",itc:"1"},toggle_ss_caption_more:{rspns:"xpnd",t1:"a0",t3:"full",t4:"rr",slk:"mr",elm:"itm",elmt:"mr",itc:"1"},toggle_ss_caption_less:{rspns:"xpnd",t1:"a0",t3:"full",t4:"rr",slk:"ls",elm:"itm",elmt:"ls",itc:"1"},click_endslide_thumb:{rspns:"nav",t1:"a0",t3:"full",t4:"end",slk:"",elm:"itm",elmt:"ct",itc:"0"}}})},"0.0.1",{requires:["node-base","json-parse","node-event-simulate","media-ad-controller","jsonp","handlebars","af-content","app","af-applets","af-rapid"]});
/* content-lightbox-ib.js ced7535 */ YUI.add("media-content-lightbox-ib",function(a){a.namespace("Media");if(a.Media&&a.Media.ContentLightbox){a.mix(a.Media.ContentLightbox,{fetchIbItems:function(f){var c=this,b=f.content.items,e=f.headline||"",d=[];a.Array.each(b,function(g){if(g.uuid){d.push(g.uuid)}});c.getXhr({api:"/_xhr/content-lightbox-infinitebrowse/",data:{count:c.fetchIBCount,image_threshold:c.IBImageThreshold,video_threshold:c.IBVideoThreshold,metalen10_filter:c.IBMetalen10_filter,content_id:c.chrome.getContentId(),mtype:c.IBmtype,existing_ids:d?(d.join(",")):"",content_title:e},success:c.handleIbSuccess,failure:c.handleIbFailure,args:{self:c,dataOnPage:f}})},handleIbSuccess:function(h,g,d){var c=d.self,b=(g.responseText)?a.JSON.parse(g.responseText):null,f=b?b.responseData:null,e=d.dataOnPage;if(f){e.content.items=(e.content.items)?e.content.items.concat(f.content.items):f.content.items;e.content.playlist=(e.content.playlist)?e.content.playlist.concat(f.content.playlist):f.content.playlist;e.total+=f.total;e.itemCount=e.total;c.ibSlideshowTotal=f.total}c.processLightboxData(e,false)},handleIbFailure:function(f,e,c){var b=c.self,d=c.dataOnPage;b.processLightboxData(d,false)}},false,null,4,false)}},"0.0.1",{requires:["base","node-base","event-base","event-custom","io-base","json-parse"]});
/* content-lightbox-endslide.js ced7535 */ YUI.add("media-content-lightbox-endslide",function(a){a.namespace("Media");if(a.Media&&a.Media.ContentLightbox){a.mix(a.Media.ContentLightbox,{fetchEndSlide:function(){var b=this,f=b.config.mostPopularEndPoint||"/_xhr/content-slideshow-endslide-mostpopular/",e=b.config.relatedEndPoint||"/_xhr/content-slideshow-endslide-related/",d={device:b.config.device,contentLightbox:1,position:b.data[b.slideshowId].content.items.length},c;if(!b.enableEndSlideMP&&!b.enableEndSlideRel){return}if(b.enableEndSlideRel&&b.slideshowId){c=e;d.content_id=b.slideshowId}if(b.endSlideImgRatio){d.endSlideImgRatio=b.endSlideImgRatio}if(b.endSlideImgWidth){d.endSlideImgWidth=b.endSlideImgWidth}if(b.data[b.slideshowId].coverPhotoURL){d.lastViewedCoverPhotoUrl=b.data[b.slideshowId].coverPhotoURL}if(b.data[b.slideshowId].url){d.lastViewedSlideshowUrl=b.data[b.slideshowId].url}if(b.data[b.slideshowId].headline){d.lastViewedSlideshowTitle=b.data[b.slideshowId].headline}if(b.slideshowId){d.lastViewedSlideshowId=b.slideshowId}if(b.enableEndSlideMP){c=f}b.getXhr({api:c,data:d,context:b,success:b.fetchEndSlideSuccess})},fetchEndSlideSuccess:function(g,f){var d=this,c=(f.responseText)?a.JSON.parse(f.responseText):null,b=d.data[d.slideshowId].content.items,e=c?c.responseData:null;if(e&&e.body){e.isEndSlide=true;e.uuid="lb-endslide";b[b.length]=e;d.nodes.preloadContainer.append(e.body)}},renderEndSlide:function(f,e){var d=this,b,c;d.nodes.cp.container.addClass("lb-more-cp");b=a.Node.create(f.body);b.setAttribute("id","id-"+d.currentIndex);d.nodes.endSlideNode=b;d.handleEndSlideGalleryResize();d.nodes.viewport.list.append(b);if(e){e.remove()}d.nodes.viewport.list.one(".lb-more").all(".lb-item-img-container img").on("load",function(){var h,i,g=150;h=d.nodes.viewport.list.all(".lb-item")._nodes;i=h.length;g+=h[i-1].offsetTop;d.nodes.viewport.container.setStyles({height:g+"px"})});d.nodes.viewport.container.one(".lb-nav-right-panel").addClass("hidden");d.nodes.viewport.prevButton.removeClass("hidden");if(d.nodes.cp.info){d.nodes.cp.info.hide()}if(d.nodes.rp.info){d.nodes.rp.info.hide()}if(d.nodes.shareButtonsContainer){d.nodes.shareButtonsContainer.hide()}if(d.nodes.commentsContainer){d.nodes.commentsContainer.hide()}d.nodes.meta.container.hide();d.nodes.endSlideShareNode=d.nodes.cp.container.one("#endslide-share-btns");d.addModToRapid(d.endslideModId);c=window.setInterval(function(){if(YMedia&&YMedia.Media&&YMedia.Media.shareButtonsBuilder&&d.nodes.endSlideShareNode){window.clearInterval(c);var g=d.getEndSlideSharingData();if(g&&g.url){a.Global.fire("content:insert-share-panel",{type:"content-endslide",containerNode:d.nodes.endSlideShareNode,moreMenuPosition:"top",moreMenuDelay:400,sec:"sh",shareData:g});d.nodes.endSlideShareNode.show()}}},100);if(!d.config.enableSidekick){d.nodes.viewport.title.set("innerHTML",f.title)}d.titleChanged=true},bindEndSlideResizeEvent:function(){var b=this;b.detachableHandles.push(b.viewport.on("endslide|resize",b.handleEndSlideGalleryResize,b))},handleEndSlideGalleryResize:function(){var d=this,b=d.nodes.cp.container,e=parseInt(b.getComputedStyle("width"),10)-80,c=(e<810)?115:(e-144)/7;d.nodes.endSlideNode.all("img").setStyle("maxHeight",c+"px");d.nodes.endSlideNode.one(".lb-more").setStyle("width",e+"px")},bindEndSlideLastViewClickEvents:function(){var b=this,c;c=b.nodes.lightboxContainer.delegate("click",b.handleEndSlideLastViewedClick,".lb-endslide-lastviewed",b);b.detachableHandles.push(c)},handleEndSlideLastViewedClick:function(f){var b=this,c=f.currentTarget,d;f.halt();b.nodes.viewport.container.one(".lb-nav-right-panel").removeClass("hidden");if(b.nodes.rp.info){b.nodes.rp.info.show()}d=b.getRapidTrackingData("click_endslide_thumb");d.linkname=c.one("span.lb-item-title").getContent();b.chrome.beaconClick(d,b.config.modId);b.renderItem(0);a.Media.adController.refreshAd()}},false,null,4,false)}},"0.0.1",{requires:["base","node-base","event-base","event-custom","io-base","json-parse"]});
/* content-lightbox-rmx.js 6728742 */ YUI.add("media-content-lightbox-rmx",function(d){var c=".lb-lrec",a="#rmx-ad-cta-box",b="#rmx-ad-cta";d.namespace("Media");if(d.Media&&d.Media.ContentLightbox){d.mix(d.Media.ContentLightbox,{getInterstitial:function(){var e=this;if(!e.enableRMXAds&&!e.enableNativeAds){return}if(e.enableNativeAds){e.getNativeAds()}if(e.enableRMXAds){e.getRmxAds()}},getNativeAds:function(){var g=this,f="STRMI",j=g.config.spaceId,i="media",h=g.getDarlaEventId(),e=null;if(typeof DARLA_CONFIG!=="undefined"){e=h&&DARLA_CONFIG.events[h].sa}g.getXhr({api:"/_xhr/native-ad/",data:{spaceid:j,property:i,position:f,maxheight:g.rmxMaxHeight,maxwidth:g.rmxMaxWidth,site_attribute:e},success:g.handleNativeSuccess,failure:g.handleRmxFailure,args:{self:g}})},getRmxAds:function(){var f=this,g="",h=window.location.href,e=Math.min(f.calcNumOfAdsNeeded(),f.rmxAdsToFetchMax);if(window.YMEDIA_REQ_ATTR&&window.YMEDIA_REQ_ATTR.instr&&window.YMEDIA_REQ_ATTR.instr.request_id){g=window.YMEDIA_REQ_ATTR.instr.request_id}f.getXhr({api:"/_xhr/rmx-ad/",data:{rmx_count:e,rmx_se:f.rmxAdsSectionId,rmx_cc:f.strm_cc,ri:g,rmx_pu:h,spaceid:f.config.spaceId,maxheight:f.rmxMaxHeight,maxwidth:f.rmxMaxWidth},success:f.handleRmxSuccess,failure:f.handleRmxFailure,args:{self:f}})},getDarlaEventId:function(){var e;if(typeof DARLA_CONFIG!=="undefined"){for(e in DARLA_CONFIG.events){if(DARLA_CONFIG.events.hasOwnProperty(e)){return e}}}return},calcNumOfAdsNeeded:function(){var e=this,f=e.slideshowTotal-1,g=f-e.rmxFirstIndexLoad;if(g<0){return 0}return Math.floor(g/e.rmxAdLoadInterval)+1},handleNativeSuccess:function(l,k,h){var g=h.self,f=g.data[g.slideshowId].content.items,j=g.rmxFirstIndexLoad+Math.ceil(g.currentIndex/g.rmxAdLoadInterval)*g.rmxAdLoadInterval,e=(k.responseText)?d.JSON.parse(k.responseText):null,i;if(g.data[g.slideshowId].interstitialSource&&g.data[g.slideshowId].interstitialSource!=="native"){return}if(!e||!e.STRMI||!e.STRMI.tag||!e.STRMI.tag.hqImage){d.log("no response for STRMI ad");if(g.data[g.slideshowId].interstitialSource){g.data[g.slideshowId].interstitialSource="rmx";g.insertRmxAd()}if(e&&e.STRMI&&e.STRMI.tag&&e.STRMI.tag.beacon){g.fireBeacon(e.STRMI.tag.beacon)}return}g.rmxAdIndices=typeof(g.rmxAdIndices)==="undefined"?[]:g.rmxAdIndices;i=e.STRMI.tag;if(j<=f.length){g.rmxAdIndices.push(j);f.splice(j,0,{viewbeacon:i.beacon,externalbeacon:i.thirdparty_beacon,title:i.headline,desc:i.summary,img:i.hqImage,source:i.source,clickurl:i.clickUrl,brandimage:i.image,brandimagewidth:i.imageWidth,brandimageheight:i.imageHeight,isBeaconFired:false,isInterstitialAd:true});j+=g.rmxAdLoadInterval+1}g.data[g.slideshowId].interstitialSource="native"},handleRmxSuccess:function(i,h,g){var f=g.self,e=(h.responseText)?d.JSON.parse(h.responseText):null;if(!e||!e.ads||e.ads.length<=0){if(e&&e.error){d.log("rmx ad fetch returned with error")}return}f.rmxResponse=e;d.later(f.nativeAdsThreshold,f,f.insertRmxAd)},insertRmxAd:function(){var g=this,f=g.data[g.slideshowId].content.items,e=g.rmxResponse,h=g.rmxFirstIndexLoad+Math.ceil(g.currentIndex/g.rmxAdLoadInterval)*g.rmxAdLoadInterval;if(!e||!e.ads||e.ads.length<=0){return}if(g.data[g.slideshowId].interstitialSource&&g.data[g.slideshowId].interstitialSource!=="rmx"){return}g.rmxAdIndices=typeof(g.rmxAdIndices)==="undefined"?[]:g.rmxAdIndices;d.Array.each(e.ads,function(j){var i=this,k;if(!j.tag||!j.tag.image||h>f.length){return}k=j.tag;i.rmxAdIndices.push(h);f.splice(h,0,{uuid:j.creativeId,viewbeacon:j.beacon,externalbeacon:k.imprTrackingUrl,externalbeacons:k.imprTrackingUrls,title:k.headline,desc:k.summary,img:k.image,source:k.source,clickurl:k.clickUrl,feedbackUrl:k.ad_feedback_beacon,brandimage:k.brand_image,brandimagewidth:k.imageWidth,brandimageheight:k.imageHeight,isBeaconFired:false,isInterstitialAd:true});h+=i.rmxAdLoadInterval+1},g);g.data[g.slideshowId].content.items=f;g.data[g.slideshowId].interstitialSource="rmx";d.log("rmx ad fetch sucess")},handleRmxFailure:function(g,f){var e=f.response||f.responseText;d.log("RMX Ad fetch failed: "+f.status);d.log("RMX Ad fetch response: "+e)},renderInterstitial:function(i,g){var f=this,k=f.templates.rmxStructure,e,l,h=f.templates.metaStructure;if(f.data[f.slideshowId].interstitialSource==="native"){f.getNativeAds()}e=k({id:"id-"+f.currentIndex,url:i.clickurl,imgSrc:i.img.url,viewportHeight:f.windowViewportHeight});f.nodes.viewport.list.append(e);if(g){g.remove()}l=h({ad:{adTitle:i.title,adSource:i.source,adUrl:i.clickurl},description:i.desc,total:f.data[f.slideshowId].total,feedbackUrl:i.feedbackUrl});f.nodes.meta.container.empty();f.nodes.meta.container.prepend(l);f.nodes.meta.container.one(".lb-meta-count").setStyle("visibility","hidden");f.titleChanged=true;if(f.nodes.shareButtonsContainer){f.nodes.shareButtonsContainer.hide()}if(f.nodes.commentsContainer){f.nodes.commentsContainer.hide()}if(d.Ads.Feedback&&d.Ads.Feedback.insertFeedbackMarkup&&d.Ads.Feedback.insertAdClose){var j=f.nodes.meta.container.one(".lb-meta-cp");if(j&&d.Ads.Feedback.insertFeedbackMarkup(j)){d.Ads.Feedback.insertAdClose(j)}}f.preloadItems(f.currentIndex)},renderRmxAdCta:function(h){var f=this,g=f.nodes.rp.container,j=g.one(c),i=f.templates.rmxCtaStructure,e;if(!j){return}f.nodes.lightboxContainer.one(".lb-content").addClass("no-title");e=i({clickurl:h.clickurl,source:h.source,brandimage:h.brandimage,brandimagewidth:h.brandimagewidth,brandimageheight:h.brandimageheight});j.insert(e,"before");f.resizeRmxAdCta()},resizeRmxAdCta:function(){var r=this,f=r.nodes.viewport.container,h=r.nodes.rp.container,p,q,e,j,l,m,s,i,o,k,n,g;p=f._node.offsetTop;q=f._node.offsetHeight;e=p+q;j=h.one(a);l=j._node.offsetTop;m=j._node.offsetWidth;i=j.one(b);o=i._node.offsetWidth;k=i._node.offsetHeight;s=e-l;if(s<k){s=k}j.setStyle("height",s+"px");n=Math.floor(s/2)-Math.floor(k/2);g=Math.floor(m/2)-Math.floor(o/2);i.setStyle("top",n);i.setStyle("left",g)},removeRmxAdCta:function(){var f=this,g=f.nodes.rp.container,e=g.one(a);f.nodes.lightboxContainer.one(".lb-content").removeClass("rmx-ad");if(e){g.removeChild(e)}},fireBeacon:function(g,f){var e;if(!g||typeof g!=="string"){d.log("invalid url");return}g=g.replace("$(AD_POSN)",f);e=new Image();e.src=g},bindRmxAdClickEvents:function(){var e=this;e.detachableHandles.push(e.nodes.viewport.container.delegate("click",e.handleRmxAdImageClick,".lb-img",e));e.detachableHandles.push(e.nodes.meta.container.delegate("click",e.handleRmxAdTitleClick,".lb-meta-title a:first-child",e));e.detachableHandles.push(e.nodes.meta.container.delegate("click",e.handleRmxAdMarkerClick,".lb-meta-title .lb-adlink",e));e.detachableHandles.push(e.nodes.meta.container.delegate("click",e.handleRmxAdAdvertiserClick,".lb-ad-source a",e));e.detachableHandles.push(e.nodes.rp.container.delegate("click",e.handleRmxAdCtaClick,"#rmx-ad-cta-box a",e))},handleRmxAdImageClick:function(){var e=this;if(e.data[e.slideshowId].content.items[e.currentIndex].interstitialSource==="rmx"){e.triggerRapidBeacon("click_rmxad_image")}},handleRmxAdTitleClick:function(){var e=this;if(e.data[e.slideshowId].content.items[e.currentIndex].interstitialSource==="rmx"){e.triggerRapidBeacon("click_rmxad_title")}},handleRmxAdMarkerClick:function(){this.triggerRapidBeacon("click_rmxad_marker")},handleRmxAdAdvertiserClick:function(){this.triggerRapidBeacon("click_rmxad_advertiser")},handleRmxAdCtaClick:function(){this.triggerRapidBeacon("click_rmxad_cta")},triggerRapidBeacon:function(e){var f=this,g=f.getRmxRapidTrackingData(e);f.chrome.beaconClick(g,f.config.modId)},getUrlHostname:function(f){var e;if(!f){return""}e=document.createElement("a");e.href=f;return e.hostname},getRmxRapidTrackingData:function(g){var i=this,h=i.data[i.slideshowId].content.items[i.currentIndex],j,f,e;if(!g){return""}switch(g){case"click_rmxad_image":case"click_rmxad_title":f=h.title;break;case"click_rmxad_marker":e=i.getUrlHostname(i.nodes.meta.container.one(".lb-meta-title .lb-adlink").getAttribute("href"));break;case"click_rmxad_advertiser":case"click_rmxad_cta":f=h.source;break}j={outcome:"",sec:"sshow",linkname:i.rmxActionDataMap[g].slk||f||"",name:"",keys:{rspns:"nav",t1:"a0",t2:"sshow",t3:"full",t4:i.rmxActionDataMap[g].t4||"",elm:i.rmxActionDataMap[g].elm||"",elmt:i.rmxActionDataMap[g].elmt||"",itc:"0",tar:e||i.getUrlHostname(h.clickurl),ad:"1",aid:h.uuid}};return j},rmxActionDataMap:{click_rmxad_image:{t4:"img",elm:"img",elmt:"ad"},click_rmxad_title:{t4:"desc",elm:"hdln",elmt:"ad"},click_rmxad_marker:{t4:"desc",slk:"adchoices",elm:"itm",elmt:"info"},click_rmxad_advertiser:{t4:"desc",elm:"itm",elmt:"adv"},click_rmxad_cta:{t4:"rght",elm:"tl",elmt:"ad"}}},false,null,4,false)}},"0.0.1",{requires:["base","node-base","event-base","event-custom","io-base","td-ads-feedback"]});
/* watchlist-base.js 240ac0f */ YUI().add("media-watchlist-base",function(d){var f=86400000,j="PRF",e="tab_st",b=".watchlist-app",h=".watchlist-quotes-section",g=".more-quotes-table",c="watchlist:tickerDeleted",a="watchlistload",i="watchlist-quotes-section",k=/[-\/\\^$*+?.()|[\]{}]/g;d.namespace("Media.WatchlistBase");d.Media.WatchlistBase=function(l){this.body=d.one(b);this.conf=l;this.modId=l.mod_id;this.refreshModules=l.refresh_mod?l.refresh_mod:null;this.refreshTimeout=l.timeout;this.xhrUrl="/_xhr/watchlist/?selected=";this.rapidSec="wtchlst-lhnav";d.publish(c,{emitFacade:true,broadcast:2,fireOnce:false});this.init();this.initDeleteTickers()};d.Media.WatchlistBase.prototype={init:function(){return},initLinkHandlers:function(){return},initBodyLinkHandlers:function(){return},initDeleteTickerListeners:function(){return},initDeleteTickers:function(){var o,m,l=this,n=this.body.one(g);if(n){o=n.getData("portfolio-id");if(o!=="_recent_quotes"){return}m=this.body.one("#rq-overlay");if(!m){return}m.delegate("click",function(t){var u,s,r=t.target,p,q;if(r.getData("delete-ticker")){p=r.getData("delete-ticker");u=d.Cookie.getSub(j,"t");if(typeof u==="string"){q=p.replace(k,"\\$&");s=new RegExp("(^|\\+)"+q+"($|\\+)");u=u.replace(s,function(v,x,w){if(x){return w?x:""}return""});l.storeInCookie(j,"t",u,true)}this.remove(true);d.fire(c,{ticker:p})}},"tr");this.initDeleteTickerListeners()}},handleFollowEvent:function(n){var l=this.body.one(".portfolio-selector"),m;if(l){m=l.get("value");this.doFollowInstrumentation(n);if(m==="_watchlist"){d.later(500,this,function(){this.getPortfolioView("_watchlist",n)})}this.doFollowHighlight(n)}},doFollowHighlight:function(p,r){var n=p.button,m="",o,l;if(n.ancestor(h,true,"button")){if(p.ticker&&p.action==="follow"){m="highlight-quote"}else{if(p.ticker&&p.action==="unfollow"){m="unhighlight-quote"}}o=n.ancestor(".follow-quote-area",true);o.addClass(m);l=this.body.all("."+m);try{l.transition({easing:"ease-out",duration:1.5,"background-color":"transparent"})}catch(q){}d.later(2000,this,function(){l.removeClass(m);l.removeAttribute("style");if(r){r()}})}else{if(r){r()}}},getInstrumentationCat:function(){var l=this.body.one(".portfolio-selector"),m;if(l){m=l.get("value");switch(m){case"_watchlist":return"flw";case"_recent_quotes":return"rcnt";default:return"ptfo"}}return"rcnt"},doFollowInstrumentation:function(q){var p,n,o=0,m={mod_id:this.modId,data:{outcome:"dclitm",sec:this.rapidSec,keys:{t1:"a2",t2:this.rapidSec,t3:"lst",sec:this.rapidSec,cat:this.getInstrumentationCat(),elm:"icn",elmt:"flw",itc:"1",tar:document.domain}}};function l(s,r){if(s.getAttribute("data-flw-quote")===q.ticker){o=r;return true}}if(q.button.ancestor(".watchlist-app",true)){n=q.button.ancestor(".rq-overlay",true);if(n){m.data.keys.t3="pop";p=n.all(".follow-quote")}else{p=this.body.all(".follow-quote")}p.some(l);m.data.keys.cpos=o;if(q.action==="unfollow"){m.data.keys.dcl="neu-neu";m.data.keys.slk="Unfollow";d.Global.fire("rapid-tracker:click",m)}else{if(q.action==="follow"){m.data.keys.dcl="neu-pos";m.data.keys.slk="Follow";d.Global.fire("rapid-tracker:click",m)}}}},handlePortfolioChange:function(p){var o=null,m=null,n=null,l={mod_id:this.modId,data:{sec:this.rapidSec,keys:{t1:"a2",t2:this.rapidSec,t3:"drp",sec:this.rapidSec,cat:this.getInstrumentationCat(),elm:"itm",elmt:"cat",itc:"1",tar:document.domain}}};if(!p.target){n=true;m=p}else{o=p.target;m=o.get("value")}d.Global.fire("rapid-tracker:click",l);this.storeInCookie(e,"watchl_prt",m);if(n!==true){this.getPortfolioView(m,{});this.body.one(".portfolio-selector-title").set("text",o.get("options").item(o.get("selectedIndex")).get("text"))}else{this.getPortfolioView(m,{accord:true})}},getPortfolioView:function(o,p){var m=this,q=p.accord?m.updateAccordView:m.updateView,l=p.accord?"&accord=1":"";function n(){d.io(m.xhrUrl+o+l,{on:{success:d.bind(q,m,p),failure:function(){return false}},context:m})}if(p.action&&p.action==="unfollow"){this.doFollowHighlight(p,n)}else{this.body.one(h).addClass("Op-33");n()}},updateView:function(p,m,r){var n=d.Node.create(r.responseText),q,o="",l=this.body.one(h);if(!l){return}q=n.one(".no-quotes-found");if(q){l.replace(q)}else{q=this.body.one(".rq-more-quotes");if(!q){l.replace(n.one(h));this.initLinkHandlers()}q=n.one(".quotes-table");if(p.ticker&&p.action==="follow"){o="highlight-quote"}if(q){if(p.ticker){q.one(".follow-quote-area").addClass(o)}this.body.one(".quotes-table").replace(q)}q=n.one(g);if(q){if(p.ticker){q.one(".follow-quote-area").addClass(o)}this.body.one(g).replace(q)}if(p.ticker){d.later(700,this,function(){n=this.body.all("."+o);try{n.transition({easing:"ease-out",duration:0.5,"background-color":"transparent"})}catch(s){}d.later(500,this,function(){n.removeClass(o);n.removeAttribute("style")})})}if(d.Media.FollowQuote){d.Media.FollowQuote.updateButtonStates()}}this.body.one(h).removeClass("Op-33");this.initDeleteTickers();this.initBodyLinkHandlers();d.Global.fire("filter:finance_add_follow",null);if(YMedia.rapid&&YMedia.rapid.removeModule&&YMedia.rapid.addModules){YMedia.rapid.removeModule(this.modId);YMedia.rapid.addModules(this.modId)}if(typeof this.showhide!=="undefined"){this.showhide(true)}},updateAccordView:function(r,p,o){var v=null,s=null,n=null,w=null,y=null,u=null,l=d.Node.create(o.responseText),t=this.body.one(" ."+a+" ."+i),m=t.get("parentNode");if(!t){return}v=l.one("#mediawatchlist .quotes-table");s=l.one("#mediawatchlist #rq-more-quotes");n=l.one("#mediawatchlist #rq-overlay");u=d.one(".watchlist-container li.selected .default-quotes");if(v){m.get("parentNode").all(".selected").removeClass("selected");m.addClass("selected");m.removeClass(a);if(u&&r.action==="follow"){s=null;y=u.one('TR[data-row-ticker="'+r.ticker+'"]');u.insert(y,0)}else{t.all("> *").remove();t.append(v)}if(s){m.get("parentNode").all("#rq-more-quotes").remove();t.append(s);m.get("parentNode").all("#rq-overlay").remove();t.append(n)}t.removeAttribute("style");t.one(".quotes-table").addClass("imp").addClass("W-100").addClass("Fz-s").addClass("Fw-400");if(t.hasClass("nofollowing")){t.removeClass("nofollowing")}this.initLinkHandlers();if(d.Media.FollowQuote){d.Media.FollowQuote.updateButtonStates()}}if(u&&r.ticker&&window.location.pathname.indexOf("my-quotes-news")!==-1){if(this.refreshModules){var x;for(var q=0;q<this.refreshModules.length;q++){x=this.refreshModules[q];this.refreshModule(x)}}}this.body.one(h).removeClass("Op-33");this.initDeleteTickers();this.initBodyLinkHandlers();if(YMedia.rapid&&YMedia.rapid.removeModule&&YMedia.rapid.addModules){YMedia.rapid.removeModule(this.modId);YMedia.rapid.addModules(this.modId)}if(typeof this.showhide!=="undefined"&&!r.ticker){this.showhide(true)}},refreshModule:function(o){var m,l=this,n=d.one(o.src_node),p=o.params?o.params:{};if(n){n.addClass("Op-33");m={srcNode:o.src_node,params:d.merge(p,{instance_id:o.instance_id,m_id:o.mod_id,m_mode:"multipart",_sig:window.watchlistRMPUtil[o.sig]}),path:"/_td_api/remote/",onFailure:function(r,q){q.node.removeClass("Op-33")},onComplete:function(q){q.node.removeClass("Op-33")},data:{node:n},timeout:l.refreshTimeout};d.Media.RMP.load(m)}},storeInCookie:function(m,u,r,v){var t,n,q,s,o=new Date(),w=window.location.hostname,p="."+w.match(/[^.]+\.[^.]+\.[^.]+$/),l;o.setTime(o.getTime()+180*f);l={expires:o,domain:p,path:"/",raw:true};if(v){t=d.Cookie.getSubs(m)||{};t[u]=r;n=[];for(q in t){s=t[q];if(t.hasOwnProperty(q)&&q&&s){if(q!==u){s=encodeURIComponent(s)}n.push(q+"="+s)}}d.Cookie.set(m,n.join("&"),l)}else{d.Cookie.setSub(m,u,r,l)}}}},"1.0.0",{requires:["handlebars","event"]});
/* watchlist-gs.js 8a3c5b2 */ YUI().add("media-watchlist-gs",function(b){var h="tab_st",l="wl-dply",j="watchlist-display",k=".watchlist-quotes-section",g="percent",f="price",c="watchlist-display-percent",d="watchlist-display-price",e="0",i="1",a="watchlist:tickerDeleted";b.namespace("Media.WatchlistGS");b.Media.WatchlistGS=b.Base.create("YMediaWatchlistGSPopOut",b.Media.WatchlistBase,[],{init:function(){var m=this.body.one(".portfolio-selector");this.rapidSec="wtchlst-lhnav";this.initLinkHandlers();this.initBodyLinkHandlers();if(m){m.on("change",this.handlePortfolioChange,this)}this.initDisplayToggleHandler()},initLinkHandlers:function(){var o,m=this,n=b.one("#rq-more-quotes");if(n){n.detach();n.on("click",function(q){var p=q.target.getData("link-type");switch(p){case"pop-out":m.initPopOutLauncher(q);break;default:m.moreClickHandler(q)}});o=n.one("> .pop-out");if(o){o.removeClass("Disabled")}}this.myquotesOverlay=this.body.one("#rq-overlay");if(this.myquotesOverlay){this.myquotesOverlay.detach();this.myquotesOverlay.on("clickoutside",function(t){var q,s=t.target,r=s.getData("link-type"),p=s.getData("delete-ticker");if(r!=="more"&&!p){if(m.myquotesOverlay.hasClass("D-b")){m.myquotesOverlay.removeClass("D-b").addClass("D-n");q=b.one(".yog-np");if(q){q.removeClass("CoversStage")}}}})}},initBodyLinkHandlers:function(){var m=this.body.one(".rq-overlay table th .pop-out");this.overlayCalculated=false;if(m){m.on("click",b.bind(this.initPopOutLauncher,this));m.removeClass("Disabled")}},initDeleteTickerListeners:function(){var m=this;if(this.deleteListener){this.deleteListener.detach()}this.deleteListener=b.Global.on(a,function(q){var p=m.body.one(k+" table"),r=p.one(' tr[data-row-ticker="'+q.ticker+'"]'),n,o;if(r){n=r.hasClass("D-n");r.remove(true);if(!n){o=p.one("tr.D-n");if(o){o.removeClass("D-n")}}}m.positionOverlay()})},moreClickHandler:function(m){m.preventDefault();if(this.myquotesOverlay.hasClass("D-n")){this.showOverlay();b.one("body").fire("imageloader:delayed",this.myquotesOverlay)}else{this.myquotesOverlay.removeClass("D-b").addClass("D-n")}},showOverlay:function(){if(!this.myquotesOverlay){return}this.myquotesOverlay.removeClass("D-n").addClass("D-b");var m=b.one(".yog-np");if(m){m.addClass("CoversStage")}if(!this.overlayCalculated){this.positionOverlay()}},positionOverlay:function(){var m,n,o=this.body.one("#rq-more-quotes");if(o){m=this.myquotesOverlay.get("offsetHeight")/2;n=o.get("offsetTop")-m;this.myquotesOverlay.setStyle("top",n+"px");this.overlayCalculated=true}},initDisplayToggleHandler:function(){var o=b.one(".wl-display-toggle"),m=this,n=null;o.on("click",function(s){var r=s.target,t=r.getData(j),p=b.one(k),q=r.hasClass("selected");s.preventDefault();if(!t||!p||q){return}o.all("a").toggleClass("selected");n=m.body.one(".pre-mkt-txt");switch(t){case f:p.addClass(d).removeClass(c);m.storeInCookie(h,l,i);if(n){n.addClass("D-n")}break;case g:p.addClass(c).removeClass(d);m.storeInCookie(h,l,e);if(n){n.removeClass("D-n")}break;default:}})},initPopOutLauncher:function(n){var o=n.target,m=o&&o.getData("popout-href");n.preventDefault();if(m){window.open(m,"WatchlistPopOut","scrollbars=yes,directories=no,menubar=no,toolbar=no,location=no,width=980,height=600")}}})},"1.0.0",{requires:["handlebars","event","media-watchlist-base"]});
/* follow-quote.js 8559ad0 */ YUI().add("media-follow-quote",function(b){var a="data-flw-quote";b.namespace("Media.FollowQuote");b.Media.FollowQuote={self:null,con:{EVT_FOLLOW_QUOTE:"follow-quote:action",EVT_ACT_FOLLOW:"follow",EVT_ACT_UNFOLLOW:"unfollow",CLASS_FOLLOW_QUOTE:"follow-quote",CLASS_FOLLOW:"follow-quote-follow",CLASS_UNFOLLOW:"follow-quote-following",CLASS_FOLLOW_SECTION:"follow-quote-area"},has_init:false,conf:{},tickerUrlPattern:"",followList:{},init:function(e,f){var d={baseQuoteURL:"http://finance.yahoo.com/q?s=",xhrBase:"/",loginUrl:"https://login.yahoo.com/config/login?.src=quotes&.done=",removeClassOnLoad:"",strings:{following:"In Watchlist",follow:"Watchlist",signIn:"Add to Watchlist"}},c=this;if(window.location.protocol){d.loginUrl=d.loginUrl+window.location.protocol+"//"+window.location.host+"/"+window.location.pathname}if(this.has_init){this.updateButtonStates();if(f){f()}}else{this.conf=b.merge(d,e);if(!this.conf.loginTxt){this.conf.loginTxt='<a href="'+this.conf.loginUrl+'">Sign in</a> to '+this.conf.strings.signIn}this.self=this;b.one("body").on("click",this.handleClickEvent,this);this.injectQuoteMustacheTmpl();this.initFollowState(f);b.on(b.Media.FollowQuote.getEventListenerName(),this.handleFollowEvent,this);if(e.tickerUrlPattern){this.tickerUrlPattern=e.tickerUrlPattern;this.addEventHandlers()}this.has_init=true}},addEventHandlers:function(){b.Global.on("filter:finance_add_follow",this.addFollowButton,this);var c=b.one("#td-applet-stream_container")||b.one(".type_stream");if(c){c.delegate("hover",this.handleStreamHover,function(){},"li",this)}b.on("domready",function(){b.Global.fire("filter:finance_add_follow",null)})},addFollowButton:function(c,h){var f=null,i=null,l=this,d=".finance-add-follow-class",g=this.getFollowSectionClass(),e=null,k=null,j=null;e=(c&&c instanceof b.Node)?c:b.one("body");e.all(d).each(function(m){if(m.hasClass("visited")){return}m.addClass("visited");i=m.getAttribute("href");if(!i||i.indexOf(l.tickerUrlPattern)===-1){return}i=i.substr(i.indexOf(l.tickerUrlPattern)+l.tickerUrlPattern.length);if(b.UA.gecko>0&&h){f=b.Media.FollowQuote.getFollowBtnHTML({ticker:i,showFollowText:false})}else{f=b.Media.FollowQuote.getFollowBtnHTML({ticker:i,showFollowText:false,addl_classes:"Pos-a"})}if(m){k=b.Node.create('<span class="finance-follow-quote-container '+g+'"></span>');j=m.ancestor();j.replaceChild(k,m);m.setHTML(m.getHTML()+f);k.appendChild(m)}})},handleStreamHover:function(g){var f=g.currentTarget,c="finance-add-follow-class",d=this;f.all("a").each(function(e){if(e.getAttribute("href").indexOf(d.tickerUrlPattern)!==-1&&!e.hasClass(c)){e.addClass(c)}});b.Global.fire("filter:finance_add_follow",f,true)},api:{getSimpleWatchlist:function(d,f,e){var c=b.Media.FollowQuote.self;b.io(c.conf.xhrBase+"_xhr/watchlist-data/",{on:{success:f,failure:e},context:c,timeout:3000})},addFollow:function(d,f,e){var c=b.Media.FollowQuote.self;b.io(c.conf.xhrBase+"_xhr/watchlist-actions/",{method:"POST",data:{s:d.ticker,crumb:c.getCrumb(),region:c.getRegion(),lang:c.getLang(),cmd:"add"},on:{success:f,failure:e},context:c,timeout:3000})},removeFollow:function(d,f,e){var c=b.Media.FollowQuote.self;b.io(c.conf.xhrBase+"_xhr/watchlist-actions/",{method:"POST",data:{s:d.ticker,crumb:c.getCrumb(),region:c.getRegion(),lang:c.getLang(),cmd:"delete"},on:{success:f,failure:e},context:c,timeout:3000})}},initFollowState:function(e){var c=this,d;this.api.getSimpleWatchlist({},function(g,i){var h,f;d=b.JSON.parse(i.responseText);c.conf.isLoggedIn=d.isLoggedIn;if(!c.conf.crumb){c.conf.crumb=d.crumb}if(d.data){for(f in d.data){h=d.data[f];if(h){c.followList[h]=true}}}c.updateButtonStates();if(e){e()}},this.handleAPIFailure)},handleAPIFailure:function(c,d){return false},getCrumb:function(){return this.conf.crumb},getRegion:function(){return this.conf.region},getLang:function(){return this.conf.lang},getEventListenerName:function(){return this.con.EVT_FOLLOW_QUOTE},getEventActFollowName:function(){return this.con.EVT_ACT_FOLLOW},getEventActUnfollowName:function(){return this.con.EVT_ACT_UNFOLLOW},getFollowBtnClass:function(){return this.con.CLASS_FOLLOW_QUOTE},getFollowClass:function(){return this.con.CLASS_FOLLOW},getUnfollowClass:function(){return this.con.CLASS_UNFOLLOW},getFollowSectionClass:function(){return this.con.CLASS_FOLLOW_SECTION},isLoggedIn:function(){return this.conf.isLoggedIn},isFollowBtn:function(c){return c.ancestor("."+this.getFollowBtnClass(),true,"button")},handleClickEvent:function(c){var f=c.target,d,e={};d=f.ancestor("."+this.getFollowBtnClass(),true,"button");b.all(".follow-quote-visible").removeClass("follow-quote-visible");if(d){c.evtData={ticker:d.getAttribute(a),button:d};if(this.isLoggedIn()){if(d.hasClass(this.getUnfollowClass())){this.toggleFollow("follow",d,c)}else{this.toggleFollow("unfollow",d,c)}}else{this.showLoginHTML(d,c)}c.preventDefault()}},showLoginHTML:function(e,f){var d,c={classes:"Fz-s Fw-400 FancyBox Arrow Pos-a Lh-14 Z-7 Px-10 Mt-10 Tooltip follow-quote-tooltip",content:this.conf.loginTxt,maxWidth:"156px",width:"156px",height:"18px",position:"rc"};if(this.prev_button_node){b.Stencil.Tooltip("hide",this.prev_button_node,c)}b.Stencil.Tooltip("show",e,c);this.prev_button_node=e;d=e.ancestor("."+this.getFollowSectionClass(),true);this.toggleFollow("follow",e,f);if(d){d.addClass("follow-quote-visible")}},toggleFollow:function(h,f,c){var g=f.getAttribute(a),e,d;c=c||{evtData:{}};e=b.all(".follow-quote-txt["+a+'="'+g+'"]');d=b.all("button["+a+'="'+g+'"]');if(h==="follow"){c.evtData.action=this.con.EVT_ACT_UNFOLLOW;this.followList[c.evtData.ticker]=false;d.addClass(this.getFollowClass());d.removeClass(this.getUnfollowClass());e.setHTML(this.conf.strings.follow);if(this.isLoggedIn()){this.api.removeFollow({ticker:c.evtData.ticker},function(i,j){},this.handleAPIFailure)}b.fire(this.getEventListenerName(),c)}else{if(h==="unfollow"){c.evtData.action=this.con.EVT_ACT_FOLLOW;this.followList[c.evtData.ticker]=true;d.addClass(this.getUnfollowClass());d.removeClass(this.getFollowClass());e.setHTML(this.conf.strings.following);if(this.isLoggedIn()){this.api.addFollow({ticker:c.evtData.ticker},function(i,j){},this.handleAPIFailure)}b.fire(this.getEventListenerName(),c)}}},injectQuoteMustacheTmpl:function(){var c='<script id="hb-follow-quote-btn" type="text/x-handlebars-template"><button class="follow-quote rapid-noclick-resp {{follow_class}} {{addl_classes}}" '+a+'="{{{ticker}}}"><i class="Icon">&#xe023;</i></button> {{#show_follow_text}} <span class="follow-quote-txt" '+a+'="{{{ticker}}}">{{follow_text}}</span>{{/show_follow_text}}<\/script>';b.one("body").insert(b.Node.create(c))},updateButtonStates:function(){var e,d,c;for(e in this.followList){d=b.all(".follow-quote-txt["+a+'="'+e+'"]');c=b.all("button["+a+'="'+e+'"]');if(this.followList[e]){c.addClass(this.getUnfollowClass());d.setHTML(this.conf.strings.following)}else{c.removeClass(this.getUnfollowClass());c.addClass(this.getFollowClass());d.setHTML(this.conf.strings.follow)}}if(this.conf.removeClassOnLoad!==""){b.all("."+this.conf.removeClassOnLoad).removeClass(this.conf.removeClassOnLoad)}},getFollowBtnHTML:function(f){var e=b.one("#hb-follow-quote-btn"),c,d;if(e){e=e.getHTML();c=b.Handlebars.compile(e);d={ticker:f.ticker,follow_class:"",addl_classes:f.addl_classes||"",show_follow_text:false,follow_text:""};if(f.showFollowText){d.show_follow_text=true;if(this.followList[f.ticker]){d.follow_text=this.conf.strings.following}else{d.follow_text=this.conf.strings.follow}}if(this.followList[f.ticker]){d.follow_class=this.getUnfollowClass()}else{d.follow_class=this.getFollowClass()}return c(d)}else{return""}},handleFollowEvent:function(o){var d=["t1","t2","t3","sec","slk","mpos","test"],g=o.evtData.button,j=null,n="",q=[],c={},h=[],k=0,m={outcome:"dclitm",t3:"ct",elm:"icn",itc:"1",tar:document.domain},p=[],l=function(i,e){var s=0;if(i.getAttribute("data-flw-quote")===o.evtData.ticker){s=e}return s},f=function(){var e=b.one(".watchlist-app .portfolio-selector"),i;if(e){i=e.get("value");switch(i){case"_watchlist":return"flw";case"_recent_quotes":return"rcnt";default:return"ptfo"}}return"rcnt"};if(g){j=g.ancestor(".yom-mod");if(j){n=j.get("id");if(j.getAttribute("data-ylk")){q=j.getAttribute("data-ylk").split(";")}else{if(g.ancestor("a")&&g.ancestor("a").getAttribute("data-ylk")){q=g.ancestor("a").getAttribute("data-ylk").split(";")}else{if(n.indexOf("media")!==0){n=j.ancestor(".yom-mod")&&j.ancestor(".yom-mod").get("id")?j.ancestor(".yom-mod").get("id"):n}m.sec=n;m.t1="a3";m.t2=n}}for(k=0;k<q.length;k++){if(b.Lang.trim(q[k].toString())){h=q[k].split(":");c[h[0]]=h[1]}}}else{n="strm";m={outcome:"dclitm",sec:"strm",t1:"a3",t2:"strm",t3:"ct",elm:"icn",elmt:"",itc:"1",tar:document.domain}}m=b.merge(c,m);m.t2=m.sec;m=b.merge(m,this.addMoreInstrumentation(n))}if("unfollow"===o.evtData.action){m.elmt="unflw";m.slk="Unfollow"}else{if("follow"===o.evtData.action){m.elmt="flw";m.slk="Follow"}}if(o.evtData.button.ancestor(".watchlist-app",true)){var r=o.evtData.button.ancestor(".rq-overlay",true);if(r){m.t3="pop";p=r.all(".follow-quote")}else{p=b.one(".watchlist-app").all(".follow-quote")}m.cpos=p.some(l);if(o.evtData.action==="unfollow"){m.dcl="neu-neu"}else{if(o.evtData.action==="follow"){m.dcl="neu-pos"}}}if(YMedia&&YMedia.rapid){YMedia.rapid.beaconClick(m.sec,m.slk,m.cpos,m,m.outcm)}},addMoreInstrumentation:function(d){var c={};switch(d){case"mediawatchlistgs":case"mediawatchlistgs_2":c={t1:"a2",t3:"lst",mpos:"2"};break;case"mediafinancemarketsummarygs":case"mediafinancemarketsummarygs_2":c={mpos:"11"};break;case"mediatrendingtickersgs":break;case"strm":break}return c}}},"1.0.0",{requires:["io","node","event","json","stencil-tooltip","handlebars","transition"]});
/* quotes-search-gs.js edf8574 */ YAHOO=YAHOO||{};YAHOO.util=YAHOO.util||{};YAHOO.util.ScriptNodeDataSource=YAHOO.util.ScriptNodeDataSource||{};YAHOO.Media=YAHOO.Media||{};YUI().add("media-quotes-search-gs",function(a){YAHOO.Media.SymbolSuggestGS=function(k){if(!k){k={}}this.init(k)};var f={"default":{containerId:"#quoteContainer",listId:"#resQuotes",quoteLogicId:"#get_quote_logic_opt",inputId:"#txtQuotes",modId:"mediaquotessearch"}},g="default",i=0,j="/q?s=",h="/lookup?s=",b="",d=function(q){if(!YAHOO.Media.Tracking){return}var r=q.selectedIndex||-1,o=q.sec,k=q.slk,n=q.mid,m,l;m=q.symbol;l={_S:i,pos:r,keyw:m,sec:o,slk:k,mid:n};setTimeout(function(){var p=new YAHOO.Media.Tracking({});p.beacon(l)},100)},e=function(r,l,o,u,p,m,n,t){var v=a.one(u).get("value"),s=window.parent,q=r.target,k;if(a.Media&&a.Media.FollowQuote&&a.Media.FollowQuote.isFollowBtn(q)){return}l=encodeURIComponent(l);d({sec:"symbolsuggest",symbol:l,selectedIndex:o,inputId:p,slk:"single_quote",mid:n});if(m==="MB"){k="http://messages.finance.yahoo.com/mb/"+l+"/"}else{k=j+"?s="+l+"&ql="+v}if(t){if(s!==window.top){s.location.href=k}else{window.open(k)}}else{window.location.href=k}},c=function(p,n){a.all(n.listId+" li").remove();var l=p.ResultSet,q=l.Query,o=l.Result,m=0,k;a.Array.map(o,function(F){var t=F.symbol,s=" "+F.name,B=F.exch,z=F.type,u=F.exchDisp,x=F.typeDisp,r=t.toLowerCase().indexOf(q.toLowerCase()),w,E,A,y,D,C="",v="";if(a.Media&&a.Media.FollowQuote&&(n.device=="full"||n.device=="desktop")){C=a.Media.FollowQuote.getFollowBtnHTML({ticker:t});v=a.Media.FollowQuote.getFollowSectionClass()}if(r===0){t="<em>"+t.substr(0,q.length)+"</em>"+t.substr(q.length)}else{r=s.toLowerCase().indexOf(" "+q.toLowerCase());if(r!==-1){s=s.substr(0,r)+" <em>"+s.substr(r+1,q.length)+"</em>"+s.substr(r+q.length+1)}}w=['<span class="symbol"><span class="symbol-name">',t,"</span> ",C,"</span> "];E=['<span class="name">',s.substr(1),"</span> "];A=['<span class="exch_type_wrapper"> '];if(x){A.push(x);A.push(" - ")}if(u){A.push(u)}else{A.push(B)}A.push("</span>");y=['<li class="'+v+'" onclick="void(0)">',w.join(""),E.join(""),A.join(""),"</li>"];D=a.Node.create(y.join(""));if(!n.disableRedirect){D.on("click",e,this,F.symbol,m,n.quoteLogicId,n.inputId,n.pageType,n.modId,n.popout)}D.on("mouseover",function(I,G){var H=a.all(n.listId+" li");H.removeClass("yui-ac-highlight");this.addClass("yui-ac-highlight")},D,this);a.one(n.listId).appendChild(D);m++;return y});k=a.one(n.containerId+" .moreresults a");k.detach("click");k.set("href",h+encodeURIComponent(q).toLowerCase());k.setContent(b.replace("{0}",q));k.on("click",function(t,s,u){var r=s.get("value");d({sec:"getquotesbtn",inputId:this.acInputId,slk:"see_all_results",symbol:r,mid:u},this,n.inputId)},this,a.one(n.inputId),n.modId);a.one(n.containerId).show()};YAHOO.Media.SymbolSuggestGS.prototype={init:function(l){l=a.merge(f["default"],l);if(!l){return}this.KEY={DOWN:40,ENTER:13,ESC:27,TAB:9,UP:38};this.acContainerId=l.acContainerId||"#quoteContainer";l.containerId=this.acContainerId;this.acInputId=l.acInputId||"#txtQuotes";l.inputId=this.acInputId;this.dsServer=l.dsServer||"https://s.yimg.com/aq/autoc";this.dsRegion=l.region||"US";this.dsLang=l.lang||"en-US";this.acInputFormId=l.acInputFormId||".yom-quotes-search";this.callback=l.callback||"YAHOO.util.ScriptNodeDataSource.callbacks";this.acDelimiter=l.delimiter||",";this.focusOnInput=l.focusOnInput||"0";this.disableRedirect=l.disableRedirect||false;this.popout=l.popout||false;this.device=l.device||"full";f[this.acInputFormId]=l;this.modId=l.modId;var m=a.one("#"+this.modId),n,k;if(m){m.get("parentNode").setStyle("overflow","visible")}n=a.one("#"+this.modId+"_container");if(n){k=(n.get("parentNode")).get("parentNode");k.setStyle("overflow","visible")}i=l.spaceId||0;j=l.quotesPage||"/q";h=l.quotesLookup||"/lookup?s=";b=l.showAllResultsStr||"";this.orignialValue="";this.curSelectedIndex=-1;this.acInputFormEl=a.one(this.acInputFormId);this.acInputBoxEl=a.one(this.acInputId);this.acContainerEl=a.one(this.acContainerId);this.initDataSource();if(this.focusOnInput===1||this.focusOnInput==="1"){this.enablefocusOnInput(this.acInputBoxEl)}},enablefocusOnInput:function(k){k.focus();k.setAttribute("placeholder","")},initDataSource:function(){var k=this,l,m;if(this.dsServer&&this.dsServer!==null){m=new a.DataSource.Get({source:this.dsServer});m._generateRequest=function(n){return""};k.acInputBoxEl.plug(a.Plugin.AutoComplete,{source:m,render:k.acContainerId,queryDelimiter:k.acDelimiter,requestTemplate:"?query={query}&region="+this.dsRegion+"&lang="+this.dsLang+"&callback="+this.callback});k.acInputBoxEl.on("keyup",function(t,s){g=k.acInputFormId;var q=t.keyCode,r=s.get("value").length,p=k.curSelectedIndex,n,o;if(q===k.KEY.ENTER||q===k.KEY.ESC||r<1){a.one(k.acContainerId).hide()}else{if(q===k.KEY.DOWN){n=k.acContainerEl.all("li");n.removeClass("yui-ac-highlight");o=n.size();if(k.curSelectedIndex>=o){k.curSelectedIndex=-1}if(k.curSelectedIndex!==o-1){++k.curSelectedIndex}if(p===-1){this.originalValue=s.get("value")}this._updateInputBoxValue(n,s)}else{if(q===k.KEY.UP){n=k.acContainerEl.all("li");n.removeClass("yui-ac-highlight");o=n.size();if(k.curSelectedIndex<=0){k.curSelectedIndex=-1;s.set("value",this.originalValue);return}if(k.curSelectedIndex!==-1){--k.curSelectedIndex}this._updateInputBoxValue(n,s)}else{k.curSelectedIndex=-1}}}},this,k.acInputBoxEl);if(a.one(".watchlist-app")){a.one("body").on("click",function(p){var o=p.target,n=o.ancestor(".yui-ac-content",true);if(!n){a.one(k.acContainerId).hide()}})}else{k.acInputBoxEl.on("blur",function(o,n){setTimeout(function(){n.hide()},500)},this,k.acContainerEl)}l=k.acInputFormEl.one("form.get-quotes");l.on("submit",function(o){var n=encodeURIComponent(k.acInputBoxEl.get("value"));d({sec:"getquotesbtn",symbol:n,selectedIndex:k.curSelectedIndex,inputId:this.acInputId,slk:"single_quote",mid:this.modId});k.acContainerEl.hide()},this)}else{return false}},_updateInputBoxValue:function(l,m){var o=l.item(this.curSelectedIndex),k=o.one(".symbol-name").getContent(),n;k=k.replace(/<(?:.|\s)*?>/g,"").replace("&amp;","&");k=k.toUpperCase()+this.acDelimiter+" ";n=this.originalValue.substr(0,this.originalValue.lastIndexOf(",")+1);if(n.length>0){n+=" "}k=n+k;m.set("value",k);o.addClass("yui-ac-highlight")}};YAHOO.Finance=YAHOO.Finance||{};YAHOO.Finance.SymbolSuggest=YAHOO.Finance.SymbolSuggest||{};YAHOO.util.ScriptNodeDataSource.callbacks=function(l){var k=f[g];c(l,k)}},"1.0.0",{requires:["node","intl","autocomplete","datasource-get"]});/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("arraylist",function(e,t){function s(t){t!==undefined?this._items=e.Lang.isArray(t)?t:n(t):this._items=this._items||[]}var n=e.Array,r=n.each,i;i={item:function(e){return this._items[e]},each:function(e,t){return r(this._items,function(n,r){n=this.item(r),e.call(t||n,n,r,this)},this),this},some:function(e,t){return n.some(this._items,function(n,r){return n=this.item(r),e.call(t||n,n,r,this)},this)},indexOf:function(e){return n.indexOf(this._items,e)},size:function(){return this._items.length},isEmpty:function(){return!this.size()},toJSON:function(){return this._items}},i._item=i.item,e.mix(s.prototype,i),e.mix(s,{addMethod:function(e,t){t=n(t),r(t,function(t){e[t]=function(){var e=n(arguments,0,!0),i=[];return r(this._items,function(n,r){n=this._item(r);var s=n[t].apply(n,e);s!==undefined&&s!==n&&(i[r]=s)},this),i.length?i:this}})}}),e.ArrayList=s},"3.18.1",{requires:["yui-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("arraylist-add",function(e,t){e.mix(e.ArrayList.prototype,{add:function(t,n){var r=this._items;return e.Lang.isNumber(n)?r.splice(n,0,t):r.push(t),this},remove:function(e,t,n){n=n||this.itemsAreEqual;for(var r=this._items.length-1;r>=0;--r)if(n.call(this,e,this.item(r))){this._items.splice(r,1);if(!t)break}return this},itemsAreEqual:function(e,t){return e===t}})},"3.18.1",{requires:["arraylist"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("arraylist-filter",function(e,t){e.mix(e.ArrayList.prototype,{filter:function(t){var n=[];return e.Array.each(this._items,function(e,r){e=this.item(r),t(e)&&n.push(e)},this),new this.constructor(n)}})},"3.18.1",{requires:["arraylist"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("array-invoke",function(e,t){e.Array.invoke=function(t,n){var r=e.Array(arguments,2,!0),i=e.Lang.isFunction,s=[];return e.Array.each(e.Array(t),function(e,t){e&&i(e[n])&&(s[t]=e[n].apply(e,r))}),s}},"3.18.1",{requires:["yui-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("escape",function(e,t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;","`":"&#x60;"},r={html:function(e){return(e+"").replace(/[&<>"'\/`]/g,r._htmlReplacer)},regex:function(e){return(e+"").replace(/[\-$\^*()+\[\]{}|\\,.?\s]/g,"\\$&")},_htmlReplacer:function(e){return n[e]}};r.regexp=r.regex,e.Escape=r},"3.18.1",{requires:["yui-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-base",function(e,t){function T(){}var n=e.Escape,r=e.Lang,i=e.Array,s=e.Object,o=r.isFunction,u=r.isString,a=r.trim,f=e.Attribute.INVALID_VALUE,l="_functionValidator",c="_sourceSuccess",h="allowBrowserAutocomplete",p="inputNode",d="query",v="queryDelimiter",m="requestTemplate",g="results",y="resultListLocator",b="value",w="valueChange",E="clear",S=d,x=g;T.prototype={initializer:function(){e.before(this._bindUIACBase,this,"bindUI"),e.before(this._syncUIACBase,this,"syncUI"),this.publish(E,{defaultFn:this._defClearFn}),this.publish(S,{defaultFn:this._defQueryFn}),this.publish(x,{defaultFn:this._defResultsFn})},destructor:function(){this._acBaseEvents&&this._acBaseEvents.detach(),delete this._acBaseEvents,delete this._cache,delete this._inputNode,delete this._rawSource},clearCache:function(){return this._cache&&(this._cache={}),this},sendRequest:function(t,n){var r,i=this.get("source");return t||t===""?this._set(d,t):t=this.get(d)||"",i&&(n||(n=this.get(m)),r=n?n.call(this,t):t,i.sendRequest({query:t,request:r,callback:{success:e.bind(this._onResponse,this,t)}})),this},_bindUIACBase:function(){var t=this.get(p),n=t&&t.tokenInput;n&&(t=n.get(p),this._set("tokenInput",n));if(!t){e.error("No inputNode specified.");return}this._inputNode=t,this._acBaseEvents=new e.EventHandle([t.on(w,this._onInputValueChange,this),t.on("blur",this._onInputBlur,this),this.after(h+"Change",this._syncBrowserAutocomplete),this.after("sourceTypeChange",this._afterSourceTypeChange),this.after(w,this._afterValueChange)])},_syncUIACBase:function(){this._syncBrowserAutocomplete(),this.set(b,this.get(p).get(b))},_createArraySource:function(e){var t=this;return{type:"array",sendRequest:function(n){t[c](e.concat(),n)}}},_createFunctionSource:function(e){var t=this;return{type:"function",sendRequest:function(n){function i(e){t[c](e||[],n)}var r;(r=e(n.query,i))&&i(r)}}},_createObjectSource:function(e){var t=this;return{type:"object",sendRequest:function(n){var r=n.query;t[c](s.owns(e,r)?e[r]:[],n)}}},_functionValidator:function(e){return e===null||o(e)},_getObjectValue:function(e,t){if(!e)return;for(var n=0,r=t.length;e&&n<r;n++)e=e[t[n]];return e},_parseResponse:function(e,t,r){var i={data:r,query:e,results:[]},s=this.get(y),o=[],u=t&&t.results,a,f,l,c,h,p,d,v,m,g,b;u&&s&&(u=s.call(this,u));if(u&&u.length){a=this.get("resultFilters"),b=this.get("resultTextLocator");for(p=0,d=u.length;p<d;++p)m=u[p],g=b?b.call(this,m):m.toString(),o.push({display:n.html(g),raw:m,text:g});for(p=0,d=a.length;p<d;++p){o=a[p].call(this,e,o.concat());if(!o)return;if(!o.length)break}if(o.length){l=this.get("resultFormatter"),h=this.get("resultHighlighter"),v=this.get("maxResults"),v&&v>0&&o.length>v&&(o.length=v);if(h){c=h.call(this,e,o.concat());if(!c)return;for(p=0,d=c.length;p<d;++p)m=o[p],m.highlighted=c[p],m.display=m.highlighted}if(l){f=l.call(this,e,o.concat());if(!f)return;for(p=0,d=f.length;p<d;++p)o[p].display=f[p]}}}i.results=o,this.fire(x,i)},_parseValue:function(e){var t=this.get(v);return t&&(e=e.split(t),e=e[e.length-1]),r.trimLeft(e)},_setEnableCache:function(e){this._cache=e?{}:null},_setLocator:function(e){if(this[l](e))return e;var t=this;return e=e.toString().split("."),function(n){return n&&t._getObjectValue(n,e)}},_setRequestTemplate:function(e){return this[l](e)?e:(e=e.toString(),function(t){return r.sub(e,{query:encodeURIComponent(t)})})},_setResultFilters:function(t){var n,s;return t===null?[]:(n=e.AutoCompleteFilters,s=function(e){return o(e)?e:u(e)&&n&&o(n[e])?n[e]:!1},r.isArray(t)?(t=i.map(t,s),i.every(t,function(e){return!!e})?t:f):(t=s(t),t?[t]:f))},_setResultHighlighter:function(t){var n;return this[l](t)?t:(n=e.AutoCompleteHighlighters,u(t)&&n&&o(n[t])?n[t]:f)},_setSource:function(t){var n=this.get("sourceType")||r.type(t),i;return t&&o(t.sendRequest)||t===null||n==="datasource"?(this._rawSource=t,t):(i=T.SOURCE_TYPES[n])?(this._rawSource=t,r.isString(i)?this[i](t):i(t)):(e.error("Unsupported source type '"+n+"'. Maybe autocomplete-sources isn't loaded?"),f)},_sourceSuccess:function(e,t){t.callback.success({data:e,response:{results:e}})},_syncBrowserAutocomplete:function(){var e=this.get(p);e.get("nodeName").toLowerCase()==="input"&&e.setAttribute("autocomplete",this.get(h)?"on":"off")},_updateValue:function(e){var t=this.get(v),n,s,o;e=r.trimLeft(e),t&&(n=a(t),o=i.map(a(this.get(b)).split(t),a),s=o.length,s>1&&(o[s-1]=e,e=o.join(n+" ")),e=e+n+" "),this.set(b,e)},_afterSourceTypeChange:function(e){this._rawSource&&this.set("source",this._rawSource)},_afterValueChange:function(e){var t=e.newVal,n=this,r=e.src===T.UI_SRC,i,s,o,u;r||n._inputNode.set(b,t),o=n.get("minQueryLength"),u=n._parseValue(t)||"",o>=0&&u.length>=o?r?(i=n.get("queryDelay"),s=function(){n.fire(S,{inputValue:t,query:u,src:e.src})},i?(clearTimeout(n._delay),n._delay=setTimeout(s,i)):s()):n._set(d,u):(clearTimeout(n._delay),n.fire(E,{prevVal:e.prevVal?n._parseValue(e.prevVal):null,src:e.src}))},_onInputBlur:function(e){var t=this.get(v),n,i,s;if(t&&!this.get("allowTrailingDelimiter")){t=r.trimRight(t),s=i=this._inputNode.get(b);if(t)while((i=r.trimRight(i))&&(n=i.length-t.length)&&i.lastIndexOf(t)===n)i=i.substring(0,n);else i=r.trimRight(i);i!==s&&this.set(b,i)}},_onInputValueChange:function(e){var t=e.newVal;t!==this.get(b)&&this.set(b,t,{src:T.UI_SRC})},_onResponse:function(e,t){e===(this.get(d)||"")&&this._parseResponse(e||"",t.response,t.data)},_defClearFn:function(){this._set(d,null),this._set(g,[])},_defQueryFn:function(e){this.sendRequest(e.query)},_defResultsFn:function(e){this._set(g,e[g])}},T.ATTRS={allowBrowserAutocomplete:{value:!1},allowTrailingDelimiter:{value:!1},enableCache:{lazyAdd:!1,setter:"_setEnableCache",value:!0},inputNode:{setter:e.one,writeOnce:"initOnly"},maxResults:{value:0},minQueryLength:{value:1},query:{readOnly:!0,value:null},queryDelay:{value:100},queryDelimiter:{value:null},requestTemplate:{setter:"_setRequestTemplate",value:null},resultFilters:{setter:"_setResultFilters",value:[]},resultFormatter
:{validator:l,value:null},resultHighlighter:{setter:"_setResultHighlighter",value:null},resultListLocator:{setter:"_setLocator",value:null},results:{readOnly:!0,value:[]},resultTextLocator:{setter:"_setLocator",value:null},source:{setter:"_setSource",value:null},sourceType:{value:null},tokenInput:{readOnly:!0},value:{value:""}},T._buildCfg={aggregates:["SOURCE_TYPES"],statics:["UI_SRC"]},T.SOURCE_TYPES={array:"_createArraySource","function":"_createFunctionSource",object:"_createObjectSource"},T.UI_SRC=e.Widget&&e.Widget.UI_SRC||"ui",e.AutoCompleteBase=T},"3.18.1",{optional:["autocomplete-sources"],requires:["array-extras","base-build","escape","event-valuechange","node-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-sources",function(e,t){var n=e.AutoCompleteBase,r=e.Lang,i="_sourceSuccess",s="maxResults",o="requestTemplate",u="resultListLocator";e.mix(n.prototype,{_YQL_SOURCE_REGEX:/^(?:select|set|use)\s+/i,_beforeCreateObjectSource:function(t){return t instanceof e.Node&&t.get("nodeName").toLowerCase()==="select"?this._createSelectSource(t):e.JSONPRequest&&t instanceof e.JSONPRequest?this._createJSONPSource(t):this._createObjectSource(t)},_createIOSource:function(t){function a(n){var o=n.request;if(r._cache&&o in r._cache){r[i](r._cache[o],n);return}s&&s.isInProgress()&&s.abort(),s=e.io(r._getXHRUrl(t,n),{on:{success:function(t,s){var u;try{u=e.JSON.parse(s.responseText)}catch(a){e.error("JSON parse error",a)}u&&(r._cache&&(r._cache[o]=u),r[i](u,n))}}})}var n={type:"io"},r=this,s,o,u;return n.sendRequest=function(t){o=t;if(u)return;u=!0,e.use("io-base","json-parse",function(){n.sendRequest=a,a(o)})},n},_createJSONPSource:function(t){function u(e){var n=e.request,s=e.query;if(r._cache&&n in r._cache){r[i](r._cache[n],e);return}t._config.on.success=function(t){r._cache&&(r._cache[n]=t),r[i](t,e)},t.send(s)}var n={type:"jsonp"},r=this,s,o;return n.sendRequest=function(i){s=i;if(o)return;o=!0,e.use("jsonp",function(){t instanceof e.JSONPRequest||(t=new e.JSONPRequest(t,{format:e.bind(r._jsonpFormatter,r)})),n.sendRequest=u,u(s)})},n},_createSelectSource:function(e){var t=this;return{type:"select",sendRequest:function(n){var r=[];e.get("options").each(function(e){r.push({html:e.get("innerHTML"),index:e.get("index"),node:e,selected:e.get("selected"),text:e.get("text"),value:e.get("value")})}),t[i](r,n)}}},_createStringSource:function(e){return this._YQL_SOURCE_REGEX.test(e)?this._createYQLSource(e):e.indexOf("{callback}")!==-1?this._createJSONPSource(e):this._createIOSource(e)},_createYQLSource:function(t){function c(o){var u=o.query,a=n.get("yqlEnv"),f=n.get(s),c,h,p;p=r.sub(t,{maxResults:f>0?f:1e3,request:o.request,query:u});if(n._cache&&p in n._cache){n[i](n._cache[p],o);return}c=function(e){n._cache&&(n._cache[p]=e),n[i](e,o)},h={proto:n.get("yqlProtocol")},l?(l._callback=c,l._opts=h,l._params.q=p,a&&(l._params.env=a)):l=new e.YQLRequest(p,{on:{success:c},allowCache:!1},a?{env:a}:null,h),l.send()}var n=this,o={type:"yql"},a,f,l;return n.get(u)||n.set(u,n._defaultYQLLocator),o.sendRequest=function(t){a=t,f||(f=!0,e.use("yql",function(){o.sendRequest=c,c(a)}))},o},_defaultYQLLocator:function(t){var n=t&&t.query&&t.query.results,i;return n&&r.isObject(n)?(i=e.Object.values(n)||[],n=i.length===1?i[0]:i,r.isArray(n)||(n=[n])):n=[],n},_getXHRUrl:function(e,t){var n=this.get(s);return t.query!==t.request&&(e+=t.request),r.sub(e,{maxResults:n>0?n:1e3,query:encodeURIComponent(t.query)})},_jsonpFormatter:function(e,t,n){var i=this.get(s),u=this.get(o);return u&&(e+=u(n)),r.sub(e,{callback:t,maxResults:i>0?i:1e3,query:encodeURIComponent(n)})}}),e.mix(n.ATTRS,{yqlEnv:{value:null},yqlProtocol:{value:"http"}}),e.mix(n.SOURCE_TYPES,{io:"_createIOSource",jsonp:"_createJSONPSource",object:"_beforeCreateObjectSource",select:"_createSelectSource",string:"_createStringSource",yql:"_createYQLSource"},!0)},"3.18.1",{optional:["io-base","json-parse","jsonp","yql"],requires:["autocomplete-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("lang/autocomplete-list_en",function(e){e.Intl.add("autocomplete-list","en",{item_selected:"{item} selected.",items_available:"Suggestions are available. Use up and down arrows to select."})},"3.18.1");
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("selector-css2",function(e,t){var n="parentNode",r="tagName",i="attributes",s="combinator",o="pseudos",u=e.Selector,a={_reRegExpTokens:/([\^\$\?\[\]\*\+\-\.\(\)\|\\])/,SORT_RESULTS:!0,_isXML:function(){var t=e.config.doc.createElement("div").tagName!=="DIV";return t}(),shorthand:{"\\#(-?[_a-z0-9]+[-\\w\\uE000]*)":"[id=$1]","\\.(-?[_a-z]+[-\\w\\uE000]*)":"[className~=$1]"},operators:{"":function(t,n){return e.DOM.getAttribute(t,n)!==""},"~=":"(?:^|\\s+){val}(?:\\s+|$)","|=":"^{val}-?"},pseudos:{"first-child":function(t){return e.DOM._children(t[n])[0]===t}},_bruteQuery:function(t,n,r){var i=[],s=[],o,a=u._tokenize(t),f=a[a.length-1],l=e.DOM._getDoc(n),c,h,p,d,v;if(f){h=f.id,p=f.className,d=f.tagName||"*";if(n.getElementsByTagName)h&&(n.all||n.nodeType===9||e.DOM.inDoc(n))?s=e.DOM.allById(h,n):p?s=n.getElementsByClassName(p):s=n.getElementsByTagName(d);else{o=[],c=n.firstChild,v=d==="*";while(c){while(c)c.tagName>"@"&&(v||c.tagName===d)&&s.push(c),o.push(c),c=c.firstChild;while(o.length>0&&!c)c=o.pop().nextSibling}}s.length&&(i=u._filterNodes(s,a,r))}return i},_filterNodes:function(t,n,r){var i=0,s,o=n.length,a=o-1,f=[],l=t[0],c=l,h=e.Selector.getters,p,d,v,m,g,y,b,w;for(i=0;c=l=t[i++];){a=o-1,m=null;e:while(c&&c.tagName){v=n[a],b=v.tests,s=b.length;if(s&&!g)while(w=b[--s]){p=w[1],h[w[0]]?y=h[w[0]](c,w[0]):(y=c[w[0]],w[0]==="tagName"&&!u._isXML&&(y=y.toUpperCase()),typeof y!="string"&&y!==undefined&&y.toString?y=y.toString():y===undefined&&c.getAttribute&&(y=c.getAttribute(w[0],2)));if(p==="="&&y!==w[2]||typeof p!="string"&&p.test&&!p.test(y)||!p.test&&typeof p=="function"&&!p(c,w[0],w[2])){if(c=c[m])while(c&&(!c.tagName||v.tagName&&v.tagName!==c.tagName))c=c[m];continue e}}a--;if(!!g||!(d=v.combinator)){f.push(l);if(r)return f;break}m=d.axis,c=c[m];while(c&&!c.tagName)c=c[m];d.direct&&(m=null)}}return l=c=null,f},combinators:{" ":{axis:"parentNode"},">":{axis:"parentNode",direct:!0},"+":{axis:"previousSibling",direct:!0}},_parsers:[{name:i,re:/^\uE003(-?[a-z]+[\w\-]*)+([~\|\^\$\*!=]=?)?['"]?([^\uE004'"]*)['"]?\uE004/i,fn:function(t,n){var r=t[2]||"",i=u.operators,s=t[3]?t[3].replace(/\\/g,""):"",o;if(t[1]==="id"&&r==="="||t[1]==="className"&&e.config.doc.documentElement.getElementsByClassName&&(r==="~="||r==="="))n.prefilter=t[1],t[3]=s,n[t[1]]=t[1]==="id"?t[3]:s;r in i&&(o=i[r],typeof o=="string"&&(t[3]=s.replace(u._reRegExpTokens,"\\$1"),o=new RegExp(o.replace("{val}",t[3]))),t[2]=o);if(!n.last||n.prefilter!==t[1])return t.slice(1)}},{name:r,re:/^((?:-?[_a-z]+[\w-]*)|\*)/i,fn:function(e,t){var n=e[1];u._isXML||(n=n.toUpperCase()),t.tagName=n;if(n!=="*"&&(!t.last||t.prefilter))return[r,"=",n];t.prefilter||(t.prefilter="tagName")}},{name:s,re:/^\s*([>+~]|\s)\s*/,fn:function(e,t){}},{name:o,re:/^:([\-\w]+)(?:\uE005['"]?([^\uE005]*)['"]?\uE006)*/i,fn:function(e,t){var n=u[o][e[1]];return n?(e[2]&&(e[2]=e[2].replace(/\\/g,"")),[e[2],n]):!1}}],_getToken:function(e){return{tagName:null,id:null,className:null,attributes:{},combinator:null,tests:[]}},_tokenize:function(t){t=t||"",t=u._parseSelector(e.Lang.trim(t));var n=u._getToken(),r=t,i=[],o=!1,a,f,l,c;e:do{o=!1;for(l=0;c=u._parsers[l++];)if(a=c.re.exec(t)){c.name!==s&&(n.selector=t),t=t.replace(a[0],""),t.length||(n.last=!0),u._attrFilters[a[1]]&&(a[1]=u._attrFilters[a[1]]),f=c.fn(a,n);if(f===!1){o=!1;break e}f&&n.tests.push(f);if(!t.length||c.name===s)i.push(n),n=u._getToken(n),c.name===s&&(n.combinator=e.Selector.combinators[a[1]]);o=!0}}while(o&&t.length);if(!o||t.length)i=[];return i},_replaceMarkers:function(e){return e=e.replace(/\[/g,"\ue003"),e=e.replace(/\]/g,"\ue004"),e=e.replace(/\(/g,"\ue005"),e=e.replace(/\)/g,"\ue006"),e},_replaceShorthand:function(t){var n=e.Selector.shorthand,r;for(r in n)n.hasOwnProperty(r)&&(t=t.replace(new RegExp(r,"gi"),n[r]));return t},_parseSelector:function(t){var n=e.Selector._replaceSelector(t),t=n.selector;return t=e.Selector._replaceShorthand(t),t=e.Selector._restore("attr",t,n.attrs),t=e.Selector._restore("pseudo",t,n.pseudos),t=e.Selector._replaceMarkers(t),t=e.Selector._restore("esc",t,n.esc),t},_attrFilters:{"class":"className","for":"htmlFor"},getters:{href:function(t,n){return e.DOM.getAttribute(t,n)},id:function(t,n){return e.DOM.getId(t)}}};e.mix(e.Selector,a,!0),e.Selector.getters.src=e.Selector.getters.rel=e.Selector.getters.href,e.Selector.useNative&&e.config.doc.querySelector&&(e.Selector.shorthand["\\.(-?[_a-z]+[-\\w]*)"]="[class~=$1]")},"3.18.1",{requires:["selector-native"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("selector-css3",function(e,t){e.Selector._reNth=/^(?:([\-]?\d*)(n){1}|(odd|even)$)*([\-+]?\d*)$/,e.Selector._getNth=function(t,n,r,i){e.Selector._reNth.test(n);var s=parseInt(RegExp.$1,10),o=RegExp.$2,u=RegExp.$3,a=parseInt(RegExp.$4,10)||0,f=[],l=e.DOM._children(t.parentNode,r),c;u?(s=2,c="+",o="n",a=u==="odd"?1:0):isNaN(s)&&(s=o?1:0);if(s===0)return i&&(a=l.length-a+1),l[a-1]===t?!0:!1;s<0&&(i=!!i,s=Math.abs(s));if(!i){for(var h=a-1,p=l.length;h<p;h+=s)if(h>=0&&l[h]===t)return!0}else for(var h=l.length-a,p=l.length;h>=0;h-=s)if(h<p&&l[h]===t)return!0;return!1},e.mix(e.Selector.pseudos,{root:function(e){return e===e.ownerDocument.documentElement},"nth-child":function(t,n){return e.Selector._getNth(t,n)},"nth-last-child":function(t,n){return e.Selector._getNth(t,n,null,!0)},"nth-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName)},"nth-last-of-type":function(t,n){return e.Selector._getNth(t,n,t.tagName,!0)},"last-child":function(t){var n=e.DOM._children(t.parentNode);return n[n.length-1]===t},"first-of-type":function(t){return e.DOM._children(t.parentNode,t.tagName)[0]===t},"last-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n[n.length-1]===t},"only-child":function(t){var n=e.DOM._children(t.parentNode);return n.length===1&&n[0]===t},"only-of-type":function(t){var n=e.DOM._children(t.parentNode,t.tagName);return n.length===1&&n[0]===t},empty:function(e){return e.childNodes.length===0},not:function(t,n){return!e.Selector.test(t,n)},contains:function(e,t){var n=e.innerText||e.textContent||"";return n.indexOf(t)>-1},checked:function(e){return e.checked===!0||e.selected===!0},enabled:function(e){return e.disabled!==undefined&&!e.disabled},disabled:function(e){return e.disabled}}),e.mix(e.Selector.operators,{"^=":"^{val}","$=":"{val}$","*=":"{val}"}),e.Selector.combinators["~"]={axis:"previousSibling"}},"3.18.1",{requires:["selector-native","selector-css2"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("shim-plugin",function(e,t){function n(e){this.init(e)}n.CLASS_NAME="yui-node-shim",n.TEMPLATE='<iframe class="'+n.CLASS_NAME+'" frameborder="0" title="Node Stacking Shim"'+'src="javascript:false" tabindex="-1" role="presentation"'+'style="position:absolute; z-index:-1;"></iframe>',n.prototype={init:function(e){this._host=e.host,this.initEvents(),this.insert(),this.sync()},initEvents:function(){this._resizeHandle=this._host.on("resize",this.sync,this)},getShim:function(){return this._shim||(this._shim=e.Node.create(n.TEMPLATE,this._host.get("ownerDocument")))},insert:function(){var e=this._host;this._shim=e.insertBefore(this.getShim(),e.get("firstChild"))},sync:function(){var e=this._shim,t=this._host;e&&e.setAttrs({width:t.getStyle("width"),height:t.getStyle("height")})},destroy:function(){var e=this._shim;e&&e.remove(!0),this._resizeHandle.detach()}},n.NAME="Shim",n.NS="shim",e.namespace("Plugin"),e.Plugin.Shim=n},"3.18.1",{requires:["node-style","node-pluginhost"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("attribute-complex",function(e,t){var n=e.Attribute;n.Complex=function(){},n.Complex.prototype={_normAttrVals:n.prototype._normAttrVals,_getAttrInitVal:n.prototype._getAttrInitVal},e.AttributeComplex=n.Complex},"3.18.1",{requires:["attribute-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("classnamemanager",function(e,t){var n="classNamePrefix",r="classNameDelimiter",i=e.config;i[n]=i[n]||"yui3",i[r]=i[r]||"-",e.ClassNameManager=function(){var t=i[n],s=i[r];return{getClassName:e.cached(function(){var n=e.Array(arguments);return n[n.length-1]!==!0?n.unshift(t):n.pop(),n.join(s)})}}()},"3.18.1",{requires:["yui-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-base",function(e,t){function R(e){var t=this,n,r,i=t.constructor;t._strs={},t._cssPrefix=i.CSS_PREFIX||s(i.NAME.toLowerCase()),e=e||{},R.superclass.constructor.call(t,e),r=t.get(T),r&&(r!==P&&(n=r),t.render(n))}var n=e.Lang,r=e.Node,i=e.ClassNameManager,s=i.getClassName,o,u=e.cached(function(e){return e.substring(0,1).toUpperCase()+e.substring(1)}),a="content",f="visible",l="hidden",c="disabled",h="focused",p="width",d="height",v="boundingBox",m="contentBox",g="parentNode",y="ownerDocument",b="auto",w="srcNode",E="body",S="tabIndex",x="id",T="render",N="rendered",C="destroyed",k="strings",L="<div></div>",A="Change",O="loading",M="_uiSet",_="",D=function(){},P=!0,H=!1,B,j={},F=[f,c,d,p,h,S],I=e.UA.webkit,q={};R.NAME="widget",B=R.UI_SRC="ui",R.ATTRS=j,j[x]={valueFn:"_guid",writeOnce:P},j[N]={value:H,readOnly:P},j[v]={valueFn:"_defaultBB",setter:"_setBB",writeOnce:P},j[m]={valueFn:"_defaultCB",setter:"_setCB",writeOnce:P},j[S]={value:null,validator:"_validTabIndex"},j[h]={value:H,readOnly:P},j[c]={value:H},j[f]={value:P},j[d]={value:_},j[p]={value:_},j[k]={value:{},setter:"_strSetter",getter:"_strGetter"},j[T]={value:H,writeOnce:P},R.CSS_PREFIX=s(R.NAME.toLowerCase()),R.getClassName=function(){return s.apply(i,[R.CSS_PREFIX].concat(e.Array(arguments),!0))},o=R.getClassName,R.getByNode=function(t){var n,i=o();return t=r.one(t),t&&(t=t.ancestor("."+i,!0),t&&(n=q[e.stamp(t,!0)])),n||null},e.extend(R,e.Base,{getClassName:function(){return s.apply(i,[this._cssPrefix].concat(e.Array(arguments),!0))},initializer:function(t){var n=this.get(v);n instanceof r&&this._mapInstance(e.stamp(n))},_mapInstance:function(e){q[e]=this},destructor:function(){var t=this.get(v),n;t instanceof r&&(n=e.stamp(t,!0),n in q&&delete q[n],this._destroyBox())},destroy:function(e){return this._destroyAllNodes=e,R.superclass.destroy.apply(this)},_destroyBox:function(){var e=this.get(v),t=this.get(m),n=this._destroyAllNodes,r;r=e&&e.compareTo(t),this.UI_EVENTS&&this._destroyUIEvents(),this._unbindUI(e),t&&(n&&t.empty(),t.remove(P)),r||(n&&e.empty(),e.remove(P))},render:function(e){return!this.get(C)&&!this.get(N)&&(this.publish(T,{queuable:H,fireOnce:P,defaultTargetOnly:P,defaultFn:this._defRenderFn}),this.fire(T,{parentNode:e?r.one(e):null})),this},_defRenderFn:function(e){this._parentNode=e.parentNode,this.renderer(),this._set(N,P),this._removeLoadingClassNames()},renderer:function(){var e=this;e._renderUI(),e.renderUI(),e._bindUI(),e.bindUI(),e._syncUI(),e.syncUI()},bindUI:D,renderUI:D,syncUI:D,hide:function(){return this.set(f,H)},show:function(){return this.set(f,P)},focus:function(){return this._set(h,P)},blur:function(){return this._set(h,H)},enable:function(){return this.set(c,H)},disable:function(){return this.set(c,P)},_uiSizeCB:function(e){this.get(m).toggleClass(o(a,"expanded"),e)},_renderBox:function(e){var t=this,n=t.get(m),i=t.get(v),s=t.get(w),o=t.DEF_PARENT_NODE,u=s&&s.get(y)||i.get(y)||n.get(y);s&&!s.compareTo(n)&&!n.inDoc(u)&&s.replace(n),!i.compareTo(n.get(g))&&!i.compareTo(n)&&(n.inDoc(u)&&n.replace(i),i.appendChild(n)),e=e||o&&r.one(o),e?e.appendChild(i):i.inDoc(u)||r.one(E).insert(i,0)},_setBB:function(e){return this._setBox(this.get(x),e,this.BOUNDING_TEMPLATE,!0)},_setCB:function(e){return this.CONTENT_TEMPLATE===null?this.get(v):this._setBox(null,e,this.CONTENT_TEMPLATE,!1)},_defaultBB:function(){var e=this.get(w),t=this.CONTENT_TEMPLATE===null;return e&&t?e:null},_defaultCB:function(e){return this.get(w)||null},_setBox:function(t,n,i,s){return n=r.one(n),n||(n=r.create(i),s?this._bbFromTemplate=!0:this._cbFromTemplate=!0),n.get(x)||n.set(x,t||e.guid()),n},_renderUI:function(){this._renderBoxClassNames(),this._renderBox(this._parentNode)},_renderBoxClassNames:function(){var e=this._getClasses(),t,n=this.get(v),r;n.addClass(o());for(r=e.length-3;r>=0;r--)t=e[r],n.addClass(t.CSS_PREFIX||s(t.NAME.toLowerCase()));this.get(m).addClass(this.getClassName(a))},_removeLoadingClassNames:function(){var e=this.get(v),t=this.get(m),n=this.getClassName(O),r=o(O);e.removeClass(r).removeClass(n),t.removeClass(r).removeClass(n)},_bindUI:function(){this._bindAttrUI(this._UI_ATTRS.BIND),this._bindDOM()},_unbindUI:function(e){this._unbindDOM(e)},_bindDOM:function(){var t=this.get(v).get(y),n=R._hDocFocus;n||(n=R._hDocFocus=t.on("focus",this._onDocFocus,this),n.listeners={count:0}),n.listeners[e.stamp(this,!0)]=!0,n.listeners.count++,I&&(this._hDocMouseDown=t.on("mousedown",this._onDocMouseDown,this))},_unbindDOM:function(t){var n=R._hDocFocus,r=e.stamp(this,!0),i,s=this._hDocMouseDown;n&&(i=n.listeners,i[r]&&(delete i[r],i.count--),i.count===0&&(n.detach(),R._hDocFocus=null)),I&&s&&s.detach()},_syncUI:function(){this._syncAttrUI(this._UI_ATTRS.SYNC)},_uiSetHeight:function(e){this._uiSetDim(d,e),this._uiSizeCB(e!==_&&e!==b)},_uiSetWidth:function(e){this._uiSetDim(p,e)},_uiSetDim:function(e,t){this.get(v).setStyle(e,n.isNumber(t)?t+this.DEF_UNIT:t)},_uiSetVisible:function(e){this.get(v).toggleClass(this.getClassName(l),!e)},_uiSetDisabled:function(e){this.get(v).toggleClass(this.getClassName(c),e)},_uiSetFocused:function(e,t){var n=this.get(v);n.toggleClass(this.getClassName(h),e),t!==B&&(e?n.focus():n.blur())},_uiSetTabIndex:function(e){var t=this.get(v);n.isNumber(e)?t.set(S,e):t.removeAttribute(S)},_onDocMouseDown:function(e){this._domFocus&&this._onDocFocus(e)},_onDocFocus:function(e){var t=R.getByNode(e.target),n=R._active;n&&n!==t&&(n._domFocus=!1,n._set(h,!1,{src:B}),R._active=null),t&&(t._domFocus=!0,t._set(h,!0,{src:B}),R._active=t)},toString:function(){return this.name+"["+this.get(x)+"]"},DEF_UNIT:"px",DEF_PARENT_NODE:null,CONTENT_TEMPLATE:L,BOUNDING_TEMPLATE:L,_guid:function(){return e.guid()},_validTabIndex:function(e){return n.isNumber(e)||n.isNull(e)},_bindAttrUI:function(e){var t,n=e.length;for(t=0;t<n;t++)this.after(e[t]+A,this._setAttrUI)},_syncAttrUI:function(e){var t,n=e.length,r;for(t=0;t<n;t++)r=e[t],this[M+u(r)](this.get(r))},_setAttrUI:function(e){e.target===this&&this[M+u(e.attrName
)](e.newVal,e.src)},_strSetter:function(t){return e.merge(this.get(k),t)},getString:function(e){return this.get(k)[e]},getStrings:function(){return this.get(k)},_UI_ATTRS:{BIND:F,SYNC:F}}),e.Widget=R},"3.18.1",{requires:["attribute","base-base","base-pluginhost","classnamemanager","event-focus","node-base","node-style"],skinnable:!0});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-htmlparser",function(e,t){var n=e.Widget,r=e.Node,i=e.Lang,s="srcNode",o="contentBox";n.HTML_PARSER={},n._buildCfg={aggregates:["HTML_PARSER"]},n.ATTRS[s]={value:null,setter:r.one,getter:"_getSrcNode",writeOnce:!0},e.mix(n.prototype,{_getSrcNode:function(e){return e||this.get(o)},_preAddAttrs:function(e,t,n){var r={id:e.id,boundingBox:e.boundingBox,contentBox:e.contentBox,srcNode:e.srcNode};this.addAttrs(r,t,n),delete e.boundingBox,delete e.contentBox,delete e.srcNode,delete e.id,this._applyParser&&this._applyParser(t)},_applyParsedConfig:function(t,n,r){return r?e.mix(n,r,!1):n},_applyParser:function(t){var n=this,r=this._getNodeToParse(),s=n._getHtmlParser(),o,u;s&&r&&e.Object.each(s,function(e,t,s){u=null,i.isFunction(e)?u=e.call(n,r):i.isArray(e)?(u=r.all(e[0]),u.isEmpty()&&(u=null)):u=r.one(e),u!==null&&u!==undefined&&(o=o||{},o[t]=u)}),t=n._applyParsedConfig(r,t,o)},_getNodeToParse:function(){var e=this.get("srcNode");return this._cbFromTemplate?null:e},_getHtmlParser:function(){var t=this._getClasses(),n={},r,i;for(r=t.length-1;r>=0;r--)i=t[r].HTML_PARSER,i&&e.mix(n,i,!0);return n}})},"3.18.1",{requires:["widget-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-skin",function(e,t){var n="boundingBox",r="contentBox",i="skin",s=e.ClassNameManager.getClassName;e.Widget.prototype.getSkinName=function(e){var t=this.get(r)||this.get(n),o,u;return e=e||s(i,""),u=new RegExp("\\b"+e+"(\\S+)"),t&&t.ancestor(function(e){return o=e.get("className").match(u),o}),o?o[1]:null}},"3.18.1",{requires:["widget-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-uievents",function(e,t){var n="boundingBox",r=e.Widget,i="render",s=e.Lang,o=":",u=e.Widget._uievts=e.Widget._uievts||{};e.mix(r.prototype,{_destroyUIEvents:function(){var t=e.stamp(this,!0);e.each(u,function(n,r){n.instances[t]&&(delete n.instances[t],e.Object.isEmpty(n.instances)&&(n.handle.detach(),u[r]&&delete u[r]))})},UI_EVENTS:e.Node.DOM_EVENTS,_getUIEventNode:function(){return this.get(n)},_createUIEvent:function(t){var n=this._getUIEventNode(),i=e.stamp(n)+t,s=u[i],o;s||(o=n.delegate(t,function(e){var t=r.getByNode(this);t&&t._filterUIEvent(e)&&t.fire(e.type,{domEvent:e})},"."+e.Widget.getClassName()),u[i]=s={instances:{},handle:o}),s.instances[e.stamp(this)]=1},_filterUIEvent:function(e){return e.currentTarget.compareTo(e.container)||e.container.compareTo(this._getUIEventNode())},_getUIEvent:function(e){if(s.isString(e)){var t=this.parseType(e)[1],n,r;return t&&(n=t.indexOf(o),n>-1&&(t=t.substring(n+o.length)),this.UI_EVENTS[t]&&(r=t)),r}},_initUIEvent:function(e){var t=this._getUIEvent(e),n=this._uiEvtsInitQueue||{};t&&!n[t]&&(this._uiEvtsInitQueue=n[t]=1,this.after(i,function(){this._createUIEvent(t),delete this._uiEvtsInitQueue[t]}))},on:function(e){return this._initUIEvent(e),r.superclass.on.apply(this,arguments)},publish:function(e,t){var n=this._getUIEvent(e);return n&&t&&t.defaultFn&&this._initUIEvent(n),r.superclass.publish.apply(this,arguments)}},!0)},"3.18.1",{requires:["node-event-delegate","widget-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-position",function(e,t){function d(e){}var n=e.Lang,r=e.Widget,i="xy",s="position",o="positioned",u="boundingBox",a="relative",f="renderUI",l="bindUI",c="syncUI",h=r.UI_SRC,p="xyChange";d.ATTRS={x:{setter:function(e){this._setX(e)},getter:function(){return this._getX()},lazyAdd:!1},y:{setter:function(e){this._setY(e)},getter:function(){return this._getY()},lazyAdd:!1},xy:{value:[0,0],validator:function(e){return this._validateXY(e)}}},d.POSITIONED_CLASS_NAME=r.getClassName(o),d.prototype={initializer:function(){this._posNode=this.get(u),e.after(this._renderUIPosition,this,f),e.after(this._syncUIPosition,this,c),e.after(this._bindUIPosition,this,l)},_renderUIPosition:function(){this._posNode.addClass(d.POSITIONED_CLASS_NAME)},_syncUIPosition:function(){var e=this._posNode;e.getStyle(s)===a&&this.syncXY(),this._uiSetXY(this.get(i))},_bindUIPosition:function(){this.after(p,this._afterXYChange)},move:function(){var e=arguments,t=n.isArray(e[0])?e[0]:[e[0],e[1]];this.set(i,t)},syncXY:function(){this.set(i,this._posNode.getXY(),{src:h})},_validateXY:function(e){return n.isArray(e)&&n.isNumber(e[0])&&n.isNumber(e[1])},_setX:function(e){this.set(i,[e,this.get(i)[1]])},_setY:function(e){this.set(i,[this.get(i)[0],e])},_getX:function(){return this.get(i)[0]},_getY:function(){return this.get(i)[1]},_afterXYChange:function(e){e.src!=h&&this._uiSetXY(e.newVal)},_uiSetXY:function(e){this._posNode.setXY(e)}},e.WidgetPosition=d},"3.18.1",{requires:["base-build","node-screen","widget"]});
