/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-position-align",function(e,t){function c(e){}var n=e.Lang,r="align",i="alignOn",s="visible",o="boundingBox",u="offsetWidth",a="offsetHeight",f="region",l="viewportRegion";c.ATTRS={align:{value:null},centered:{setter:"_setAlignCenter",lazyAdd:!1,value:!1},alignOn:{value:[],validator:e.Lang.isArray}},c.TL="tl",c.TR="tr",c.BL="bl",c.BR="br",c.TC="tc",c.RC="rc",c.BC="bc",c.LC="lc",c.CC="cc",c.prototype={initializer:function(){this._posNode||e.error("WidgetPosition needs to be added to the Widget, before WidgetPositionAlign is added"),e.after(this._bindUIPosAlign,this,"bindUI"),e.after(this._syncUIPosAlign,this,"syncUI")},_posAlignUIHandles:null,destructor:function(){this._detachPosAlignUIHandles()},_bindUIPosAlign:function(){this.after("alignChange",this._afterAlignChange),this.after("alignOnChange",this._afterAlignOnChange),this.after("visibleChange",this._syncUIPosAlign)},_syncUIPosAlign:function(){var e=this.get(r);this._uiSetVisiblePosAlign(this.get(s)),e&&this._uiSetAlign(e.node,e.points)},align:function(e,t){return arguments.length?this.set(r,{node:e,points:t}):this._syncUIPosAlign(),this},centered:function(e){return this.align(e,[c.CC,c.CC])},_setAlignCenter:function(e){return e&&this.set(r,{node:e===!0?null:e,points:[c.CC,c.CC]}),e},_uiSetAlign:function(t,r){if(!n.isArray(r)||r.length!==2){e.error("align: Invalid Points Arguments");return}var i=this._getRegion(t),s,o,u;if(!i)return;s=r[0],o=r[1];switch(o){case c.TL:u=[i.left,i.top];break;case c.TR:u=[i.right,i.top];break;case c.BL:u=[i.left,i.bottom];break;case c.BR:u=[i.right,i.bottom];break;case c.TC:u=[i.left+Math.floor(i.width/2),i.top];break;case c.BC:u=[i.left+Math.floor(i.width/2),i.bottom];break;case c.LC:u=[i.left,i.top+Math.floor(i.height/2)];break;case c.RC:u=[i.right,i.top+Math.floor(i.height/2)];break;case c.CC:u=[i.left+Math.floor(i.width/2),i.top+Math.floor(i.height/2)];break;default:}u&&this._doAlign(s,u[0],u[1])},_uiSetVisiblePosAlign:function(e){e?this._attachPosAlignUIHandles():this._detachPosAlignUIHandles()},_attachPosAlignUIHandles:function(){if(this._posAlignUIHandles)return;var t=this.get(o),n=e.bind(this._syncUIPosAlign,this),r=[];e.Array.each(this.get(i),function(i){var s=i.eventName,o=e.one(i.node)||t;s&&r.push(o.on(s,n))}),this._posAlignUIHandles=r},_detachPosAlignUIHandles:function(){var t=this._posAlignUIHandles;t&&((new e.EventHandle(t)).detach(),this._posAlignUIHandles=null)},_doAlign:function(e,t,n){var r=this._posNode,i;switch(e){case c.TL:i=[t,n];break;case c.TR:i=[t-r.get(u),n];break;case c.BL:i=[t,n-r.get(a)];break;case c.BR:i=[t-r.get(u),n-r.get(a)];break;case c.TC:i=[t-r.get(u)/2,n];break;case c.BC:i=[t-r.get(u)/2,n-r.get(a)];break;case c.LC:i=[t,n-r.get(a)/2];break;case c.RC:i=[t-r.get(u),n-r.get(a)/2];break;case c.CC:i=[t-r.get(u)/2,n-r.get(a)/2];break;default:}i&&this.move(i)},_getRegion:function(t){var n;return t?(t=e.Node.one(t),t&&(n=t.get(f))):n=this._posNode.get(l),n},_afterAlignChange:function(e){var t=e.newVal;t&&this._uiSetAlign(t.node,t.points)},_afterAlignOnChange:function(e){this._detachPosAlignUIHandles(),this.get(s)&&this._attachPosAlignUIHandles()}},e.WidgetPositionAlign=c},"3.18.1",{requires:["widget-position"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-list",function(e,t){var n=e.Lang,r=e.Node,i=e.Array,s=e.UA.ie&&e.UA.ie<7,o=9,u="_CLASS_ITEM",a="_CLASS_ITEM_ACTIVE",f="_CLASS_ITEM_HOVER",l="_SELECTOR_ITEM",c="activeItem",h="alwaysShowList",p="circular",d="hoveredItem",v="id",m="item",g="list",y="result",b="results",w="visible",E="width",S="select",x=e.Base.create("autocompleteList",e.Widget,[e.AutoCompleteBase,e.WidgetPosition,e.WidgetPositionAlign],{ARIA_TEMPLATE:"<div/>",ITEM_TEMPLATE:"<li/>",LIST_TEMPLATE:"<ul/>",UI_EVENTS:function(){var t=e.merge(e.Node.DOM_EVENTS);return delete t.valuechange,delete t.valueChange,t}(),initializer:function(){var t=this.get("inputNode");if(!t){e.error("No inputNode specified.");return}this._inputNode=t,this._listEvents=[],this.DEF_PARENT_NODE=t.get("parentNode"),this[u]=this.getClassName(m),this[a]=this.getClassName(m,"active"),this[f]=this.getClassName(m,"hover"),this[l]="."+this[u],this.publish(S,{defaultFn:this._defSelectFn})},destructor:function(){while(this._listEvents.length)this._listEvents.pop().detach();this._ariaNode&&this._ariaNode.remove().destroy(!0)},bindUI:function(){this._bindInput(),this._bindList()},renderUI:function(){var t=this._createAriaNode(),n=this.get("boundingBox"),r=this.get("contentBox"),i=this._inputNode,o=this._createListNode(),u=i.get("parentNode");i.addClass(this.getClassName("input")).setAttrs({"aria-autocomplete":g,"aria-expanded":!1,"aria-owns":o.get("id")}),u.append(t),s&&n.plug(e.Plugin.Shim),this._ariaNode=t,this._boundingBox=n,this._contentBox=r,this._listNode=o,this._parentNode=u},syncUI:function(){this._syncResults(),this._syncVisibility()},hide:function(){return this.get(h)?this:this.set(w,!1)},selectItem:function(e,t){if(e){if(!e.hasClass(this[u]))return this}else{e=this.get(c);if(!e)return this}return this.fire(S,{itemNode:e,originEvent:t||null,result:e.getData(y)}),this},_activateNextItem:function(){var e=this.get(c),t;return e?t=e.next(this[l])||(this.get(p)?null:e):t=this._getFirstItemNode(),this.set(c,t),this},_activatePrevItem:function(){var e=this.get(c),t=e?e.previous(this[l]):this.get(p)&&this._getLastItemNode();return this.set(c,t||null),this},_add:function(t){var r=[];return i.each(n.isArray(t)?t:[t],function(e){r.push(this._createItemNode(e).setData(y,e))},this),r=e.all(r),this._listNode.append(r.toFrag()),r},_ariaSay:function(e,t){var r=this.get("strings."+e);this._ariaNode.set("text",t?n.sub(r,t):r)},_bindInput:function(){var e=this._inputNode,t,n,r;this.get("align")===null&&(r=this.get("tokenInput"),t=r&&r.get("boundingBox")||e,this.set("align",{node:t,points:["tl","bl"]}),!this.get(E)&&(n=t.get("offsetWidth"))&&this.set(E,n)),this._listEvents=this._listEvents.concat([e.after("blur",this._afterListInputBlur,this),e.after("focus",this._afterListInputFocus,this)])},_bindList:function(){this._listEvents=this._listEvents.concat([e.one("doc").after("click",this._afterDocClick,this),e.one("win").after("windowresize",this._syncPosition,this),this.after({mouseover:this._afterMouseOver,mouseout:this._afterMouseOut,activeItemChange:this._afterActiveItemChange,alwaysShowListChange:this._afterAlwaysShowListChange,hoveredItemChange:this._afterHoveredItemChange,resultsChange:this._afterResultsChange,visibleChange:this._afterVisibleChange}),this._listNode.delegate("click",this._onItemClick,this[l],this)])},_clear:function(){this.set(c,null),this._set(d,null),this._listNode.get("children").remove(!0)},_createAriaNode:function(){var e=r.create(this.ARIA_TEMPLATE);return e.addClass(this.getClassName("aria")).setAttrs({"aria-live":"polite",role:"status"})},_createItemNode:function(t){var n=r.create(this.ITEM_TEMPLATE);return n.addClass(this[u]).setAttrs({id:e.stamp(n),role:"option"}).setAttribute("data-text",t.text).append(t.display)},_createListNode:function(){var t=this.get("listNode")||r.create(this.LIST_TEMPLATE);return t.addClass(this.getClassName(g)).setAttrs({id:e.stamp(t),role:"listbox"}),this._set("listNode",t),this.get("contentBox").append(t),t},_getFirstItemNode:function(){return this._listNode.one(this[l])},_getLastItemNode:function(){return this._listNode.one(this[l]+":last-child")},_syncPosition:function(){this._syncUIPosAlign(),this._syncShim()},_syncResults:function(e){e||(e=this.get(b)),this._clear(),e.length&&(this._add(e),this._ariaSay("items_available")),this._syncPosition(),this.get("activateFirstItem")&&!this.get(c)&&this.set(c,this._getFirstItemNode())},_syncShim:s?function(){var e=this._boundingBox.shim;e&&e.sync()}:function(){},_syncVisibility:function(t){this.get(h)&&(t=!0,this.set(w,t)),typeof t=="undefined"&&(t=this.get(w)),this._inputNode.set("aria-expanded",t),this._boundingBox.set("aria-hidden",!t),t?this._syncPosition():(this.set(c,null),this._set(d,null),this._boundingBox.get("offsetWidth")),e.UA.ie===7&&e.one("body").addClass("yui3-ie7-sucks").removeClass("yui3-ie7-sucks")},_afterActiveItemChange:function(t){var n=this._inputNode,r=t.newVal,i=t.prevVal,s;i&&i._node&&i.removeClass(this[a]),r?(r.addClass(this[a]),n.set("aria-activedescendant",r.get(v))):n.removeAttribute("aria-activedescendant"),this.get("scrollIntoView")&&(s=r||n,(!s.inRegion(e.DOM.viewportRegion(),!0)||!s.inRegion(this._contentBox,!0))&&s.scrollIntoView())},_afterAlwaysShowListChange:function(e){this.set(w,e.newVal||this.get(b).length>0)},_afterDocClick:function(e){var t=this._boundingBox,n=e.target;n!==this._inputNode&&n!==t&&!n.ancestor("#"+t.get("id"),!0)&&this.hide()},_afterHoveredItemChange:function(e){var t=e.newVal,n=e.prevVal;n&&n.removeClass(this[f]),t&&t.addClass(this[f])},_afterListInputBlur:function(){this._listInputFocused=!1,this.get(w)&&!this._mouseOverList&&(this._lastInputKey!==o||!this.get("tabSelect")||!this.get(c))&&this.hide()},_afterListInputFocus:function(){this._listInputFocused=!0},_afterMouseOver:function(e){var t=e.domEvent.target.ancestor(this[l],!0);this._mouseOverList=!0,t&&this._set(d,t)},_afterMouseOut:function(){this._mouseOverList=!1,this._set(d,null)},_afterResultsChange:function(e){this._syncResults(e.newVal
),this.get(h)||this.set(w,!!e.newVal.length)},_afterVisibleChange:function(e){this._syncVisibility(!!e.newVal)},_onItemClick:function(e){var t=e.currentTarget;this.set(c,t),this.selectItem(t,e)},_defSelectFn:function(e){var t=e.result.text;this._inputNode.focus(),this._updateValue(t),this._ariaSay("item_selected",{item:t}),this.hide()}},{ATTRS:{activateFirstItem:{value:!1},activeItem:{setter:e.one,value:null},alwaysShowList:{value:!1},circular:{value:!0},hoveredItem:{readOnly:!0,value:null},listNode:{writeOnce:"initOnly",value:null},scrollIntoView:{value:!1},strings:{valueFn:function(){return e.Intl.get("autocomplete-list")}},tabSelect:{value:!0},visible:{value:!1}},CSS_PREFIX:e.ClassNameManager.getClassName("aclist")});e.AutoCompleteList=x,e.AutoComplete=x},"3.18.1",{lang:["en","es","hu","it"],requires:["autocomplete-base","event-resize","node-screen","selector-css3","shim-plugin","widget","widget-position","widget-position-align"],skinnable:!0});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-list-keys",function(e,t){function u(){e.after(this._bindKeys,this,"bindUI"),this._initKeys()}var n=40,r=13,i=27,s=9,o=38;u.prototype={_initKeys:function(){var e={},t={};e[n]=this._keyDown,t[r]=this._keyEnter,t[i]=this._keyEsc,t[s]=this._keyTab,t[o]=this._keyUp,this._keys=e,this._keysVisible=t},destructor:function(){this._unbindKeys()},_bindKeys:function(){this._keyEvents=this._inputNode.on("keydown",this._onInputKey,this)},_unbindKeys:function(){this._keyEvents&&this._keyEvents.detach(),this._keyEvents=null},_keyDown:function(){this.get("visible")?this._activateNextItem():this.show()},_keyEnter:function(e){var t=this.get("activeItem");if(!t)return!1;this.selectItem(t,e)},_keyEsc:function(){this.hide()},_keyTab:function(e){var t;if(this.get("tabSelect")){t=this.get("activeItem");if(t)return this.selectItem(t,e),!0}return!1},_keyUp:function(){this._activatePrevItem()},_onInputKey:function(e){var t,n=e.keyCode;this._lastInputKey=n,this.get("results").length&&(t=this._keys[n],!t&&this.get("visible")&&(t=this._keysVisible[n]),t&&t.call(this,e)!==!1&&e.preventDefault())}},e.Base.mix(e.AutoCompleteList,[u])},"3.18.1",{requires:["autocomplete-list","base-build"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("autocomplete-plugin",function(e,t){function r(e){e.inputNode=e.host,!e.render&&e.render!==!1&&(e.render=!0),r.superclass.constructor.apply(this,arguments)}var n=e.Plugin;e.extend(r,e.AutoCompleteList,{},{NAME:"autocompleteListPlugin",NS:"ac",CSS_PREFIX:e.ClassNameManager.getClassName("aclist")}),n.AutoComplete=r,n.AutoCompleteList=r},"3.18.1",{requires:["autocomplete-list","node-pluginhost"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datasource-local",function(e,t){var n=e.Lang,r=function(){r.superclass.constructor.apply(this,arguments)};e.mix(r,{NAME:"dataSourceLocal",ATTRS:{source:{value:null}},_tId:0,transactions:{},issueCallback:function(e,t){var n=e.on||e.callback,r=n&&n.success,i=e.details[0];i.error=e.error||e.response.error,i.error&&(t.fire("error",i),r=n&&n.failure),r&&r(i)}}),e.extend(r,e.Base,{initializer:function(e){this._initEvents()},_initEvents:function(){this.publish("request",{defaultFn:e.bind("_defRequestFn",this),queuable:!0}),this.publish("data",{defaultFn:e.bind("_defDataFn",this),queuable:!0}),this.publish("response",{defaultFn:e.bind("_defResponseFn",this),queuable:!0})},_defRequestFn:function(e){var t=this.get("source"),r=e.details[0];n.isUndefined(t)&&(r.error=new Error("Local source undefined")),r.data=t,this.fire("data",r)},_defDataFn:function(e){var t=e.data,r=e.meta,i={results:n.isArray(t)?t:[t],meta:r?r:{}},s=e.details[0];s.response=i,this.fire("response",s)},_defResponseFn:function(e){r.issueCallback(e,this)},sendRequest:function(e){var t=r._tId++,n;return e=e||{},n=e.on||e.callback,this.fire("request",{tId:t,request:e.request,on:n,callback:n,cfg:e.cfg||{}}),t}}),e.namespace("DataSource").Local=r},"3.18.1",{requires:["base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datasource-get",function(e,t){var n=function(){n.superclass.constructor.apply(this,arguments)};e.DataSource.Get=e.extend(n,e.DataSource.Local,{_defRequestFn:function(t){var n=this.get("source"),r=this.get("get"),i=e.guid().replace(/\-/g,"_"),s=this.get("generateRequestCallback"),o=t.details[0],u=this;return this._last=i,YUI.Env.DataSource.callbacks[i]=function(n){delete YUI.Env.DataSource.callbacks[i],delete e.DataSource.Local.transactions[t.tId];var r=u.get("asyncMode")!=="ignoreStaleResponses"||u._last===i;r&&(o.data=n,u.fire("data",o))},n+=t.request+s.call(this,i),e.DataSource.Local.transactions[t.tId]=r.script(n,{autopurge:!0,onFailure:function(n){delete YUI.Env.DataSource.callbacks[i],delete e.DataSource.Local.transactions[t.tId],o.error=new Error(n.msg||"Script node data failure"),u.fire("data",o)},onTimeout:function(n){delete YUI.Env.DataSource.callbacks[i],delete e.DataSource.Local.transactions[t.tId],o.error=new Error(n.msg||"Script node data timeout"),u.fire("data",o)}}),t.tId},_generateRequest:function(e){return"&"+this.get("scriptCallbackParam")+"=YUI.Env.DataSource.callbacks."+e}},{NAME:"dataSourceGet",ATTRS:{get:{value:e.Get,cloneDefaultValue:!1},asyncMode:{value:"allowAll"},scriptCallbackParam:{value:"callback"},generateRequestCallback:{value:function(){return this._generateRequest.apply(this,arguments)}}}}),YUI.namespace("Env.DataSource.callbacks")},"3.18.1",{requires:["datasource-local","get"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("cookie",function(e,t){function h(e){throw new TypeError(e)}function p(e){(!s(e)||e==="")&&h("Cookie name must be a non-empty string.")}function d(e){(!s(e)||e==="")&&h("Subcookie name must be a non-empty string.")}var n=e.Lang,r=e.Object,i=null,s=n.isString,o=n.isObject,u=n.isUndefined,a=n.isFunction,f=encodeURIComponent,l=decodeURIComponent,c=e.config.doc;e.Cookie={_createCookieString:function(e,t,n,r){r=r||{};var i=f(e)+"="+(n?f(t):t),u=r.expires,a=r.path,l=r.domain;return o(r)&&(u instanceof Date&&(i+="; expires="+u.toUTCString()),s(a)&&a!==""&&(i+="; path="+a),s(l)&&l!==""&&(i+="; domain="+l),r.secure===!0&&(i+="; secure")),i},_createCookieHashString:function(e){o(e)||h("Cookie._createCookieHashString(): Argument must be an object.");var t=[];return r.each(e,function(e,n){!a(e)&&!u(e)&&t.push(f(n)+"="+f(String(e)))}),t.join("&")},_parseCookieHash:function(e){var t=e.split("&"),n=i,r={};if(e.length)for(var s=0,o=t.length;s<o;s++)n=t[s].split("="),r[l(n[0])]=l(n[1]);return r},_parseCookieString:function(e,t,n){var r={};if(s(e)&&e.length>0){var o=t===!1?function(e){return e}:l,a=e.split(/;\s/g),f=i,c=i,h=i;for(var p=0,d=a.length;p<d;p++){h=a[p].match(/([^=]+)=/i);if(h instanceof Array)try{f=l(h[1]),c=o(a[p].substring(h[1].length+1))}catch(v){}else f=l(a[p]),c="";!u(n)&&n.reverseCookieLoading?u(r[f])&&(r[f]=c):r[f]=c}}return r},_setDoc:function(e){c=e},exists:function(e){p(e);var t=this._parseCookieString(c.cookie,!0);return t.hasOwnProperty(e)},get:function(e,t){p(e);var n,r,s;return a(t)?(s=t,t={}):o(t)?s=t.converter:t={},n=this._parseCookieString(c.cookie,!t.raw,t),r=n[e],u(r)?i:a(s)?s(r):r},getSub:function(e,t,n,r){var s=this.getSubs(e,r);return s!==i?(d(t),u(s[t])?i:a(n)?n(s[t]):s[t]):i},getSubs:function(e,t){p(e);var n=this._parseCookieString(c.cookie,!1,t);return s(n[e])?this._parseCookieHash(n[e]):i},remove:function(t,n){return p(t),n=e.merge(n||{},{expires:new Date(0)}),this.set(t,"",n)},removeSub:function(e,t,n){p(e),d(t),n=n||{};var r=this.getSubs(e);if(o(r)&&r.hasOwnProperty(t)){delete r[t];if(!n.removeIfEmpty)return this.setSubs(e,r,n);for(var i in r)if(r.hasOwnProperty(i)&&!a(r[i])&&!u(r[i]))return this.setSubs(e,r,n);return this.remove(e,n)}return""},set:function(e,t,n){p(e),u(t)&&h("Cookie.set(): Value cannot be undefined."),n=n||{};var r=this._createCookieString(e,t,!n.raw,n);return c.cookie=r,r},setSub:function(e,t,n,r){p(e),d(t),u(n)&&h("Cookie.setSub(): Subcookie value cannot be undefined.");var i=this.getSubs(e);return o(i)||(i={}),i[t]=n,this.setSubs(e,i,r)},setSubs:function(e,t,n){p(e),o(t)||h("Cookie.setSubs(): Cookie value must be an object.");var r=this._createCookieString(e,this._createCookieHashString(t),!1,n);return c.cookie=r,r}}},"3.18.1",{requires:["yui-base"]});

/* content-story.js e5c79d5 */ YUI.add("media-content-story",function(c){var i="content-video:playvideo",j="content:insert-share-panel",b="content:sapphire-chapter-index-changed",h="cover-video-container",d={story:"1",blogpost:"2",video:"3",slideshow:"4"},f="sapphire-chapter",g=15,a=1.7777,e=12;c.namespace("Media").ContentStory=c.Base.create("media-content-story",c.Base,[],{config:{},chrome:"",initializer:function(l){var k=this;k.config=l&&l.config?l.config:{};k.chrome=l&&l.chrome?l.chrome:"";k.yogBd=c.one("#yog-bd");k.yogBody=c.one("#yog-body");k.uh=c.one("#UH");k.yogRp=c.one(".yog-rp #yog-related, .Col3 #Aside");k.storyCard=c.one("#"+k.config.modId);k.currentChapterIndex=0;k.chapterYPositions=[];k.totalHeaderHeight=0;k.chapters=(k.storyCard)?k.storyCard.all("."+f):"";k.leadVideoId=null;if(k.chapters&&k.chapters.size()>0){k._handleSapphireEvents()}k._handlePlayLeadVideo();if(c.Media.pageChrome.getBucketId()==="gs134"){k._handleShareRelatedImage()}k.storyCard.delegate("click",function(m){k.chrome.beaconClick(k.getClickBeaconData({key:"embed",node:m.currentTarget}),k.config.modId)},".body-related-video")},_handleSapphireEvents:function(){var k=this;c.on("windowresize",k._handleWindowResize,null,k);c.Global.on(b,k._scrollToCurrentChapter,k);k._calculateDimensions();if(k.yogRp){k.yogRp.prepend('<div class="sapphire-right-rail-buffer"></div>');k.rightBuffer=k.yogRp.one(".sapphire-right-rail-buffer")}c.on("scroll",k._findCurrentChapter,null,k)},_handleWindowResize:function(){var k=this;k._calculateDimensions();k._findCurrentChapter()},_calculateDimensions:function(){var y=this,p=0,w=0,u=0,o=0,x=c.one("[data-applet-type='td-applet-sapphire-header']"),r=c.one("[data-applet-type='td-applet-sapphire-chapter-index'] .js-applet-view-container-main .sapphire-chapter-index"),q=(r)?r.one(".chapters"):null,l,s=[],m,k,v,t,n;if(y.storyCard){m=y.storyCard.all("#ymh-player-iframe");if(m&&m.size()>0){m.each(function(z){k=parseInt(z.getComputedStyle("width"),10);v=parseInt(k/a,10);z.setStyle("height",v+"px");t=z.one("iframe")||z.one(".yom-video-player")||z.one(".yom-sapphire-video-player");if(t){n=t.getData("yom-embed-config");if(n){n=n.replace(/height:\d+/,"height:"+v);t.setData("yom-embed-config",n)}t.setStyle("height",v+"px")}})}}if(y.uh&&y.uh.getComputedStyle("position")==="fixed"){if(y.uh){p=parseInt(y.uh.getComputedStyle("height"),10)}if(x){w=parseInt(x.getComputedStyle("height"),10)}if(q){l=q.one(".index-container .chapter-summary");if(l&&!r.hasClass("collapsed")){o=parseInt(l.getComputedStyle("height"),10)}u=parseInt(q.getComputedStyle("height"),10)-o}}y.totalHeaderHeight=p+w+u+g;if(y.chapters&&y.chapters.size()>0){y.chapters.each(function(z){s.push(parseInt(z.getY(),10))});y.chapterYPositions=s}},_scrollToCurrentChapter:function(r){var l=this,m=null,k,p,n=(c.Media&&c.Media.pageChrome&&c.Media.pageChrome.getDevice())||"full";if(r.chapter&&r.chapter.index!==undefined){m=r.chapter.index;if(l.currentChapterIndex!==m){l.currentChapterIndex=m;if("full"===n){k=(l.chapterYPositions[m]-l.totalHeaderHeight);p=parseInt(Math.abs(l._getPageY()-k)/e);l._animateScroll(p,k)}else{if(l.chapters&&l.chapters.item(m)){var q=Math.max(0,l.chapters.item(m).getY()-10);if(!isNaN(q)){setTimeout(function(){window.scrollTo(0,q)},1000)}}}}}else{c.log("Event "+b+" incorrect object passed!")}},_animateScroll:function(n,l){var k=this,p=k._getPageY(),r=(p<l)?p+n:p-n,m,o,q;if(Math.abs(p-l)<n){r=l}window.scrollTo(0,r);m=k._getPageY();o=Math.abs(m-l);if(o<1){n=1}else{if(o<n*2){n=n*0.6}else{if(o<n*6){n=n*0.9}}}if(p===m){window.scrollTo(0,l);return}q=c.later(30,k,k._animateScroll,[n,l],false)},_getPageY:function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop},_findCurrentChapter:function(){var m=this,q=m.totalHeaderHeight,l=m.currentChapterIndex,p=m.chapterYPositions,o=p.length,k;k=(window.pageYOffset!==undefined)?window.pageYOffset:(document.documentElement||document.body.parentNode||document.body).scrollTop;for(var n=0;n<o;n++){if(k>=(p[n]-q-1)){l=n}}if(m._getDocHeight()-15<=k+window.innerHeight){l=o-1}if(m.currentChapterIndex!==l){m.currentChapterIndex=l;c.Global.fire(b,{chapter:{index:m.currentChapterIndex}})}m._handleSapphireRightRail()},_getDocHeight:function(){var k=document;return Math.max(k.body.scrollHeight,k.documentElement.scrollHeight,k.body.offsetHeight,k.documentElement.offsetHeight,k.body.clientHeight,k.documentElement.clientHeight)},_handleSapphireRightRail:function(){var m=this;if(m.rightBuffer){if(!m.sapphireHeader){m.sapphireHeader=c.one("[data-applet-type='td-applet-sapphire-header'] .App-Main")}if(!m.sapphireChapterIndex){m.sapphireChapterIndex=c.one("[data-applet-type='td-applet-sapphire-chapter-index'] .App-Main");if(m.sapphireChapterIndex){m.sapphireChapters=m.sapphireChapterIndex.one(".chapters")}}var l=m.sapphireHeader?parseInt(m.sapphireHeader.getComputedStyle("height"),10):0,n=m.sapphireChapters?parseInt(m.sapphireChapters.getComputedStyle("height"),10):0,o=10+l+n,k=Math.min(window.scrollY,o)+"px";if(m.rightBuffer.getComputedStyle("height")!==k){m.rightBuffer.setStyle("height",k)}}},_handlePlayLeadVideo:function(){var m=this,o=m.storyCard.one(".cover-video"),p=o?o.hasClass("autoplay"):false,q=o?o.getData("id"):null,l=h,k,n,r;m.leadVideoId=q;if(q){n=function(){k=m.storyCard.one("#"+l);if(!p&&!o.hasClass("sponsored")){o.addClass("hidden");k.setStyle("display","block")}c.fire(i,{id:q,containerId:l});m.chrome.beaconClick(m.getClickBeaconData({key:"lead",autoplay:p}),m.config.modId)};if("full"!==m.chrome.getDevice()){setTimeout(function(){n()},0.1)}o.on("click",n);if(p&&"full"===m.chrome.getDevice()){r=setTimeout(function(){o.simulate("click")},0.1)}}},_handleShareRelatedImage:function(){var m=this,p=c.Node.create('<div class="body-related-image-share"></div>'),n=new c.Overlay({srcNode:p,zIndex:1}),l=m.storyCard.all(".yui-editorial-embed .yom-figure, .body-related .body-related-image, .body-related .body-related-slideshow"),q=function(s){return s&&s.relatedTarget&&(s.relatedTarget.hasClass("yui3-overlay")||s.relatedTarget.hasClass("body-related-image")||s.relatedTarget.hasClass("yom-figure")||s.relatedTarget.ancestor(function(t){return t&&(t===p||t.hasClass("body-related-image")||t.hasClass("yom-figure")||t.hasClass("yui3-overlay"))}))},r=function(s){if(q(s)){return}if(p.one(".share-btns")){p.one(".share-btns").setStyle("marginTop","-50px")}if(k){clearTimeout(k);k=null}k=setTimeout(function(){if(o){o._doClean({node:p});o=null}p.get("children").remove();n.hide()},400)},k=null,o=null;n.hide();n.render();l.on("mouseenter",function(v){if(q(v)){return}var t=v.currentTarget.one("img").getAttribute("src"),u={url:window.location.href,title:c.one("meta[property=og:title]")&&c.one("meta[property=og:title]").getAttribute("content")||"",desc:c.one("meta[property=og:description]")&&c.one("meta[property=og:description]").getAttribute("content")||"",img:t},s={callback:function(x,w){x.one(".share-btns").setStyle("marginTop","0px");o=w},shareData:u,type:"content-story",containerNode:p,moreMenuPosition:"bottom",moreMenuDelay:400,sec:"sh",pos:"hover"};if(o){o._doClean({node:p});o=null}p.get("children").remove();c.Global.fire(j,s);n.set("align",{node:v.currentTarget.one("img"),points:[c.WidgetPositionAlign.TR,c.WidgetPositionAlign.BR]});n.show();if(k){clearTimeout(k);k=null}});l.on("mouseleave",r);p.on("mouseleave",r)},getClickBeaconData:function(m){var l=this,k={sec:"ct-mod",linkname:"play",keys:{rspns:"",t1:"a3",t2:"ct-mod",t3:"",elm:"img",elmt:"ct",itc:"1",g:l.chrome.getContentId(),aid:"",ct:d[l.config.contentType],cpos:"0"}};if("object"!==typeof m){return}if(m.autoplay===true){k.linkname="autoplay"}switch(m.key){case"lead":k.keys.t3="ld";k.keys.aid=l.leadVideoId;k.keys.cpos="1";break;case"embed":k.keys.t3="embd";k.keys.aid=m.node.getData("uuid");k.keys.cpos=m.node.getData("pos");break;default:break}return k}})},"0.0.1",{requires:["node-base","node-simulate","overlay","event-mouseenter"]});/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-stdmod",function(e,t){function H(e){}var n=e.Lang,r=e.Node,i=e.UA,s=e.Widget,o="",u="hd",a="bd",f="ft",l="header",c="body",h="footer",p="fillHeight",d="stdmod",v="Node",m="Content",g="firstChild",y="childNodes",b="ownerDocument",w="contentBox",E="height",S="offsetHeight",x="auto",T="headerContentChange",N="bodyContentChange",C="footerContentChange",k="fillHeightChange",L="heightChange",A="contentUpdate",O="renderUI",M="bindUI",_="syncUI",D="_applyParsedConfig",P=e.Widget.UI_SRC;H.HEADER=l,H.BODY=c,H.FOOTER=h,H.AFTER="after",H.BEFORE="before",H.REPLACE="replace";var B=H.HEADER,j=H.BODY,F=H.FOOTER,I=B+m,q=F+m,R=j+m;H.ATTRS={headerContent:{value:null},footerContent:{value:null},bodyContent:{value:null},fillHeight:{value:H.BODY,validator:function(e){return this._validateFillHeight(e)}}},H.HTML_PARSER={headerContent:function(e){return this._parseStdModHTML(B)},bodyContent:function(e){return this._parseStdModHTML(j)},footerContent:function(e){return this._parseStdModHTML(F)}},H.SECTION_CLASS_NAMES={header:s.getClassName(u),body:s.getClassName(a),footer:s.getClassName(f)},H.TEMPLATES={header:'<div class="'+H.SECTION_CLASS_NAMES[B]+'"></div>',body:'<div class="'+H.SECTION_CLASS_NAMES[j]+'"></div>',footer:'<div class="'+H.SECTION_CLASS_NAMES[F]+'"></div>'},H.prototype={initializer:function(){this._stdModNode=this.get(w),e.before(this._renderUIStdMod,this,O),e.before(this._bindUIStdMod,this,M),e.before(this._syncUIStdMod,this,_)},_syncUIStdMod:function(){var e=this._stdModParsed;(!e||!e[I])&&this._uiSetStdMod(B,this.get(I)),(!e||!e[R])&&this._uiSetStdMod(j,this.get(R)),(!e||!e[q])&&this._uiSetStdMod(F,this.get(q)),this._uiSetFillHeight(this.get(p))},_renderUIStdMod:function(){this._stdModNode.addClass(s.getClassName(d)),this._renderStdModSections(),this.after(T,this._afterHeaderChange),this.after(N,this._afterBodyChange),this.after(C,this._afterFooterChange)},_renderStdModSections:function(){n.isValue(this.get(I))&&this._renderStdMod(B),n.isValue(this.get(R))&&this._renderStdMod(j),n.isValue(this.get(q))&&this._renderStdMod(F)},_bindUIStdMod:function(){this.after(k,this._afterFillHeightChange),this.after(L,this._fillHeight),this.after(A,this._fillHeight)},_afterHeaderChange:function(e){e.src!==P&&this._uiSetStdMod(B,e.newVal,e.stdModPosition)},_afterBodyChange:function(e){e.src!==P&&this._uiSetStdMod(j,e.newVal,e.stdModPosition)},_afterFooterChange:function(e){e.src!==P&&this._uiSetStdMod(F,e.newVal,e.stdModPosition)},_afterFillHeightChange:function(e){this._uiSetFillHeight(e.newVal)},_validateFillHeight:function(e){return!e||e==H.BODY||e==H.HEADER||e==H.FOOTER},_uiSetFillHeight:function(e){var t=this.getStdModNode(e),n=this._currFillNode;n&&t!==n&&n.setStyle(E,o),t&&(this._currFillNode=t),this._fillHeight()},_fillHeight:function(){if(this.get(p)){var e=this.get(E);e!=o&&e!=x&&this.fillHeight(this.getStdModNode(this.get(p)))}},_uiSetStdMod:function(e,t,r){if(n.isValue(t)){var i=this.getStdModNode(e,!0);this._addStdModContent(i,t,r),this.set(e+m,this._getStdModContent(e),{src:P})}else this._eraseStdMod(e);this.fire(A)},_renderStdMod:function(e){var t=this.get(w),n=this._findStdModSection(e);return n||(n=this._getStdModTemplate(e)),this._insertStdModSection(t,e,n),this[e+v]=n,this[e+v]},_eraseStdMod:function(e){var t=this.getStdModNode(e);t&&(t.remove(!0),delete this[e+v])},_insertStdModSection:function(e,t,n){var r=e.get(g);if(t===F||!r)e.appendChild(n);else if(t===B)e.insertBefore(n,r);else{var i=this[F+v];i?e.insertBefore(n,i):e.appendChild(n)}},_getStdModTemplate:function(e){return r.create(H.TEMPLATES[e],this._stdModNode.get(b))},_addStdModContent:function(e,t,n){switch(n){case H.BEFORE:n=0;break;case H.AFTER:n=undefined;break;default:n=H.REPLACE}e.insert(t,n)},_getPreciseHeight:function(e){var t=e?e.get(S):0,n="getBoundingClientRect";if(e&&e.hasMethod(n)){var r=e.invoke(n);r&&(t=r.bottom-r.top)}return t},_findStdModSection:function(e){return this.get(w).one("> ."+H.SECTION_CLASS_NAMES[e])},_parseStdModHTML:function(t){var n=this._findStdModSection(t);return n?(this._stdModParsed||(this._stdModParsed={},e.before(this._applyStdModParsedConfig,this,D)),this._stdModParsed[t+m]=1,n.get("innerHTML")):null},_applyStdModParsedConfig:function(e,t,n){var r=this._stdModParsed;r&&(r[I]=!(I in t)&&I in r,r[R]=!(R in t)&&R in r,r[q]=!(q in t)&&q in r)},_getStdModContent:function(e){return this[e+v]?this[e+v].get(y):null},setStdModContent:function(e,t,n){this.set(e+m,t,{stdModPosition:n})},getStdModNode:function(e,t){var n=this[e+v]||null;return!n&&t&&(n=this._renderStdMod(e)),n},fillHeight:function(e){if(e){var t=this.get(w),r=[this.headerNode,this.bodyNode,this.footerNode],s,o,u=0,a=0,f=!1;for(var l=0,c=r.length;l<c;l++)s=r[l],s&&(s!==e?u+=this._getPreciseHeight(s):f=!0);f&&((i.ie||i.opera)&&e.set(S,0),o=t.get(S)-parseInt(t.getComputedStyle("paddingTop"),10)-parseInt(t.getComputedStyle("paddingBottom"),10)-parseInt(t.getComputedStyle("borderBottomWidth"),10)-parseInt(t.getComputedStyle("borderTopWidth"),10),n.isNumber(o)&&(a=o-u,a>=0&&e.set(S,a)))}}},e.WidgetStdMod=H},"3.18.1",{requires:["base-build","widget"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-stack",function(e,t){function O(e){}var n=e.Lang,r=e.UA,i=e.Node,s=e.Widget,o="zIndex",u="shim",a="visible",f="boundingBox",l="renderUI",c="bindUI",h="syncUI",p="offsetWidth",d="offsetHeight",v="parentNode",m="firstChild",g="ownerDocument",y="width",b="height",w="px",E="shimdeferred",S="shimresize",x="visibleChange",T="widthChange",N="heightChange",C="shimChange",k="zIndexChange",L="contentUpdate",A="stacked";O.ATTRS={shim:{value:r.ie==6},zIndex:{value:0,setter:"_setZIndex"}},O.HTML_PARSER={zIndex:function(e){return this._parseZIndex(e)}},O.SHIM_CLASS_NAME=s.getClassName(u),O.STACKED_CLASS_NAME=s.getClassName(A),O.SHIM_TEMPLATE='<iframe class="'+O.SHIM_CLASS_NAME+'" frameborder="0" title="Widget Stacking Shim" src="javascript:false" tabindex="-1" role="presentation"></iframe>',O.prototype={initializer:function(){this._stackNode=this.get(f),this._stackHandles={},e.after(this._renderUIStack,this,l),e.after(this._syncUIStack,this,h),e.after(this._bindUIStack,this,c)},_syncUIStack:function(){this._uiSetShim(this.get(u)),this._uiSetZIndex(this.get(o))},_bindUIStack:function(){this.after(C,this._afterShimChange),this.after(k,this._afterZIndexChange)},_renderUIStack:function(){this._stackNode.addClass(O.STACKED_CLASS_NAME)},_parseZIndex:function(e){var t;return!e.inDoc()||e.getStyle("position")==="static"?t="auto":t=e.getComputedStyle("zIndex"),t==="auto"?null:t},_setZIndex:function(e){return n.isString(e)&&(e=parseInt(e,10)),n.isNumber(e)||(e=0),e},_afterShimChange:function(e){this._uiSetShim(e.newVal)},_afterZIndexChange:function(e){this._uiSetZIndex(e.newVal)},_uiSetZIndex:function(e){this._stackNode.setStyle(o,e)},_uiSetShim:function(e){e?(this.get(a)?this._renderShim():this._renderShimDeferred(),r.ie==6&&this._addShimResizeHandlers()):this._destroyShim()},_renderShimDeferred:function(){this._stackHandles[E]=this._stackHandles[E]||[];var e=this._stackHandles[E],t=function(e){e.newVal&&this._renderShim()};e.push(this.on(x,t))},_addShimResizeHandlers:function(){this._stackHandles[S]=this._stackHandles[S]||[];var e=this.sizeShim,t=this._stackHandles[S];t.push(this.after(x,e)),t.push(this.after(T,e)),t.push(this.after(N,e)),t.push(this.after(L,e))},_detachStackHandles:function(e){var t=this._stackHandles[e],n;if(t&&t.length>0)while(n=t.pop())n.detach()},_renderShim:function(){var e=this._shimNode,t=this._stackNode;e||(e=this._shimNode=this._getShimTemplate(),t.insertBefore(e,t.get(m)),this._detachStackHandles(E),this.sizeShim())},_destroyShim:function(){this._shimNode&&(this._shimNode.get(v).removeChild(this._shimNode),this._shimNode=null,this._detachStackHandles(E),this._detachStackHandles(S))},sizeShim:function(){var e=this._shimNode,t=this._stackNode;e&&r.ie===6&&this.get(a)&&(e.setStyle(y,t.get(p)+w),e.setStyle(b,t.get(d)+w))},_getShimTemplate:function(){return i.create(O.SHIM_TEMPLATE,this._stackNode.get(g))}},e.WidgetStack=O},"3.18.1",{requires:["base-build","widget"],skinnable:!0});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("widget-position-constrain",function(e,t){function m(e){}var n="constrain",r="constrain|xyChange",i="constrainChange",s="preventOverlap",o="align",u="",a="bindUI",f="xy",l="x",c="y",h=e.Node,p="viewportRegion",d="region",v;m.ATTRS={constrain:{value:null,setter:"_setConstrain"},preventOverlap:{value:!1}},v=m._PREVENT_OVERLAP={x:{tltr:1,blbr:1,brbl:1,trtl:1},y:{trbr:1,tlbl:1,bltl:1,brtr:1}},m.prototype={initializer:function(){this._posNode||e.error("WidgetPosition needs to be added to the Widget, before WidgetPositionConstrain is added"),e.after(this._bindUIPosConstrained,this,a)},getConstrainedXY:function(e,t){t=t||this.get(n);var r=this._getRegion(t===!0?null:t),i=this._posNode.get(d);return[this._constrain(e[0],l,i,r),this._constrain(e[1],c,i,r)]},constrain:function(e,t){var r,i,s=t||this.get(n);s&&(r=e||this.get(f),i=this.getConstrainedXY(r,s),(i[0]!==r[0]||i[1]!==r[1])&&this.set(f,i,{constrained:!0}))},_setConstrain:function(e){return e===!0?e:h.one(e)},_constrain:function(e,t,n,r){if(r){this.get(s)&&(e=this._preventOverlap(e,t,n,r));var i=t==l,o=i?r.width:r.height,u=i?n.width:n.height,a=i?r.left:r.top,f=i?r.right-u:r.bottom-u;if(e<a||e>f)u<o?e<a?e=a:e>f&&(e=f):e=a}return e},_preventOverlap:function(e,t,n,r){var i=this.get(o),s=t===l,a,f,c,h,p,d;return i&&i.points&&v[t][i.points.join(u)]&&(f=this._getRegion(i.node),f&&(a=s?n.width:n.height,c=s?f.left:f.top,h=s?f.right:f.bottom,p=s?f.left-r.left:f.top-r.top,d=s?r.right-f.right:r.bottom-f.bottom),e>c?d<a&&p>a&&(e=c-a):p<a&&d>a&&(e=h)),e},_bindUIPosConstrained:function(){this.after(i,this._afterConstrainChange),this._enableConstraints(this.get(n))},_afterConstrainChange:function(e){this._enableConstraints(e.newVal)},_enableConstraints:function(e){e?(this.constrain(),this._cxyHandle=this._cxyHandle||this.on(r,this._constrainOnXYChange)):this._cxyHandle&&(this._cxyHandle.detach(),this._cxyHandle=null)},_constrainOnXYChange:function(e){e.constrained||(e.newVal=this.getConstrainedXY(e.newVal))},_getRegion:function(e){var t;return e?(e=h.one(e),e&&(t=e.get(d))):t=this._posNode.get(p),t}},e.WidgetPositionConstrain=m},"3.18.1",{requires:["widget-position"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("overlay",function(e,t){e.Overlay=e.Base.create("overlay",e.Widget,[e.WidgetStdMod,e.WidgetPosition,e.WidgetStack,e.WidgetPositionAlign,e.WidgetPositionConstrain])},"3.18.1",{requires:["widget","widget-stdmod","widget-position","widget-position-align","widget-stack","widget-position-constrain"],skinnable:!0});

/* content-comments.js 9fcce18 */ YUI.add("media-content-comments",function(a){a.namespace("Media");a.Media.ContentComments=a.Base.create("media-content-comments",a.Base,[],{config:{},chrome:"",initializer:function(c){var b=this;b.config=c&&c.config?c.config:{};b.chrome=c&&c.chrome?c.chrome:"";b.shown=false;b.config.device=b.chrome.getDevice();b.config.deviceOS=b.chrome.getDeviceOS();b.config.deviceOSVer=b.chrome.getDeviceOSVer();b.config.contentId=b.config.contentId||b.chrome.getContentId();b.config.deviceIsDesktop="full"===b.config.device||"desktop"===b.config.device;b.config.deviceIsSmartphone="smartphone"===b.config.device;b.config.deviceIsTablet="tablet"===b.config.device;b.config.ult=b.getUltConfig();b.config.activeFilter="all";b.config.activeSort="pop";b.config.newPostCounter=0;b.config.firstFetch=true;b.nodes={};b.nodes.container=a.one("#"+b.config.modId);b.strings=b.config.strings;b.templates={};b.templates.comment={};b.templates.reply={};b.templates.report={};b.templates.loader='<li><div class="comments-loader"></div></li>';b.templates.loaderDiv='<div class="comments-loader"></div>';b.templates.fullLoadMask='<div id="comments-loading-mask-{{id}}" class="full-loading-mask"><div class="comments-loader"></div></div>';b.templates.listLoadMask='<div id="comments-loading-mask-{{id}}" class="list-loading-mask"><div class="comments-loader"></div></div>';b.templates.deeplinkEnd='<li id="deeplink-end"></li>';b.templates.newReplyList='<ul class="new-reply-list"></ul>';b.templates.areYouSure='<div class="hidden expert-user-action-confirm">'+b.strings.areYouSure+' <a class="yes" href="#">'+b.strings.yes+'</a> <a class="no" href="#">'+b.strings.no+"</a></div>";b.templates.comment.errorEmpty=["<p>",b.strings.errorCommentEmpty,"</p>"].join("");b.templates.comment.errorTooLong=["<p>",b.strings.errorCommentTooLong,"</p>"].join("");b.templates.comment.errorRevalidate=["<p>",b.strings.errorCommentRevalidate,"</p>"].join("");b.templates.reply.errorEmpty=["<p>",b.strings.errorReplyEmpty,"</p>"].join("");b.templates.reply.errorTooLong=["<p>",b.strings.errorReplyTooLong,"</p>"].join("");b.templates.reply.errorRevalidate=["<p>",b.strings.errorReplyRevalidate,"</p>"].join("");b.templates.report.errorOtherEmpty=["<p>",b.strings.errorReportOtherEmpty,"</p>"].join("");b.templates.report.errorSelectViolation=["<p>",b.strings.errorReportSelectViolation,"</p>"].join("");b.templates.report.errorRevalidate=["<p>",b.strings.errorReportRevalidate,"</p>"].join("");b.templates.errorViolation=["<p>",b.strings.err_violation,"</p>"].join("");b.templates.msgReport=["<p>",b.strings.msg_report,"</p>"].join("");b.classnames={};b.classnames.commentContainer=".comment-container";b.classnames.replyContainer=".reply-container";b.classnames.listItem=".js-item";b.classnames.list=".js-list";b.classnames.error=".err";b.classnames.userCommentBody=".user-comment-body";b.classnames.expertActionItem=".expert-user-action-item";b.classnames.expertActionConfirm=".expert-user-action-confirm";b.classnames.featured=".featured.hidden";b.keys={enter:13,space:32,left:37,right:39};b.activeXhr={};b.activeXhr.loaders={};b.activeDelete={};b.activeMute={};b.activeSwipe={};b.activeSwipe.axis="x";b.activeSwipe.swipeMinDistance=10;b.activeSwipe.preventDefaultRange=10;b.activeSwipe.invalidSwipeRange=100;b.activeSwipe.tapThreshold=10;b.config.contentMetadata=b.getContentMetadata();b.nodes.showCommentsButton=b.nodes.container.one("#collapsed-comments-show");if(!a.Media.lbData||(!a.one("#mediacontentslideshow")&&!a.one("#mediacontentstory"))){b.config.enableCommentLightbox=0;b.nodes.showCommentsButton&&b.nodes.showCommentsButton.removeClass("go-to-slideshow-lightbox")}if(b.nodes.showCommentsButton&&b.config.enableCommentLightbox!==1){b.nodes.showCommentsButton.on("click",function(f){var d=b.nodes.container.all(".err");f.preventDefault();if(d){d.each(function g(e){e.remove(true)})}b.beaconClick(b.config.ult.view_comments);b.displayModule(null)})}},bindEvents:function(){var b=this;b.nodes.container.delegate("click",function(){return true},function(f,d){var c=d.target.get("tagName").toLowerCase();if(d.metaKey||c.indexOf("textarea")>-1||c.indexOf("select")>-1||c.indexOf("input")>-1){return true}else{f.blur()}},b);if(b.nodes.postBoxInput){b.nodes.postBoxInput.on("focus",function(){b.nodes.postButton.ancestor().removeClass("shrunk");b.nodes.sortBar.setStyle("marginTop",0)},b)}b.nodes.list.delegate("click",b.loadMoreComments,".comments-button .generic-button",b);b.nodes.list.delegate("click",b.loadMoreReplies,".replies-button .generic-button",b);b.nodes.list.delegate("click",b.loadReplies,".comment-container .replies",b);b.nodes.list.delegate("click",b.confirmDelete,".comment-container .delete",b);b.nodes.list.delegate("click",b.undoDelete,".delete-container .comments-undo",b);b.nodes.list.delegate("click",b.undoMute,".report-message-container .comments-undo",b);b.nodes.list.delegate("click",b.showReplyPostbox,".comment-container .reply",b);b.nodes.list.delegate("click",b.showLowRated,".comment-container .show",b);if(b.config.enableViewOthers){b.nodes.list.delegate("click",b.loadUserComments,".profile-link",b)}if(!b.config.loginStatus){a.one("body").on("click",function(c){if(b.signupRendered&&(b.nodes.signupParent===c.target||!b.nodes.signup.contains(c.target))){b.removeLoginOverlay()}})}b.nodes.container.delegate("click",b.postCommentNReply,".post-button",b);b.nodes.list.delegate("click",b.onMoreActionsClick,".actions",b);if(0===b.config.enableMuteCommenter){b.nodes.list.delegate("change",b.onAbuseReasonChange,".report-container",b)}b.nodes.list.delegate(0===b.config.enableMuteCommenter?"submit":"click",b.onAbuseSubmit,0===b.config.enableMuteCommenter?".form-report-abuse":".report-button",b);b.nodes.list.delegate("click",function(d){var c=d.target.ancestor("div.more-reason").one("input.category");c.set("checked",true)},"input.other-reason");b.nodes.list.delegate("click",b.rateComment,b.isRateable,b);b.nodes.list.delegate("click",function(f){var d=f.target.ancestor(".text-container"),c=f.target.siblings(".comment-content");d.toggleClass("long");f.target.addClass("hidden")},".more-text-button");a.after("MCC:hide-overlay",function(d){var e=d.node.ancestor(b.classnames.listItem,false,".yom-comments"),c=e.one(b.classnames.commentContainer);if(c){c.removeClass("active")}});if(!b.config.deviceIsDesktop){b.nodes.list.delegate("gesturemovestart",b.swipeStart,b.classnames.listItem,null,b);b.nodes.list.delegate("gesturemoveend",b.swipeEnd,b.classnames.listItem,null,b)}if(b.nodes.filterBar.filterSwitch){b.nodes.filterBar.filterSwitch.on("click",b.handleFilterChange,b)}b.nodes.sortBar.delegate("click",b.handleSortChange,".comment-sort",b);b.nodes.sortBar.delegate("change",b.handleSortChange,".comments-select",b);b.nodes.list.delegate("click",function(h){var d=this,g=h.currentTarget.ancestor(d.classnames.listItem,false,d.classnames.list),c=g.one(d.classnames.commentContainer),f=g.one(".report-container");h.preventDefault();f.remove();c.removeClass("hover-disabled");c.removeClass("active")},".btn-cancel",b);b.nodes.container.delegate("change",b.resizePostbox,".comment-input-textarea",b);b.nodes.container.delegate("keydown",b.resizePostbox,".comment-input-textarea",b);b.nodes.container.delegate("keyup",b.resizePostbox,".comment-input-textarea",b);b.nodes.list.delegate("click",b.fireProfileLinkBeacon,".profile-link",b);b.nodes.container.delegate("click",b.firePostBoxLoginBeacon,".postbox-login-yh",b,{type:"login-yh"});b.nodes.container.delegate("click",b.fireOverlayLoginBeacon,".overlay-login-yh",b,{type:"login-yh"});b.nodes.container.delegate("click",b.fireOverlayLoginBeacon,".overlay-login-fb",b,{type:"login-fb"});b.nodes.container.delegate("keydown",b.handleKeyboardInput,".int",b);b.nodes.container.delegate("click",b.expertAction,".expert-user-action-item .remove",b);b.nodes.container.delegate("click",b.expertAction,".expert-user-action-item .feature",b);b.nodes.container.delegate("click",b.expertConfirm,".expert-user-action-item .yes",b);b.nodes.container.delegate("click",b.expertCancel,".expert-user-action-item .no",b)},bindNodes:function(){var b=this;b.nodes.sortBar=b.nodes.container.one("#comments-sortbar");if(b.config.deviceIsSmartphone){b.nodes.sortBarSelect=b.nodes.sortBar.one(".comments-select")}b.nodes.filterBar={};b.nodes.filterBar.container=b.nodes.container.one("#comments-filterbar");b.nodes.filterBar.filterSwitch=b.nodes.filterBar.container.one(".filter-switch");b.nodes.filterBar.activeFilter=b.nodes.filterBar.container.one(".active-filter");b.nodes.postBox=b.nodes.container.one("#comments-postbox");b.nodes.postBoxInput=b.nodes.postBox.one(".comment-input-textarea");b.nodes.postButton=b.nodes.container.one(".post-button");b.nodes.list=b.nodes.container.one("#comments-list");b.nodes.reportForm=b.nodes.container.one(".report-container");b.nodes.deleteForm=b.nodes.container.one(".delete-container");b.nodes.reportMsgForm=b.nodes.container.one(".report-message-container");b.nodes.guidelineButton=b.nodes.postBox.one(".guideline-button");b.nodes.expertUserActionConfirm=b.nodes.container.one(".expert-user-action-confirm")},hide:function(){var b=this;b.nodes.container.hide()},show:function(){var b=this;b.nodes.container.show()},handleKeyboardInput:function(c){var b=this;if(c.altKey){return}switch(c.keyCode){case b.keys.left:case b.keys.right:c.stopPropagation();break;case b.keys.enter:case b.keys.space:if(c.ctrlKey||c.shiftKey){return}a.Event.simulate(c.target.getDOMNode(),"click",{metaKey:true});break}},fireReportAbuseFlagClickBeacon:function(f){var c=this,b,g,d,e;if(f.hasClass("comment")){g=f.getAttribute("data-page").split("-");e={sec:"cmmt-ctrl",keys:{bpos:g[0],cpos:g[1]}}}else{if(f.hasClass("reply")){b=f.ancestor(".comment");g=b.getAttribute("data-page").split("-");d=f.getAttribute("data-index").split("-");e={sec:"cmmt-ctrl-ry",keys:{bpos:g[0],cpos:g[1],rbpos:d[0],rpos:d[1]}}}else{return}}c.beaconClick(c.config.ult.report_abuse_flag,e)},getUltParam:function(f,c){var d,g,b,e={};if(f.hasClass("reply")){d=f.ancestor(".comment");g=d.getAttribute("data-page").split("-");b=f.getAttribute("data-index").split("-");e.sec=c+"-ry";e.keys={bpos:g[0],cpos:g[1],rbpos:b[0],rpos:b[1]}}else{g=f.getAttribute("data-page").split("-");e.sec=c;e.keys={bpos:g[0],cpos:g[1]}}return e},fireMuteAndReportAbuseBeacon:function(g,d){var b=this,i=d.reason,e,h,c,f=b.getUltParam(g,"cmmt-abse");if(i.indexOf("impersonation")!=-1){f.keys.abt=1}else{if(i.indexOf("harassment")!=-1){f.keys.abt=2}else{if(i.indexOf("obscenity")!=-1){f.keys.abt=3}else{if(i.indexOf("derogatory language")!=-1){f.keys.abt=4}else{if(i.indexOf("spam")!=-1){f.keys.abt=5}else{if(i.indexOf("other")!=-1){f.keys.abt=6}}}}}}if(d.mute){f.keys.mute=d.mute}b.beaconClick(b.config.ult.report_abuse,f)},errlog:function(c,b){if(a.Af&&a.Af.Beacon&&c&&b){a.Af.Beacon.error("media-content-comments",c,b)}},fireOverlayLoginBeacon:function(f,h){var l=this,j=f.target.ancestor(l.classnames.listItem,false,".yom-comments"),c=f.target.ancestor(".comments-signup"),b=c?c.getAttribute("data-action"):h.action,k,g,d,i;if(!j){i={sec:b,linkname:h.type}}else{if(j.hasClass("comment")){g=j.getAttribute("data-page").split("-");i={sec:"cmmt-"+b,linkname:h.type,keys:{bpos:g[0],cpos:g[1]}}}else{if(j.hasClass("reply")){k=f.target.ancestor(".comment");g=k.getAttribute("data-page").split("-");d=j.getAttribute("data-index").split("-");i={sec:"cmmt-ry-"+b,linkname:h.type,keys:{bpos:g[0],cpos:g[1],rbpos:d[0],rpos:d[1]}}}else{return}}}l.beaconClick(l.config.ult.login_point,i)},firePostBoxLoginBeacon:function(i,d){var c=this,f=i.target.ancestor(".postbox"),b,h,g;if(f.hasClass("cmmt")){g={sec:"cmmt",linkname:d.type}}else{if(f.hasClass("cmmt-ry")){b=i.target.ancestor(".reply-list-container");h=b.getAttribute("data-page").split("-");g={sec:"cmmt-ry",linkname:d.type,keys:{bpos:h[0],cpos:h[1]}}}else{return}}c.beaconClick(c.config.ult.login_point,g)},fireProfileLinkBeacon:function(i){var c=this,g,h,d,f=i.target.ancestor(c.classnames.listItem),b;if(f.hasClass("reply")){b=f.ancestor(".reply-list-container");h=b.getAttribute("data-page").split("-");d=f.getAttribute("data-index").split("-");g={sec:"cmmt-ry",keys:{bpos:h[0],cpos:h[1],rbpos:d[0],rpos:d[1]}}}else{h=f.getAttribute("data-page").split("-");g={sec:"cmmt",keys:{bpos:h[0],cpos:h[1]}}}c.beaconClick(c.config.ult.profiles,g)},handleSortChange:function(f){var k=this,j=k.config.activeSort,h,g,b,d,i,c;if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m5")}if("change"===f.type){h=f.currentTarget.get("value").split("&");g=h[0];b=h[1];i=function(){k.config.activeSort=b;f.currentTarget.setAttribute("data-time",new Date().getTime());k.beaconClick(k.config.ult.select_sort,{keys:{ltxt:k.config.activeSort}})};c=function(){var e=this;e.config.activeSort=j;if("pop"===j){f.currentTarget.set("selectedIndex",0)}else{if("new"===j){f.currentTarget.set("selectedIndex",1)}else{if("old"===j){f.currentTarget.set("selectedIndex",2)}else{if("rep"===j){f.currentTarget.set("selectedIndex",3)}}}}};d=function(){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m5");window.MediaPerfTiming.done("Comments")}};k.loadComments(f,{api:"GET_COMMENTS",query:g,removeTarget:false,replaceContent:true,end:d,success:i,failure:c,maskType:"list"})}else{if(!f.target.hasClass("active")){i=function(){var e;k.config.activeSort=f.target.getAttribute("data-cf");e=f.target.siblings(".comment-sort");e.each(function(l){l.removeClass("active")});f.target.addClass("active");f.target.setAttribute("data-time",new Date().getTime());k.beaconClick(k.config.ult.select_sort,{keys:{ltxt:k.config.activeSort}})};c=function(){var e=this;e.config.activeSort=j;f.target.removeClass("active");if("pop"===j){e.nodes.sortBar.one(".most-popular").addClass("active")}else{if("new"===j){e.nodes.sortBar.one(".most-recent").addClass("active")}else{if("old"===j){e.nodes.sortBar.one(".oldest").addClass("active")}else{if("rep"===j){e.nodes.sortBar.one(".most-replied").addClass("active")}}}}};d=function(){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m5");window.MediaPerfTiming.done("Comments")}};k.loadComments(f,{api:"GET_COMMENTS",query:f.target.getAttribute("data-query"),removeTarget:false,replaceContent:true,end:d,success:i,failure:c,maskType:"list"})}}},handleFilterChange:function(g){var d=this,c,f=d.config.activeFilter,b={removeTarget:false,maskType:"full"};b.success=function(){var e=d.nodes.filterBar.filterSwitch.getAttribute("data-cf"),j,i,h;if("all"===e){j=d.strings.allComments;h=d.strings.myComments;i="my"}else{if("my"===e){j=d.strings.myComments;h=d.strings.allComments;i="all"}}d.nodes.filterBar.filterSwitch.setAttribute("data-cf",i);d.nodes.filterBar.filterSwitch.setContent(h);d.nodes.filterBar.activeFilter.setAttribute("data-cf",e);d.nodes.filterBar.activeFilter.setContent(j);d.config.activeFilter=e;if(!d.config.loginStatus){d.nodes.filterBar.filterSwitch.addClass("hidden")}d.beaconClick(d.config.ult.select_filter,{keys:{ltxt:d.config.activeFilter}})};if("all"===d.config.activeFilter){if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m4")}b.end=function(){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m4");window.MediaPerfTiming.done("Comments")}};b.api="GET_USER_COMMENTS";b.query="guid="+d.config.loginProfile.guid;c=function(){var e=this;e.nodes.sortBar.addClass("hidden");e.nodes.postBox.addClass("hidden")}}else{if("my"===d.config.activeFilter||"user"===d.config.activeFilter){if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m3")}b.end=function(){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m3");window.MediaPerfTiming.done("Comments")}};b.api="GET_COMMENTS";switch(d.config.activeSort){case"new":b.query="sortBy=latest";break;case"old":b.query="sortBy=oldest";break;case"rep":b.query="sortBy=mostReplied";break}c=function(){var e=this;e.nodes.sortBar.removeClass("hidden");e.nodes.postBox.removeClass("hidden")}}else{return}}b.replaceContent=true;b.uiUpdateFunction=c;b.failure=function(){var e=this;e.config.activeFilter=f};d.loadComments(g,b)},resizePostbox:function(c){var b=this,d=c.currentTarget.get("value"),f=c.currentTarget.next(".comment-input-copy");f.set("innerHTML",b.escapePostContent(d))},getErrorTemplate:function(b,c){if("li"===b){return'<li class="list-error"><div class="err"><p>'+c+"</p></div></li>"}else{if("div"===b){return'<div class="err"><p>'+c+"</p></div>"}}},getReplyListTemplate:function(){return'<div class="reply-list-container"><ul class="reply-list"></ul></div>'},bindInfiniteScroll:function(){var b=this;if(1===b.config.enableInfiniteScroll){if(!b.config.infinite.scrollHandler){b.config.infinite.scrollHandler=a.on("scroll",b.scrollDispatcher,window,b)}if(!b.config.infinite.resizeHandler){b.config.infinite.resizeHandler=a.on("resize",b.scrollDispatcher,window,b)}}},detachInfiniteScroll:function(){var b=this;if(1===b.config.enableInfiniteScroll){if(b.config.infinite.scrollHandler){b.config.infinite.scrollHandler.detach();b.config.infinite.scrollHandler=null}if(b.config.infinite.resizeHandler){b.config.infinite.resizeHandler.detach();b.config.infinite.resizeHandler=null}b.config.infinite.node=b.config.infinite.nodeY=null}},scrollDispatcher:function(){var b=this;if(b.config.infinite.timer){b.config.infinite.timer.cancel()}b.config.infinite.timer=a.later(b.config.infinite.timerDelay,b,b.handleScrollTimer)},handleScrollTimer:function(){var b=this,e,g={},d,c,f;b.config.infinite.timer=null;if(!b.config.infinite.impressionBeaconFired&&b.config.infinite.container){c=a.DOM.docScrollY()+a.DOM.winHeight();if(c>=b.config.infinite.containerY){b.beaconEvent(b.config.ult.module_impression);b.config.infinite.impressionBeaconFired=true;if(!b.config.infinite.node){b.detachInfiniteScroll()}}}if(b.config.infinite.node){c=c||a.DOM.docScrollY()+a.DOM.winHeight();if(c>=b.config.infinite.nodeY-b.config.infinite.yOffset){f=b.config.infinite.node.getAttribute("data-page").split("-");g.currentTarget=b.config.infinite.node;b.config.infinite.node=null;b.config.infinite.nodeY=null;if("all"===b.config.activeFilter){e="GET_COMMENTS"}else{if("my"===b.config.activeFilter){e="GET_USER_COMMENTS"}}d=g.currentTarget.getAttribute("data-query");if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m6")}if(""!==d){b.loadComments(g,{api:e,query:g.currentTarget.getAttribute("data-query"),removeTarget:true,end:function(){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m6");window.MediaPerfTiming.done("Comments")}b.beaconEvent(b.config.ult.infinite_scroll,{keys:{bpos:f[0]}})}})}}}},removeErrorNodes:function(c){var b=c.all(".list-error");if(b){b.each(function d(e){e.remove(true)})}},loadComments:function(d,c){var b=this;b.fetchContent({target:(c.removeTarget)?d.currentTarget:null,replaceContent:c.replaceContent,uiUpdateFunction:c.uiUpdateFunction,container:b.nodes.list,api:c.api,query:c.query||"",start:function(e){if(c.replaceContent){if("full"===c.maskType){b.nodes.container.appendChild(b.templates.fullLoadMask.replace("{{id}}",e));b.activeXhr.loaders[e]=b.nodes.container.one("#comments-loading-mask-"+e)}else{if("list"===c.maskType){b.nodes.list.appendChild(b.templates.listLoadMask.replace("{{id}}",e));b.activeXhr.loaders[e]=b.nodes.list.one("#comments-loading-mask-"+e)}}}else{b.activeXhr.loaders[e]=b.nodes.list.insertBefore(b.templates.loader,d.currentTarget)}},end:c.end||null,failure:c.failure||null,success:c.success||null})},loadMoreComments:function(g){var c=this,f=g.currentTarget.getAttribute("data-page").split("-"),h=g.currentTarget.getAttribute("data-query")||null,d=("my"===c.config.activeFilter||"user"===c.config.activeFilter)?"GET_USER_COMMENTS":"GET_COMMENTS",b;if("show_all"===h){if(c.config.firstFetch){c.config.firstFetch=false;b=c.nodes.list.all(".comment");b.removeClass("hidden");g.currentTarget.ancestor().remove(true)}}else{c.loadComments(g,{api:d,query:h,removeTarget:true})}c.beaconClick(c.config.ult.more_comments,{keys:{bpos:f[0]}})},loadUserComments:function(g){var d=this,c,f=g.target.getAttribute("data-guid")||d.config.loginProfile.guid,b={removeTarget:false,maskType:"full"};b.success=function(){var i="user",h=d.strings.allComments,j=d.strings.usersComments.replace("%N",g.target.getContent()),e=d.nodes.container.one("#user-comments-profilebox");d.nodes.filterBar.filterSwitch.setAttribute("data-cf","all");d.nodes.filterBar.filterSwitch.setContent(h);d.nodes.filterBar.activeFilter.setAttribute("data-cf",i);d.nodes.filterBar.activeFilter.setContent(j);d.config.activeFilter=i;if(!d.config.loginStatus){d.nodes.filterBar.filterSwitch.removeClass("hidden")}e.scrollIntoView();d.beaconClick(d.config.ult.select_filter,{keys:{ltxt:d.config.activeFilter}})};b.api="GET_USER_COMMENTS";b.query="guid="+f;c=function(){var e=this;e.nodes.sortBar.addClass("hidden");e.nodes.postBox.addClass("hidden")};b.replaceContent=true;b.uiUpdateFunction=c;b.failure=function(){var e=this;e.config.activeFilter=activeFilter};d.loadComments(g,b)},confirmDelete:function(h){var l=this,j=("li"===h.currentTarget.get("tagName").toLowerCase())?h.currentTarget:h.currentTarget.ancestor(l.classnames.listItem),i=j.one(".comment-container"),d=l.nodes.deleteForm.cloneNode(true),c=j.get("className"),b,k,g,f;d.removeClass("hidden");if(c.indexOf("comment")>-1){d.one(".comments-delete-message").setContent(l.strings.commentRemoved);g=j.getAttribute("data-cmt")}else{if(c.indexOf("reply")>-1){d.one(".comments-delete-message").setContent(l.strings.replyRemoved);k=j.ancestor(l.classnames.listItem,false,l.classnames.list);g=k.getAttribute("data-cmt");f=j.getAttribute("data-reply")}else{return}}i.addClass("hidden");i.siblings().addClass("hidden");b=j.appendChild(d);l.activeDelete[g+f]={};l.activeDelete[g+f].timer=a.later(5000,l,l.deleteComment,{parent:j,commentId:g,replyId:f||null,parentComment:k||null});if(l.config.deviceIsDesktop){l.activeDelete[g+f].mouseLeave=b.on("mouseleave",function(m){l.activeDelete[g+f].timer=a.later(5000,l,l.deleteComment,{parent:j,commentId:g,replyId:f||null,parentComment:k||null})},l);l.activeDelete[g+f].mouseEnter=b.on("mouseenter",function(m){if(l.activeDelete[g+f].timer){l.activeDelete[g+f].timer.cancel()}},l)}},undoDelete:function(g){var k=this,i=("li"===g.currentTarget.get("tagName").toLowerCase())?g.currentTarget:g.currentTarget.ancestor(k.classnames.listItem),b=i.one(".delete-container"),h=i.one(".comment-container"),c=i.get("className"),j,f,d;if(c.indexOf("comment")>-1){f=i.getAttribute("data-cmt")}else{if(c.indexOf("reply")>-1){j=i.ancestor(k.classnames.listItem,false,k.classnames.list);f=j.getAttribute("data-cmt");d=i.getAttribute("data-reply")}}if(k.activeDelete[f+d].timer){k.activeDelete[f+d].timer.cancel()}h.removeClass("hidden");h.siblings().removeClass("hidden");b.remove(true)},deleteComment:function(i){var n=this,k=i.parent,g=i.parent.ancestor(".user-comment-body"),c=g?g.getAttribute("data-context"):n.config.contentId,e=i.commentId,m=i.parentComment,d=i.replyId||undefined,h=i.parent.getAttribute("data-page").split("-"),j,l,b,f;b=function(r,p,q){var o=this;if("abort"!==p.statusText){if(q&&q.message){k.one(".delete-container").addClass("err");k.one(".comments-delete-message").setContent(q.message)}else{k.one(".delete-container").addClass("err");k.one(".comments-delete-message").setContent(o.strings.errorGeneric)}}o.activeDelete[e+d].mouseEnter.detach();o.activeDelete[e+d].mouseLeave.detach()};l=function(q,o,p){p.parent.addClass("transition-delete");setTimeout(function(){var t=p.parent,v=p.parentComment,s=p.commentId,w,r,u;t.remove(true);if(v){u=v.all(".js-item");if(0===u.size()){v.removeClass("expanded-replies");w=v.one("#reply-postbox-"+s);if(w){w.remove(true)}r=v.one(".replies");if(r){r.remove(true)}}n.beaconClick(n.config.ult.delete_reply)}else{n.beaconClick(n.config.ult.delete_comment)}},500)};j={comment_id:e,content_id:c};if(d){f="DELETE_REPLY";j.reply_id=d}else{f="DELETE_COMMENT"}n.postXhr({api:f,postParams:j,success:l,failure:b,args:{parent:k,parentComment:m,commentId:e}})},showReplyPostbox:function(i){var c=this,h=i.currentTarget.ancestor(c.classnames.listItem),b=h.one(".reply-list-container"),f=h.getAttribute("data-cmt"),d=h.get("className"),g;if(!c.config.loginStatus){if(!c.config.deviceIsDesktop){c.mobileLoginRedirect({e:i,action:"reply",commentId:f,replyId:null})}else{c.renderLoginOverlay(i,"reply")}}else{if(d.indexOf("expanded-replies")>-1&&b.one("#reply-postbox-"+f)){g=b.one("#reply-postbox-"+f);if(!a.DOM.inViewportRegion(g.getDOMNode(),true)){g.scrollIntoView()}}else{if(d.indexOf("expanded-postbox")>-1){g=b.one("#reply-postbox-"+f);g.addClass("hidden");h.removeClass("expanded-postbox")}else{h.addClass("expanded-postbox");if(!b){b=h.appendChild(c.getReplyListTemplate());c.insertPostbox({container:b,commentId:f})}else{g=b.one("#reply-postbox-"+f);if(g){g.removeClass("hidden")}else{c.insertPostbox({container:b,commentId:f})}}}}}},showLowRated:function(f){var b=this,c=f.target.ancestor(".comment-container"),d=c.next(".comment-container");c.remove(true);d.removeClass("hidden")},loadReplies:function(n){var q=this,p=n.currentTarget.ancestor(q.classnames.listItem),o=p.getAttribute("data-page").split("-"),g=p.get("className"),l=p.getAttribute("data-cmt"),k=p.next(".js-item"),b=p.one("#reply-postbox-"+l),f=p.ancestor(q.classnames.userCommentBody),h="",i=null,c=null,d=n.target.get("innerHTML"),r=n.target.getAttribute("data-state"),j,m;if(!k){k=p.next(".comments-button")}if(g.indexOf("expanded-replies")>-1){p.replaceClass("expanded-replies","closed-replies");p.removeClass("expanded-postbox");n.target.set("innerHTML",r);n.target.setAttribute("data-state",d);p.one(".reply-list").addClass("hidden");i=p.one(".new-reply-list");if(i){i.addClass("hidden")}if(b){b.addClass("hidden")}q.beaconClick(q.config.ult.close_replies,{keys:{bpos:o[0],cpos:o[1]}})}else{if(g.indexOf("closed-replies")>-1){p.replaceClass("closed-replies","expanded-replies");p.one(".reply-list").removeClass("hidden");i=p.one(".new-reply-list");n.target.set("innerHTML",r);n.target.setAttribute("data-state",d);if(i){i.removeClass("hidden")}if(b){b.removeClass("hidden")}q.beaconClick(q.config.ult.open_replies,{keys:{bpos:o[0],cpos:o[1]}})}else{m="GET_REPLIES";c=p.one(".reply-list-container");if(!c){c=p.appendChild(q.getReplyListTemplate());j=c.one(".reply-list")}else{j=c.one(".reply-list");j.empty()}if(f){h=f.getAttribute("data-context")}if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m7")}q.fetchContent({target:n.currentTarget,container:j,api:m,query:"comment_id="+l,start:function(e){p.addClass("expanded-replies");n.target.set("innerHTML",r);n.target.setAttribute("data-state",d);if(g.indexOf("expanded-postbox")>-1){q.activeXhr.loaders[e]=j.appendChild(q.templates.loader)}else{if(k){q.activeXhr.loaders[e]=q.nodes.list.insertBefore(q.templates.loader,k)}else{q.activeXhr.loaders[e]=q.nodes.list.appendChild(q.templates.loader)}}},end:function(e){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m7");window.MediaPerfTiming.done("Comments")}},success:function(x,s,t){var v=c.one("#reply-postbox-"+l),u=p.one(".new-reply-list"),w;if(!v){if(q.config.loginStatus){q.insertPostbox({container:c,commentId:l})}}else{v.removeClass("hidden")}if(u){w=u.all(".js-item");w.each(function e(z){var y=z.getAttribute("data-reply");if(t.data.commentList.indexOf(y)>-1){z.remove(true)}})}},failure:function(t,e,s){p.removeClass("expanded-replies");n.target.set("innerHTML",n.target.getAttribute("data-reply"))},content_id:h});q.beaconClick(q.config.ult.open_replies,{keys:{bpos:o[0],cpos:o[1]}})}}},loadMoreReplies:function(j){var m=this,l=j.currentTarget.ancestor(m.classnames.listItem),f=j.currentTarget.ancestor().next(".reply"),k=l.getAttribute("data-page").split("-"),g=l.getAttribute("data-cmt"),i=j.currentTarget.getAttribute("data-page").split("-"),b=j.currentTarget.ancestor(".reply-list"),c=l.ancestor(m.classnames.userCommentBody),d="",h="GET_REPLIES";if(c){d=c.getAttribute("data-context")}if(window.MediaPerfTiming){window.MediaPerfTiming.startTimer("Comments","m8")}m.fetchContent({target:j.currentTarget,container:b,api:h,query:"&comment_id="+g+"&"+j.currentTarget.getAttribute("data-query"),start:function(e){m.activeXhr.loaders[e]=b.insertBefore(m.templates.loader,f)},end:function(e){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m8");window.MediaPerfTiming.done("Comments")}},content_id:d});m.beaconClick(m.config.ult.more_replies,{keys:{bpos:k[0],cpos:k[1],rbpos:i[0]}})},postCommentNReply:function(s){var p=this,x=s.target,f="comment",t=null,u=null,l="",d,q,v,k,m,n,g,c,o,h,y,r=p.getContentMetadata(),w=x.ancestor(p.classnames.userCommentBody),j=(w)?w.getAttribute("data-context"):p.config.contentId,i=w?w.one(".context-title a").getAttribute("href"):null,b=w?w.one(".context-title a").get("text"):r.title;if(s.target.hasClass("post-button")){s.preventDefault()}m={content_id:j,url:r.url,contextUrl:i||r.url,contextTitle:b,nickName:p.nodes.container.one(".comments-preview .nickname").get("text").replace(/^\s+|\s+$/g,"")};if(x.ancestor(".replies-postbox",false,p.classnames.list)){f="reply";o="POST_REPLIES";v=x.ancestor(".replies-postbox",false,".reply-list-container");t=v.one(".comment-input-textarea");u=v.one(".comment-input-copy");l=t.get("value");n=x.ancestor(".reply-list-container",false,p.classnames.listItem);k=n.one(".new-reply-list");g=x.ancestor(".comment",false,p.classnames.list);if(!k){k=n.insertBefore(p.templates.newReplyList,v)}c="reply";y=v.one(p.classnames.error);m.comment_id=x.ancestor(p.classnames.listItem).getAttribute("data-cmt");m.reply=l}else{o="POST_COMMENTS";v=x.ancestor(".comments-postbox",false,p.classnames.container);t=v.one(".comment-input-textarea");u=v.one(".comment-input-copy");l=t.get("value");k=p.nodes.list;c="comment";y=v.one(p.classnames.error);m.title=r.title;m.img=r.image;m.comment=l}p.removeErrorNodes(k);h=parseInt(t.getAttribute("maxlength"),10);if(""===l.replace(/\s/g,"")){p.handlePostError({input:t,node:y,msg:p.templates[f].errorEmpty,max:h});return}else{if(l.length>h){p.handlePostError({input:t,node:y,msg:p.templates[f].errorTooLong.replace("%N",parseInt(t.get("value").length-h,10)),max:h});return}}t.purge();t.setData("errorHandler",false);t.set("value","");u.empty();d=p.nodes.container.one(".comments-preview").getContent();q=a.Node.create('<li class="'+c+' comments-preview js-item">'+d+"</li>");q.one(".comment-content").setContent(p.escapePostContent(l));if("reply"===f){q.one(".action-container").remove()}q.addClass("transition");p.postXhr({api:o,postParams:m,success:function(E,z,A){var B,C,D,e=A.previewContent;if("comment"===f){p.config.newPostCounter+=1;B=A.data.message.selfURI.split("comment/")[1];e.setAttribute("data-postNumber",p.config.newPostCounter);e.setAttribute("data-cmt",B);p.beaconClick(p.config.ult.post_comment)}else{C=s.currentTarget.ancestor(p.classnames.listItem);D=C.getAttribute("data-page").split("-");if(""!==D[0]){p.beaconClick(p.config.ult.post_reply,{keys:{bpos:D[0],cpos:D[1]}})}else{p.beaconClick(p.config.ult.post_reply_new_comment,{keys:{bpos:"1",cpos:(p.config.newPostCounter-C.getAttribute("data-postNumber"))+1+""}})}}if(p.activeXhr.loaders[E]){p.activeXhr.loaders[E].get("parentNode").replace(e);delete p.activeXhr.loaders[E]}setTimeout(function(){e.removeClass("comments-preview")},200)},failure:function(F,z,B){var A="",E,D,e=B.postInput,C=B.errorNode;A=m.comment||m.reply;if(p.activeXhr.loaders[F]){p.activeXhr.loaders[F].remove(true);delete p.activeXhr.loaders[F]}e.set("value",A);p.resizePostbox({currentTarget:e});if(B&&B.data&&B.data.status&&401===B.data.status){D=p.getLoginUrl({contextUrl:i||null,commentId:m.comment_id});E=p.templates[f].errorRevalidate.replace("http://login.yahoo.com",D);p.handlePostError({input:e,node:C,msg:E,max:h})}else{if(B&&B.data&&B.data.status&&400===B.data.status&&B.data.error&&B.data.error.description&&B.data.error.description.search("illegal link")!==-1){p.handlePostError({input:e,node:C,msg:"<p>Sorry, we only allow links to verified websites in comments</p>",max:h})}else{p.handlePostError({input:e,node:C,msg:"<p>"+p.strings.errorGeneric+"</p>",max:h})}}},start:function(e){if(g&&g.hasClass("closed-replies")){a.Event.simulate(g.one(".replies").getDOMNode(),"click")}if("reply"===f){k.appendChild(p.templates.loader)}else{k.prepend(p.templates.loader)}p.activeXhr.loaders[e]=k.one(".comments-loader")},args:{previewContent:q,postInput:t,errorNode:y}})},handlePostError:function(c){var b=this;c.node.setContent(c.msg);c.node.removeClass("hidden");if(!c.input.getData("errorHandler")){c.input.on("keyup",b.updatePostError,b,c);c.input.on("blur",b.updatePostError,b,c);c.input.setData("errorHandler",true)}},updatePostError:function(f,c){var b=this,d;c.node.setContent("");if(c.max){d=parseInt(c.input.get("value").length-c.max,10);if(d>0){c.node.setContent(b.strings.postErrorTooLong.replace("%N",d))}}},rateComment:function(g){var n=this,h,j,d,i,m=g.target.ancestor(n.classnames.listItem),b=m.ancestor(n.classnames.userCommentBody),l,f=g.currentTarget,c=f.one(".count"),k={content_id:n.config.contentId,comment_id:""};if(b){k.content_id=b.getAttribute("data-context");k.contextUrl=b.one(".context-title a").getAttribute("href")}if(m.hasClass("reply")){k.reply_id=m.getAttribute("data-reply");k.comment_id=g.currentTarget.ancestor(".comment").getAttribute("data-cmt")}else{k.comment_id=m.getAttribute("data-cmt")}if(!n.config.loginStatus){if(!n.config.deviceIsDesktop){n.mobileLoginRedirect({e:g,action:"rate",commentId:k.comment_id,replyId:k.reply_id||null})}else{n.renderLoginOverlay(g,"rate")}}else{if(m.hasClass("reply")){l=m.ancestor(".reply-list-container");i=l.getAttribute("data-page").split("-");d=m.getAttribute("data-index").split("-");j={sec:"cmmt-ry",keys:{bpos:i[0],cpos:i[1],rbpos:d[0],rpos:d[1]}}}else{i=m.getAttribute("data-page").split("-");j={sec:"cmmt",keys:{bpos:i[0],cpos:i[1]}}}if(f.hasClass("up")){k.rating_value="thumbsUp";h="vote-up";j.linkname="rate-pos"}else{if(f.hasClass("down")){k.rating_value="thumbsDown";h="vote-down";j.linkname="rate-neg"}else{return}}if(m.one(n.classnames.error)){m.one(n.classnames.error).setContent("")}n.postXhr({postParams:k,api:"RATE_COMMENTS",success:function(p,e,o){c.set("innerHTML",n.incrementRatingCount(c.getHTML()));g.currentTarget.ancestor("div.comment-container").addClass(h);n.beaconClick(n.config.ult.rate,j)},failure:function(q,e,o){var p;if(o&&401===o.data.status){p=n.strings.validate.replace("http://login.yahoo.com",n.getLoginUrl({contexturl:k.contextUrl||null,commentId:k.comment_id,replyId:k.reply_id||null}));n.handleRateError({msg:p,item:m})}else{if(o&&400===o.data.status&&o.data.error){if(o.data.error.detail&&o.data.error.detail.content[0]&&o.data.error.detail.content[0].search("already rated")){c.set("innerHTML",n.incrementRatingCount(c.getHTML()));g.currentTarget.ancestor("div.comment-container").addClass(h);j.linkname="rate-dup";n.beaconClick(n.config.ult.rate,j)}}else{n.handleRateError({msg:"<p>"+n.strings.errorGeneric+"</p>",item:m})}}}})}},featureComment:function(c){var b=this,d=c.ancestor(b.classnames.userCommentBody),e={content_id:b.config.contentId,comment_id:""};if(d){e.content_id=d.getAttribute("data-context")}if(c.hasClass("reply")){e.reply_id=c.getAttribute("data-reply");e.comment_id=c.ancestor(".comment").getAttribute("data-cmt")}else{e.comment_id=c.getAttribute("data-cmt")}if(c.one(".featured")){e.rating_value="thumbsDown"}else{e.rating_value="thumbsUp"}e.feature="yes";b.postXhr({postParams:e,api:"RATE_COMMENTS",success:null,failure:null})},isRateable:function(c){var b;if(c.hasClass("vote-box")){b=c.ancestor(".comment-container",false,"ul");if(b.hasClass("mine")||b.hasClass("vote-up")||b.hasClass("vote-down")){return false}else{return true}}},renderLoginOverlay:function(d,c){var b=this;if(!b.signupRendered&&(!b.nodes.signupParent||b.nodes.signupParent!==d.currentTarget)){b.addLoginOverlay(d,c)}else{if(b.signupRendered&&b.nodes.signupParent&&b.nodes.signupParent!==d.currentTarget){b.removeLoginOverlay();b.addLoginOverlay(d,c)}}if(d.metaKey){return}else{d.currentTarget.blur()}},addLoginOverlay:function(l,d){var p=this,q=p.nodes.container.one("#comments-signup"),m=q?'<div class="comments-signup" data-action="'+d+'">'+q.getContent()+"</div>":null,k,i,o,f,j,h,b,n,c,g;if(!p.signupRendered&&m){k=l.currentTarget.appendChild(m);i=l.target.ancestor(p.classnames.listItem,false,"ul");if(i.hasClass("reply")){j=i.ancestor(".comment").getAttribute("data-cmt")}else{j=i.getAttribute("data-cmt")}if(i){h=i.getAttribute("data-reply");b=h?j+"_"+h:j;k.all("a").each(function(r){var e=r.getAttribute("href");if(e){o=l.target.ancestor(p.classnames.userCommentBody);if(o){if(e.indexOf("open.login.yahoo.com")!=-1){e=o.getAttribute("fburl")}n=e.substr(0,e.indexOf("?")),c=a.QueryString.parse(e.substr(e.indexOf("?")+1));g=o.one(".context-title a").getAttribute("href")}else{n=e.substr(0,e.indexOf("?")),c=a.QueryString.parse(e.substr(e.indexOf("?")+1));g=decodeURIComponent(c[".done"])}if("body"===p.config.location){c[".done"]=p.replaceQueryParam(g,"bcmt",b)}else{c[".done"]=p.replaceQueryParam(g,"bcmt","")}e=n+"?"+a.QueryString.stringify(c);r.setAttribute("href",e)}})}p.signupRendered=true;p.nodes.signup=k;p.nodes.signupParent=l.currentTarget;l.stopPropagation()}},removeLoginOverlay:function(){var b=this;a.fire("MCC:hide-overlay",{node:b.nodes.signupParent});b.nodes.signup.remove(true);b.signupRendered=false;delete b.nodes.signup;delete b.nodes.signupParent},displayModule:function(g){var c=this,d=null,e=null,b=window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search,f="";if(YUI.namespace("Media").hasOwnProperty("ads_supp_ugc")&&"1"===YUI.Media.ads_supp_ugc){d=c.nodes.container.one(".pharma").removeClass("hidden");if(d){if(-1<b.indexOf("?")){d.set("href",b+"&nopharma=1")}else{d.set("href",b+"?nopharma=1")}}return}if(c.config.deeplinkId){if("comments-postbox"===c.config.deeplinkId){e="#comments-postbox"}else{f=f+"&bcmt="+c.config.deeplinkId;e="#deeplink-end"}c.fetchContent({target:g,container:c.nodes.container,api:"GET_ALL",query:f,start:function(h){c.activeXhr.loaders[h]=c.nodes.container.appendChild(c.templates.loaderDiv)},success:function(l,h,i){var k=c.nodes.container.one(e),j;if(k){k.scrollIntoView()}c.config.postCrumb=c.nodes.postBox.getAttribute("data-crumb")},end:function(k,i,j){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m2");window.MediaPerfTiming.done("Comments")}var h=c.nodes.container.one(".collapsed-loading.comments-loader");if(h){h.remove(true)}c.shown=true}})}else{c.fetchContent({target:g,container:c.nodes.container,api:"GET_ALL",query:f,start:function(h){c.activeXhr.loaders[h]=c.nodes.container.appendChild(c.templates.loaderDiv)},success:function(o,j,l){var i=this,m,n,k,h;i.config.postCrumb=i.nodes.postBox.getAttribute("data-crumb");i.beaconEvent(i.config.ult.module_impression);if("body"!==i.config.location&&("lightbox"!==i.config.location||i.config.enableCommentLightbox!==1)){m=i.nodes.postBox.one(".comment-input-div a");if(m){k=m.get("href");n=a.QueryString.parse(k.substr(k.indexOf("?")+1));h=i.replaceQueryParam(n[".done"],"bcmt","");k=i.replaceQueryParam(k,".done",h);m.set("href",k)}}},end:function(k,i,j){if(window.MediaPerfTiming){window.MediaPerfTiming.endTimer("Comments","m2");window.MediaPerfTiming.done("Comments")}var h=c.nodes.container.one(".collapsed-loading.comments-loader");if(h){h.remove(true)}c.shown=true}})}},fetchContent:function(g){var c=this,i,h=["?content_id=",g.content_id||c.config.contentId,"&_device=",c.config.device].join(""),f,e=c.getContentMetadata(),d,b;if("GET_ALL"===g.api){h=h+"&done="+encodeURIComponent(window.location.protocol+"//"+window.location.host+window.location.pathname+window.location.search)}if(g.query){h=h+"&"+g.query}if("clear"===c.config.cache){h=h+"&cache=clear"}if(1===c.config.enableViewOthers){h=h+"&_media.modules.content_comments.switches._enable_view_others=1"}if(1===c.config.enableMuteCommenter){h=h+"&_media.modules.content_comments.switches._enable_mutecommenter=1"}h=h+"&enable_collapsed_comment="+c.config.enableCollapsedComment;i={api:g.api,queryString:h,container:g.container,replaceContent:g.replaceContent,start:function(j){c.removeErrorNodes(g.container);if(g.start&&"function"===typeof g.start){g.start.call(c,j)}},end:g.end||null,success:function(q,l,o){var p=o.data,j,n,m,k;if(p.loginProfile){if(""!==p.loginProfile.guid){c.config.loginStatus=true}else{c.config.loginStatus=false}c.config.loginProfile=p.loginProfile}if(p.module){g.container.insert(p.module,"replace");c.bindNodes();c.bindEvents();g.container=c.nodes.list;c.config.activeSort=c.getCorrespondingSortParam(p.activeSort)}if(g.target&&!g.target.hasClass("replies")){g.target.ancestor().remove(true)}if(!c.config.loginStatus){if(p.commentList){p.commentList=p.commentList.replace("vote-up","","gi").replace("vote-down","","gi")}}if(p.commentList&&p.commentList.indexOf("NO_COMMENTS")===-1){if(p.deeplink){p.commentList=p.deeplink+c.templates.deeplinkEnd+p.commentList}if(p.profilebox){p.commentList=p.profilebox+p.commentList}m=a.Node.create(p.commentList);if("GET_ALL"===g.api){k=m.all(".comment");k.each(function(s,r){if(r>=c.config.initialCommentsCount){s.addClass("hidden")}})}else{if(c.config.firstFetch){c.config.firstFetch=false;k=c.nodes.list.all(".comment.hidden");k.removeClass("hidden")}}if(g.replaceContent){g.container.insert(m,"replace")}else{if("GET_REPLIES"===g.api){g.container.prepend(m)}else{g.container.appendChild(m)}}c.removeErrorNodes(g.container);if(g.uiUpdateFunction){g.uiUpdateFunction.apply(c)}}else{if("GET_COMMENTS"===g.api){g.container.empty();if(g.uiUpdateFunction){g.uiUpdateFunction.apply(c)}c.hideSortBar()}else{if("GET_ALL"===g.api){if(c.config.loginStatus){c.nodes.postBoxInput.set("placeholder",c.strings.beTheFirst);n=c.nodes.postBox.one(".iemessage");if(n){n.removeClass("hidden")}}c.hideSortBar()}}}if("GET_REPLIES"!==g.api){c.bindInfiniteScroll();if(!c.config.infinite.impressionBeaconFired){c.config.infinite.container=c.nodes.container;c.config.infinite.containerY=c.config.infinite.container.getY()}}if(p.more&&(""!==p.more.replace(/\s/g,""))){if(!c.config.firstFetch&&p.more.indexOf("show_all")>-1){}else{if("GET_REPLIES"!==g.api){j=g.container.appendChild(p.more);c.config.infinite.node=j.one(".generic-button");c.config.infinite.nodeY=c.config.infinite.node.getY()}else{g.container.prepend(p.more)}}}else{if("GET_COMMENTS"===g.api&&c.config.infinite.impressionBeaconFired){c.detachInfiniteScroll()}}if(p.refresh){c.nodes.filterBar.activeFilter.set("innerHTML",p.refresh.activeFilter);if(c.config.loginStatus){c.nodes.postBoxInput.set("placeholder",p.refresh.postboxPlaceholder)}if(p.commentList.indexOf("NO_COMMENTS")===-1){c.nodes.sortBar.removeClass("hidden")}}if(g.success&&"function"===typeof g.success){g.success.call(c,q,l,o)}a.Global.fire("pane-manager:sync-nav-pane-scroll")},failure:g.failure||null};c.getXhr(i)},insertPostbox:function(f){var e=this,c=e.nodes.postBox.cloneNode(true),b=c.one(".comment-input-textarea"),g=c.one(".post-button"),d=c.one(".comment-input-copy"),i=c.one(".guideline-button"),h;c.replaceClass("comments-postbox","replies-postbox");c.replaceClass("cmmt","cmmt-ry");c.removeClass("hidden");c.removeAttribute("id");if(b){b.empty();b.set("placeholder",e.strings.post_reply)}if(g){g.ancestor().removeClass("shrunk");g.set("value",e.strings.reply)}if(i){i.remove(true)}if(d){d.empty()}h=c.one(e.classnames.error);if(h){h.setContent("")}c.all(".signup-menu a").each(function(k){var j=k.getAttribute("href");j=j.replace("comments-postbox",f.commentId);k.setAttribute("href",j)});c.set("id","reply-postbox-"+f.commentId);f.container.append(c)},getXhr:function(h){var c=this,g={},e={api:h.api,info:h.queryString},d=function(l,j,k){var i="li";if(c.nodes.container===h.container){i="div"}if("abort"!==j.statusText&&!h.ignoreErrors){if(k&&k.message){if(h.replaceContent){h.container.prepend(c.getErrorTemplate(i,k.message))}else{h.container.appendChild(c.getErrorTemplate(i,k.message))}}else{if(h.replaceContent){h.container.prepend(c.getErrorTemplate(i,c.strings.errorGeneric))}else{h.container.appendChild(c.getErrorTemplate(i,c.strings.errorGeneric))}}if(h.failure&&"function"===typeof h.failure){h.failure.call(c,l,j,k)}if(j){e.response=j}c.errlog(e,h.api+" failed")}},f=function(m,i,j){var k;try{k=a.JSON.parse(i.responseText)}catch(l){d.call(c,m,i,{message:c.strings.errorGeneric});if(i){e.response=i}c.errlog(e,l);return}if(k.status<300){if(h.success&&"function"===typeof h.success){h.success.call(c,m,i,{data:k})}}else{if(k.message){d.call(c,m,i,{message:k.message})}else{d.call(c,m,i,{message:c.strings.errorGeneric})}}},b=function(i){if(c.activeXhr.loaders[i]){c.activeXhr.loaders[i].remove(true);delete c.activeXhr.loaders[i]}delete c.activeXhr.GET;if(h.end&&"function"===typeof h.end){h.end.call(c,i)}};if(c.activeXhr.GET&&c.activeXhr.GET.xhr.isInProgress()){if(c.activeXhr.GET.api===h.api){if(c.activeXhr.GET.query===h.queryString){return}else{if("GET_REPLIES"!==h.api){c.activeXhr.GET.xhr.abort()}}}else{c.activeXhr.GET.xhr.abort()}}if(1===c.config.enableCacheControl){g["Cache-Control"]="max-age=0"}c.activeXhr.GET={api:h.api,query:h.queryString,xhr:a.io(c.config.XHR[h.api]+h.queryString,{on:{success:f,failure:d,start:h.start||null,end:b},headers:g})}},postXhr:function(h){var c=this,f=h.api+a.JSON.stringify(h.postParams),e={api:h.api,info:h.postParams},d=function(k,i,j){if(h.failure&&"function"===typeof h.failure){h.failure.call(c,k,i,j)}if(i){e.response=i}c.errlog(e,h.api+" failed")},g=function(n,j,k){var l,i=k||{};try{l=a.JSON.parse(j.responseText)}catch(m){d.call(c,n,j,i);if(j){e.response=j}c.errlog(e,m);return}i.data=l;if(l.status<300){if(h.success&&"function"===typeof h.success){h.success.call(c,n,j,i)}}else{d.call(c,n,j,i)}},b=function(i){delete c.activeXhr[h.api+h.postParams];if(h.end&&"function"===typeof h.end){h.end.call(c,i)}};h.postParams.crumb=c.config.postCrumb;if(c.activeXhr[f]&&c.activeXhr[f].isInProgress()){return}else{c.activeXhr[f]=a.io(c.config.XHR[h.api],{method:"POST",data:h.postParams,on:{success:g,failure:d,start:h.start||null,end:b},arguments:h.args})}},onMoreActionsClick:function(h){var c=this,g=h.target,f=null,d,b;if(g.get("className").indexOf("Icon")>-1){g=g.ancestor("button")}if(g.get("className").indexOf("flag")>-1){f=g.ancestor(c.classnames.listItem,false,c.classnames.list);if(f.hasClass("reply")){d=f.ancestor(".comment").getAttribute("data-cmt")}else{d=f.getAttribute("data-cmt")}b=g.ancestor(c.classnames.commentContainer,false,c.classnames.listItem);if(!c.config.loginStatus){if(!c.config.deviceIsDesktop){c.mobileLoginRedirect({e:h,action:"abuse",commentId:d,replyId:f.getAttribute("data-reply")||null})}else{if(b.hasClass("active")){b.removeClass("active");return}c.renderLoginOverlay(h,"abuse");b.addClass("active");return}}else{c.nodes.list.all(".report-container").addClass("hidden");c.nodes.list.all(".hover-disabled").removeClass("hover-disabled");c.fireReportAbuseFlagClickBeacon(f);c.displayReportForm(f,g,b)}}},swipeStart:function(f){var b=this,c=f.currentTarget,d=f.target,g=(f.touches!==undefined)?f.touches[0]:f;c.once("selectstart",function(h){h.preventDefault()});b.activeSwipe.moveEvent=c.on("gesturemove",a.bind(b.swipeMove,b));b.cleanActiveSwipe();b.activeSwipe.x=g.pageX;b.activeSwipe.y=g.pageY;b.activeSwipe.startClientX=b.activeSwipe.x;b.activeSwipe.startClientY=b.activeSwipe.y;b.activeSwipe.startScrollY=window.scrollY},swipeMove:function(d){if(!d){return}var b=this,c=false,f=(d.touches!==undefined)?d.touches[0]:d;b.activeSwipe.x=f.pageX;b.activeSwipe.y=f.pageY;b.activeSwipe.deltaX=b.activeSwipe.x-b.activeSwipe.startClientX;b.activeSwipe.deltaY=b.activeSwipe.y-b.activeSwipe.startClientY;b.activeSwipe.deltaAX=Math.abs(b.activeSwipe.deltaX);b.activeSwipe.deltaAY=Math.abs(b.activeSwipe.deltaY);if(b.shouldPreventDefault()){d.preventDefault();if(d.hasOwnProperty("stopPropagation")){d.stopPropagation()}}},swipeEnd:function(h){var d=this,f=h.currentTarget,g=h.target,c=f.one(d.classnames.commentContainer),b=h.container;d.activeSwipe.endScrollY=window.scrollY;d.activeSwipe.moveEvent.detach();if(!d.isTapEvent()){if(this.isValidSwipe()){if(c.hasClass("active")){c.removeClass("active")}else{b.all(".active").removeClass("active");c.addClass("active")}}}d.cleanActiveSwipe()},cleanActiveSwipe:function(){var b=this;b.activeSwipe.x=0;b.activeSwipe.y=0;b.activeSwipe.deltaX=0;b.activeSwipe.deltaY=0;b.activeSwipe.deltaAX=0;b.activeSwipe.deltaAY=0;b.activeSwipe.startScrollY=0;b.activeSwipe.endScrollY=0},shouldPreventDefault:function(){var c=this,b=false;if("x"===c.activeSwipe.axis){if(c.activeSwipe.deltaAX>(c.activeSwipe.deltaAY*2)){b=true}}else{if("y"===c.activeSwipe.axis){if(c.activeSwipe.deltaAY>(c.activeSwipe.deltaAX*2)){b=true}}}return b},isValidSwipe:function(){var b=this,c=Math.abs(b.activeSwipe.startScrollY-b.activeSwipe.endScrollY);b.activeSwipe.deltaAY+=c;if(b.activeSwipe["deltaA"+b.activeSwipe.axis.toUpperCase()]<b.activeSwipe.swipeMinDistance){return false}if("x"===b.activeSwipe.axis){if(b.activeSwipe.deltaAY>b.activeSwipe.invalidSwipeRange||b.activeSwipe.deltaAY>b.activeSwipe.deltaAX){return false}}return true},isTapEvent:function(){var b=this;if(b.activeSwipe.deltaAX<b.activeSwipe.tapThreshold&&b.activeSwipe.deltaAY<b.activeSwipe.tapThreshold){return true}return false},removeCommentNode:function(d,c){var b=this;if(c.isTransition){d.addClass("transition-delete")}else{d.addClass("hidden")}setTimeout(function(){var h=d.get("className"),j=d.ancestor(b.classnames.listItem,false,b.classnames.list),g,k,e,f,i;d.remove(true);if(h.indexOf("reply")>-1){g=j.getAttribute("data-cmt");i=j.all(".js-item");if(0===i.size()){j.removeClass("expanded-replies");k=j.one("#reply-postbox-"+g);if(k){k.remove(true)}e=j.one(".replies");if(e){e.remove(true)}f=j.one(".reply-list-container");if(f){f.remove(true)}}}else{}},500)},confirmMuteAndReportAbuse:function(m){var n=this,i=m.one(".comment-container"),k,d=m.one(".report-container").getComputedStyle("height"),b=m.one(".form-report-abuse"),g=b.one(".other-reason").get("value"),j=b.one(".category.mute:checked")?true:false,l=b.one(".category.simplify:checked"),h=m.getAttribute("data-uid"),e=n.nodes.reportMsgForm.cloneNode(true),f,c=5000;e.setStyle("height",d);e.removeClass("hidden");if(l){e.one(".comments-report-message").removeClass("hidden")}if(j){e.one(".comments-mute-message").removeClass("hidden")}i.siblings().addClass("hidden");f=m.appendChild(e);n.fireMuteAndReportAbuseBeacon(m,{reason:l?"other":"skip",mute:j});if(l){n._doReportAbuse(m,g);if(!j){a.later(c,n,function(){i=m.one(".comment-container").cloneNode(true);k=i.one(".action-container");if(k){k.remove()}i.one(".actions").remove();i.all(".vote-box").remove();i.one(".comment-content").setContent(n.templates.msgReport);i.addClass("done-report-abuse");m.setContent(i)},null)}}if(!j){return}n.activeMute[h]={};n.activeMute[h].timer=a.later(c,n,n.muteComment,{item:m});if(n.config.deviceIsDesktop){n.activeMute[h].mouseLeave=f.on("mouseleave",function(o){n.activeMute[h].timer=a.later(c,n,n.muteComment,{item:m})},n);n.activeMute[h].mouseEnter=f.on("mouseenter",function(o){if(n.activeMute[h].timer){n.activeMute[h].timer.cancel()}},n)}},undoMute:function(i){var c=this,h=("li"===i.currentTarget.get("tagName").toLowerCase())?i.currentTarget:i.currentTarget.ancestor(c.classnames.listItem),f=h.getAttribute("data-uid"),d=h.one(".report-message-container"),b=h.one(".comment-container"),g=c.getUltParam(h,"cmmt-abse");if(c.activeMute[f].timer){c.activeMute[f].timer.cancel()}b.removeClass("hover-disabled");d.addClass("transition-delete");setTimeout(function(){d.remove(true)},500);c.beaconClick(c.config.ult.unmute,g)},muteComment:function(d){var b=this,f=d.item,e=f.getAttribute("data-uid"),g,c;c=function(o,k,l){var j=this,m=f.one(".report-message-container"),n=f.one(".list-error"),i=f.one(j.classnames.commentContainer);j.activeMute[e].mouseEnter.detach();j.activeMute[e].mouseLeave.detach();setTimeout(function(){m.addClass("transition-delete");m.remove(true);if(n){n.addClass("transition-delete");n.remove(true)}i.removeClass("hover-disabled")},3000)};g=function(k,i,j){b.removeCommentNode(f,{isTransition:true});b.nodes.list.all(".js-item").each(function(l){if(e===l.getAttribute("data-uid")){b.removeCommentNode(l,{isTransition:false})}})};var h=["?mute_user_id=",f.getAttribute("data-uid"),"&crumb=",b.nodes.postBox.getAttribute("data-crumb")].join("");b.getXhr({api:"MUTE_USER",queryString:h,container:f,replaceContent:false,start:null,end:null,success:g,failure:c})},_doReportAbuse:function(c,e){var b=this,d=c.ancestor(b.classnames.userCommentBody),f={};f={content_id:b.config.contentId,comment_id:"",reply_id:""};if(e){f.reason=e}if(c.hasClass("reply")){f.reply_id=c.getAttribute("data-reply");f.comment_id=c.ancestor(".comment").getAttribute("data-cmt")}else{delete f.reply_id;f.comment_id=c.getAttribute("data-cmt")}if(d){f.content_id=d.getAttribute("data-context")}b.postXhr({api:"REPORT_ABUSE",postParams:f,success:function(i,g,h){},failure:function(i,g,h){},args:{item:c}})},doReportAbuse:function(c,e){var b=this,d=c.ancestor(b.classnames.userCommentBody),f={};c.appendChild(b.templates.listLoadMask.replace("-{{id}}",""));f={content_id:b.config.contentId,comment_id:"",reply_id:"",reason:e||"other"};if(c.hasClass("reply")){f.reply_id=c.getAttribute("data-reply");f.comment_id=c.ancestor(".comment").getAttribute("data-cmt")}else{delete f.reply_id;f.comment_id=c.getAttribute("data-cmt")}if(d){f.contextUrl=d.one(".context-title a").getAttribute("href");f.content_id=d.getAttribute("data-context")}b.fireMuteAndReportAbuseBeacon(c,{reason:e});b.postXhr({api:"REPORT_ABUSE",postParams:f,success:function(l,h,j){var k=j.item,g=k.one(".comment-container"),i=g.one(".action-container");g.one(".actions").remove();g.all(".vote-box").remove();g.one(".comment-content").setContent(b.templates.msgReport);if(i){i.remove()}g.addClass("done-report-abuse");k.setContent(g)},failure:function(m,g,h){var k=h.data.status,j=h.item,i,l;j.one(".loading-mask").remove();if(k&&401===k){i=b.templates.report.errorRevalidate.replace("http://login.yahoo.com",b.getLoginUrl({contextUrl:f.contextUrl||null,commentId:f.comment_id,replyId:f.reply_id||null}))}else{i=b.strings.errorGeneric}l=j.one(".report-container .err");l.setContent("<p>"+i+"</p>");l.removeClass("hidden")},args:{item:c}})},getUltConfig:function(){var b={view_comments:{sec:"cmmt",outcome:"open",keys:{ltxt:"view",itc:"1",cf:true,test:""}},view_comments_top:{sec:"cmmt-top",outcome:"open",keys:{ltxt:"view",itc:"1",cf:true,test:""}},module_impression:{name:"secview",keys:{sec:"cmmt",slk:"start",cf:true,test:""}},more_comments:{sec:"cmmt",linkname:"more",outcome:"fetch",keys:{itc:"1",bpos:"[n]",cf:true,test:""}},infinite_scroll:{name:"scrolldown",outcome:"fetch",keys:{sec:"cmmt",slk:"fetch",itc:"1",bpos:"[n]",cf:true,test:""}},module_end:{sec:"cmmt",linkname:"end",keys:{cf:true,test:""}},post_comment:{sec:"cmmt-top",linkname:"post",outcome:"comment",keys:{itc:"1",cf:true,test:""}},post_reply:{sec:"cmmt-ry",linkname:"post",outcome:"comment",keys:{bpos:"[n]",cpos:"[n]",itc:"1",cf:true,test:""}},post_reply_new_comment:{sec:"cmmt-ry-new",linkname:"post",outcome:"comment",keys:{bpos:"[n]",cpos:"[n]",itc:"1",cf:true,test:""}},delete_comment:{sec:"cmmt",linkname:"del",keys:{itc:"1",test:""}},delete_reply:{sec:"cmmt-ry",linkname:"del",keys:{itc:"1",test:""}},select_filter:{sec:"cmmt",linkname:"filter",outcome:"filter",keys:{ltxt:"[all/my]",itc:"1",test:""}},select_sort:{sec:"cmmt",linkname:"sort",outcome:"sort",keys:{ltxt:"[pop/new/old/mostr]",itc:"1",test:""}},reply_link:{sec:"cmmt",linkname:"reply",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},open_replies:{sec:"cmmt",linkname:"open",outcome:"open",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},close_replies:{sec:"cmmt",linkname:"close",outcome:"close",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},more_replies:{sec:"cmmt-ry",linkname:"more",outcome:"fetch",keys:{itc:"1",bpos:"[n]",cpos:"[n]",rbpos:"[n]",cf:true,test:""}},report_abuse_flag:{sec:"[cmmt-ctrl/cmmt-ctrl-ry]",linkname:"abuse",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},report_abuse:{sec:"[cmmt-abse/cmmt-abse-ry]",linkname:"abuse",outcome:"abuse",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},unmute:{sec:"[cmmt-abse/cmmt-abse-ry]",linkname:"unmute",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},rate:{sec:"[cmmt/cmmt-ry]",linkname:"[rate-pos/rate-neg]",outcome:"share",keys:{itc:"1",bpos:"[n]",cpos:"[n]",cf:true,test:""}},profiles:{sec:"[cmmt/cmmt-ry]",linkname:"profiles",keys:{bpos:"[n]",cpos:"[n]",itc:"1",cf:true,test:""}},login_point:{sec:"[cmmt/cmmt-ry/cmmt-rate/cmmt-abuse]",linkname:"[login-yh/login-fb/login-go]",outcome:"login",keys:{itc:"1",cf:true,test:""}}};return b},beaconClick:function(e,d){var c=this,b={};if(d&&d.keys){d.keys=a.merge(e.keys,d.keys)}b=a.merge(e,d);if(b.keys){b.keys.test=c.chrome.getBucketId();if(b.keys.cf){b.keys.cf=c.config.activeFilter+"-"+c.config.activeSort}}a.Global.fire("rapid-tracker:click",{mod_id:c.config.modId,data:b})},beaconEvent:function(e,d){var c=this,b={};if(d&&d.keys){d.keys=a.merge(e.keys,d.keys)}b=a.merge(e,d);if(b.keys){b.keys.test=c.chrome.getBucketId();if(b.keys.cf){b.keys.cf=c.config.activeFilter+"-"+c.config.activeSort}}a.Global.fire("rapid-tracker:event",{mod_id:c.config.modId,data:b})},getContentMetadata:function(){var b={title:this.config.contentMetadata.title,type:"",description:"",url:this.config.contentMetadata.url};a.all("meta").each(function(d){var c=d.getAttribute("property");if(""===c){}else{if("og:title"===c){b.title=d.get("content")}else{if("og:type"===c){b.type=d.get("content")}else{if("og:description"===c){b.description=d.get("content")}else{if("og:url"===c){b.url=d.get("baseURI")||d.get("content")}else{if("og:image"===c){b.image=d.get("content")}}}}}}});return b},getLoginUrl:function(f){var c=this,e,d,b,g;if(c.config.deviceIsDesktop){g=c.config.desktopLoginUrl}else{if(c.config.deviceIsSmartphone||c.config.deviceIsTablet){g=c.config.mobileLoginUrl}else{return"http://www.yahoo.com"}}if("body"===c.config.location){if(f&&f.commentId){e=f.replyId?f.commentId+"_"+f.replyId:f.commentId;d=f.contextUrl?f.contextUrl:window.location.toString();b=c.replaceQueryParam(d,"bcmt",e);return g+"&.done="+encodeURIComponent(b)}else{b=c.replaceQueryParam(window.location.toString(),"bcmt","comments-postbox");return g+"&.done="+encodeURIComponent(b)}}else{return g+"&.done="+encodeURIComponent(window.location.toString())}},handleRateError:function(b){if(b.item.one(".rate-err")){b.item.one(".rate-err").setContent(b.msg)}else{b.item.append('<div class="rate-err err">'+b.msg+"</div>")}},displayReportForm:function(n,c,i){var o=this,h,k,j,d,f=false;i.addClass("hover-disabled");i.removeClass("active");if(!f){f=o.nodes.reportForm.cloneNode(true);f.all(".category").each(function(q){q.next("label").setAttribute("htmlFor",q.generateID())});if(1===o.config.enableMuteCommenter){var p=f.one(".mute-prompt"),b=p.get("innerHTML")+" ",g=i.one(".nickname > .profile-link").cloneNode(true);p.set("innerHTML",b);p.append(g);g.removeAttribute("tabindex")}i.insert(f,"after")}f.removeClass("hidden");if(o.config.deviceIsDesktop||(1===o.config.enableMuteCommenter&&o.config.deviceIsTablet)){h=f.one(".more-reason");if(h){k=h.one("input.category");j=h.one("label");d=h.one("input.other-reason");if(k&&j&&d){var e=parseInt(h.getComputedStyle("width"),10);var m=parseInt(k.get("offsetWidth"),10)+parseInt(k.getComputedStyle("marginLeft"),10)+parseInt(k.getComputedStyle("marginRight"),10)+parseInt(j.get("offsetWidth"),10)+parseInt(j.getComputedStyle("marginLeft"),10)+parseInt(j.getComputedStyle("marginRight"),10);var l=e-m;if(l>0){if(o.config.deviceIsTablet){d.setStyle("width",l*0.975+"px")}else{d.setStyle("width",l*0.99+"px");d.setStyle("float","right")}d.setStyle("padding","2px 2px");if(1===o.config.enableMuteCommenter){h.setStyle("marginTop","15px")}else{h.setStyle("marginTop","5px")}h.setStyle("marginBottom","15px")}}}}if(f.getY()+f.get("clientHeight")>a.DOM.winHeight()+a.DOM.docScrollY()){f.scrollIntoView()}},onAbuseReasonChange:function(h){var c=this,f=h.currentTarget.one(".form-report-abuse"),g=h.currentTarget.one(c.classnames.error),b=f.one(".other-reason"),d=f.one(".select-category"),i;i=(c.config.deviceIsSmartphone)?d.get("value"):f.one(".category:checked").get("value");if("other"===i){b.focus()}else{}g.setContent("")},onAbuseSubmit:function(i){var l=this,f,h,c=0===l.config.enableMuteCommenter?i.currentTarget:i.currentTarget.ancestor("form"),b=c.one(".other-reason"),m=b.get("value"),d=parseInt(b.getAttribute("maxlength"),10),j=i.currentTarget.one(l.classnames.error),g=c.one(".select-category"),k=c.ancestor(l.classnames.listItem,false,l.classnames.list);i.preventDefault();f=(l.config.deviceIsSmartphone&&0===l.config.enableMuteCommenter)?g.get("value"):c.one(".category:checked");if(!f){if(1===l.config.enableMuteCommenter){k.one(".title").addClass("hidden");k.one(".err").removeClass("hidden")}else{l.handlePostError({input:b,node:j,msg:l.templates.report.errorSelectViolation,max:d})}return}h=(l.config.deviceIsSmartphone)?f:f.get("value");if("other"===h){if(""===m.replace(/\s/g,"")){l.handlePostError({input:b,node:j,msg:l.templates.report.errorOtherEmpty,max:d});return}h=h+":"+m}if(1===l.config.enableMuteCommenter){l.confirmMuteAndReportAbuse(k)}else{l.doReportAbuse(k,h)}},expertAction:function(f){var b=this,d=f.target,c=d.ancestor(b.classnames.expertActionItem);confirm=a.Node.create(b.templates.areYouSure);f.preventDefault();c.append(confirm);d.addClass("hidden");confirm.removeClass("hidden")},expertCancel:function(g){var b=this,i=g.target,d=i.ancestor(b.classnames.expertActionItem),f=d.one("a"),c=i.ancestor(b.classnames.expertActionConfirm),h;g.preventDefault();f.removeClass("hidden");c.remove(true)},expertConfirm:function(h){var b=this,j=h.target,d=j.ancestor(b.classnames.expertActionItem),g=d.one("a"),c=j.ancestor(b.classnames.expertActionConfirm),f=d.ancestor(b.classnames.listItem,false,b.classnames.list),i;h.preventDefault();if(g.hasClass("remove")){b._doReportAbuse(f,"Remove");b.removeCommentNode(f,{isTransition:true})}else{if(g.hasClass("feature")){b.featureComment(f);if(f.one(".featured")){g.setContent(b.strings.feature);f.one(".featured").remove(true)}else{g.setContent(b.strings.unfeature);i=a.Node.one(b.classnames.featured).cloneNode(true);i.removeClass("hidden");f.one(".nickname").append(i)}g.removeClass("hidden");c.remove(true)}}},hideSortBar:function(){var b=this;if(b.nodes.sortBar){b.nodes.sortBar.addClass("hidden")}},mobileLoginRedirect:function(d){var b=this,e=d.e.target.ancestor(b.classnames.listItem),f=e.ancestor(b.classnames.userCommentBody),c;if(f){d.contextUrl=f.one(".context-title a").getAttribute("href")}c=b.getLoginUrl(d);b.fireOverlayLoginBeacon(d.e,{type:"login-yh",action:d.action});window.location=c},incrementRatingCount:function(c){var b=a.Lang.trim(c.toLowerCase());if(-1!==b.indexOf("m")||-1!==b.indexOf("k")){return c}b=parseInt(b,10);if(!a.Lang.isNumber(b)){return c}if(999===b){return"1k"}return b+1},replaceQueryParam:function(b,c,e){var g=b.indexOf("?"),d,f={};if(g>-1){d=b.substr(0,g);f=a.QueryString.parse(b.substr(g+1))}else{d=b}if(""===e){delete f[c]}else{f[c]=e}return d+"?"+a.QueryString.stringify(f)},getCorrespondingSortParam:function(b){switch(b){case"pop":return"highestRated";case"highestRated":return"pop";case"new":return"latest";case"latest":return"new";case"old":return"oldest";case"oldest":return"old";case"rep":return"mostReplied";case"mostReplied":return"rep"}},refreshWithContextID:function(c){var b=this,d=null;if(!c){return}b.config.contentId=c;if(b.shown){if("my"===b.config.activeFilter||"user"===b.config.activeFilter){b.nodes.filterBar.filterSwitch.setAttribute("data-cf","my");b.nodes.filterBar.filterSwitch.setContent(b.strings.myComments);b.nodes.filterBar.activeFilter.setAttribute("data-cf","all");b.nodes.filterBar.activeFilter.setContent(b.strings.allComments);b.config.activeFilter="all";d=function(){var e=this;e.nodes.sortBar.removeClass("hidden");e.nodes.postBox.removeClass("hidden")}}b.loadComments(null,{api:"GET_COMMENTS",query:"refreshContext=1&sortBy="+b.getCorrespondingSortParam(b.config.activeSort),removeTarget:false,replaceContent:true,uiUpdateFunction:d,maskType:"full"})}else{b.updateCount()}},updateCount:function(){var b=this,d,c="?content_id="+b.config.contentId;if("clear"===b.config.cache){c=c+"&cache=clear"}d={api:"GET_CONTEXT",queryString:c,ignoreErrors:true,start:function(e){},end:null,success:function(i,e,f){var g=f.data,h=b.nodes.showCommentsButton?b.nodes.showCommentsButton.one("#total-comment-count"):null;if(h&&g.count){h.setContent(g.count)}},failure:null};b.getXhr(d)},escapePostContent:function(b){return b.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/\r?\n/g,"<br/>")}})},"0.0.1",{requires:["base","node-base","event-base","event-custom","event-move","event-mouseenter","io-base","json-parse"]});
/* videoInlinePlayer.js 8cab8cc */ YUI.add("media-inlinevideoplayer",function(a){function b(c){b.superclass.constructor.apply(this,arguments)}b.NAME="InlineVideoPlayer";b.ATTRS={};a.extend(b,a.Base,{initializer:function(e){var c=this,h=e.video,f=h.video_config,d=e.containerId,g=h.player_type;if(c.isJSLoaded(g)){c.loadPlayer(g,f,d)}else{a.Get.js([h.js_url,h.inline_js_url],{onFailure:function(){a.log("Error loading JS: "+err[0].error+" or script already loaded","error")},onSuccess:function(){c.loadPlayer(g,f,d)}})}},isJSLoaded:function(c){if(c=="vevo"){return(typeof a.Media.VevoInlineVideoPlayer!=="undefined")}else{if(c=="hulu"){return(typeof a.Media.HuluInlineVideoPlayer!=="undefined")}else{return(typeof a.Media.YepCAInlinePlayer!=="undefined")}}},loadPlayer:function(e,d,c){if(e==="vevo"){a.use("media-vevoinlinevideoplayer",function(){var f=new a.Media.VevoInlineVideoPlayer(d);f.render(c)})}else{if(e==="hulu"){a.use("media-huluinlinevideoplayer",function(){var f=new a.Media.HuluInlineVideoPlayer(d);f.render(c)})}else{a.use("media-yepcainlineplayer",function(){var f=new a.Media.YepCAInlinePlayer(d);f.render(c)})}}}});a.namespace("Media").InlineVideoPlayer=b},"@VERSION@",{requires:["node"]});
/* con-vid.js 43b7a7a */ YUI.add("media-con-vid",function(b){var a="content-video:playvideo";b.namespace("Media").ContentVideo=b.Base.create("media-con-vid",b.Base,[],{config:{},chrome:"",initializer:function(d){var c=this;c.config=d&&d.config?d.config:{};c.chrome=d&&d.chrome?d.chrome:"";c.playlist=c.config.playlist||null;b.detach(a);b.on(a,c._handleVideos,c)},_handleVideos:function(j){var n=this,k=j.id,c=j.playlist||n.playlist,g=j.containerId,l,h,d,f,m;if(!c){return}l=b.Lang.isArray(c)?c:JSON.parse(c);h=l.length;for(d=0;d<h;d++){if(l[d].id===k){f=l[d];if(YMedia&&YMedia.sapiPrefetch&&YMedia.sapiPrefetch[k]){if(f&&f.video_config){f.video_config.sapiResponse=JSON.stringify(YMedia.sapiPrefetch[k])}}break}}m=new b.Media.InlineVideoPlayer({video:f,containerId:g})}})},"0.0.1",{requires:["node-base","arraylist","arraylist-add","swf","swfdetect","media-inlinevideoplayer"]});/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("swfdetect",function(e,t){function c(e){return parseInt(e,10)}function h(e){i.isNumber(c(e[0]))&&(r.flashMajor=e[0]),i.isNumber(c(e[1]))&&(r.flashMinor=e[1]),i.isNumber(c(e[2]))&&(r.flashRev=e[2])}var n=0,r=e.UA,i=e.Lang,s="ShockwaveFlash",o,u,a,f,l;if(r.gecko||r.webkit||r.opera){if(o=navigator.mimeTypes["application/x-shockwave-flash"])if(u=o.enabledPlugin)a=u.description.replace(/\s[rd]/g,".").replace(/[A-Za-z\s]+/g,"").split("."),h(a)}else if(r.ie){try{f=new ActiveXObject(s+"."+s+".6"),f.AllowScriptAccess="always"}catch(p){f!==null&&(n=6)}if(n===0)try{l=new ActiveXObject(s+"."+s),a=l.GetVariable("$version").replace(/[A-Za-z\s]+/g,"").split(","),h(a)}catch(d){}}e.SWFDetect={getFlashVersion:function(){return String(r.flashMajor)+"."+String(r.flashMinor)+"."+String(r.flashRev)},isFlashVersionAtLeast:function(e,t,n){var i=c(r.flashMajor),s=c(r.flashMinor),o=c(r.flashRev);return e=c(e||0),t=c(t||0),n=c(n||0),e===i?t===s?n<=o:t<s:e<i}}},"3.18.1",{requires:["yui-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("swf",function(e,t){function d(t,n,d){this._id=e.guid("yuiswf");var v=this._id,m=o.one(t),d=d||{},g=d.version||l,y=(g+"").split("."),b=r.isFlashVersionAtLeast(parseInt(y[0],10),parseInt(y[1],10),parseInt(y[2],10)),w=r.isFlashVersionAtLeast(8,0,0),E=w&&!b&&d.useExpressInstall,S=E?c:n,x="<object ",T,N,C="yId="+e.id+"&YUISwfId="+v+"&YUIBridgeCallback="+h+"&allowedDomain="+document.location.hostname;e.SWF._instances[v]=this;if(m&&(b||E)&&S){x+='id="'+v+'" ',s.ie?x+='classid="'+a+'" ':x+='type="'+f+'" data="'+u.html(S)+'" ',T="100%",N="100%",x+='width="'+T+'" height="'+N+'">',s.ie&&(x+='<param name="movie" value="'+u.html(S)+'"/>');for(var k in d.fixedAttributes)p.hasOwnProperty(k)&&(x+='<param name="'+u.html(k)+'" value="'+u.html(d.fixedAttributes[k])+'"/>');for(var L in d.flashVars){var A=d.flashVars[L];i.isString(A)&&(C+="&"+u.html(L)+"="+u.html(encodeURIComponent(A)))}C&&(x+='<param name="flashVars" value="'+C+'"/>'),x+="</object>",m.set("innerHTML",x),this._swf=o.one("#"+v)}else{var O={};O.type="wrongflashversion",this.publish("wrongflashversion",{fireOnce:!0}),this.fire("wrongflashversion",O)}}var n=e.Event,r=e.SWFDetect,i=e.Lang,s=e.UA,o=e.Node,u=e.Escape,a="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000",f="application/x-shockwave-flash",l="10.0.22",c="http://fpdownload.macromedia.com/pub/flashplayer/update/current/swf/autoUpdater.swf?"+Math.random(),h="SWF.eventHandler",p={align:"",allowFullScreen:"",allowNetworking:"",allowScriptAccess:"",base:"",bgcolor:"",loop:"",menu:"",name:"",play:"",quality:"",salign:"",scale:"",tabindex:"",wmode:""};d._instances=d._instances||{},d.eventHandler=function(e,t){d._instances[e]._eventHandler(t)},d.prototype={_eventHandler:function(e){e.type==="swfReady"?(this.publish("swfReady",{fireOnce:!0}),this.fire("swfReady",e)):e.type!=="log"&&this.fire(e.type,e)},callSWF:function(e,t){return t||(t=[]),this._swf._node[e]?this._swf._node[e].apply(this._swf._node,t):null},toString:function(){return"SWF "+this._id}},e.augment(d,e.EventTarget),e.SWF=d},"3.18.1",{requires:["event-custom","node","swfdetect","escape"]});

/* content-share-buttons-int.js 5e4593a */ YUI.add("media-content-share-buttons-int",function(c){var a="media:remove-node";function b(d){b.superclass.constructor.apply(this,arguments)}b.NAME="contentsharebuttonsint";c.extend(b,c.Media.MediaContentSocialBase,{initializer:function(d){var e="";if(d.modId){this.config={};this.config.modId=d.modId;this.config.sec=d.sec||"unv-sh";this.config.container=d.container;this.config.device=d.device;this.config.moreMenuPosition=d.moreMenuPosition||"bottom";this.config.moreMenuDelay=d.moreMenuDelay||20;this.modNode=null;this.orientationDetect=null;this._onCloseHandlers={};if(c.one("#"+this.config.modId)!==null){this.modNode=c.one("#"+this.config.modId)}else{if(c.one(this.config.container)!==null){this.modNode=c.one(this.config.container)}else{c.log("No modNode found!");return}}if(d.btns instanceof Array){this.globalEvt=d.btns}else{this.globalEvt=new Array();this.globalEvt.push("tumblr");this.globalEvt.push("facebook");this.globalEvt.push("twitter");this.globalEvt.push("mail");this.globalEvt.push("whatsapp")}if(!(d.isForBeacon&&d.isForBeacon=="1")){this._globalEventPublisher();this._globalEventHandlers(this.modNode)}if(d.device==="smartphone"&&this.modNode!==null){if(c.UA.android<3&&c.UA.android>1){this.modNode.all(".share-btn .btn-popup").addClass("fallback")}this.config.overlayBlob=d.overlayBlob}if(c.UA.android){e="android"}else{if(c.UA.ios&&c.UA.ios>=7){e="ios7"}else{if(c.UA.ios){e="ios6"}}}if(e){this.modNode.all(".share-btn").addClass(e)}if(c.UA.android>0||(c.UA.safari&&c.UA.safari<536)){c.all(".share-btns-int-container .btn-icon").addClass("fallback")}if(d.container&&c.one(d.container)!==null){this._buttonClickHandler(d.container)}this.config.doClean=c.Global.on(a,this._doClean,this)}},_renderOverlay:function(){var e=this,d=c.DOM.viewportRegion(),h=this.config.modId;this.overlayNode=c.Node.create(this.config.overlayBlob).addClass(h);if(c.UA.android<3&&c.UA.android>1){this.overlayNode.all(".share-btn .btn-icon").addClass("fallback")}if(!(c.UA.iphone>=7)){this.overlayNode.one(".share-btn.cancel").addClass("bottom")}this.overlayNode.all(".share-btn").addClass("hidden");var j=this.overlayNode.one(".share-btn.cancel");if(j){j.removeClass("hidden")}for(var g=0;g<this.globalEvt.length;g++){var f=this.overlayNode.one(".share-btn."+this.globalEvt[g]);if(f){f.removeClass("hidden")}}this.overlay=new c.Overlay({srcNode:this.overlayNode.one(".share-btns-overlay"),zIndex:20000000});c.one("body").append(this.overlayNode);this.overlay.render();this._buttonClickHandler(".share-btn-int-overlay-container");this.MDHeight=d.height;this._orientationDetection();this._adjustOverlayButtonsStyle();c.all("video").setAttribute("controls",false).addClass("hidden");c.one("body").on("share-btn-int-overlay|touchmove",function(i){i.preventDefault()},this)},_adjustOverlayButtonsStyle:function(){var e=this.config.modId,d=c.DOM.viewportRegion(),f=c.one("."+e+" .share-btns-popup-layout");if(f){if(d.width>d.height){f.addClass("landscape")}else{f.removeClass("landscape")}}},_orientationDetection:function(){var d=this,e=this.config.modId;if(this.orientationDetect===null){c.detach("share-btn-int-overlay|resize");this.orientationDetect=c.on("share-btn-int-overlay|resize",function(h){var f=c.DOM.viewportRegion(),g=f.height,i=f.width;d.overlay.syncUI();if(d.overlay!==null){if(g!=d.MDHeight||i!=d.MDWidth){d.MDHeight=g;d._adjustOverlayButtonsStyle();d.overlay.syncUI()}}})}},_globalEventPublisher:function(){var f=this.config.modId;if(c.Global){for(var d=0;d<this.globalEvt.length;d++){var e=f+":"+this.globalEvt[d];c.Global.publish(e,{broadcast:true})}}},_handleTooltip:function(f){var d,e;if(!f||c.UA.mobile){return}d=c.Node.create('<div class="sharebuttons-tooltip"><div class="yui3-widget-bd">bd</div><div class="yui3-widget-ft"></div></div>');this.tooltip=new c.Overlay({srcNode:d,zIndex:100001000});this.tooltip.hide();this.tooltip.render();f.delegate("tooltip|mouseover",function(i){var h=i.currentTarget.ancestor(".share-btn"),g=h&&h.getAttribute("class")||"";if(g.indexOf("more")>-1){return}e=i.currentTarget.getAttribute("title");this.tooltip.set("bodyContent",e);this.tooltip.set("align",{node:i.currentTarget,points:[c.WidgetPositionAlign.BC,c.WidgetPositionAlign.TC]});d.setAttribute("class","sharebuttons-tooltip "+g.replace("share-btn",""));this.tooltip.show()},".share-btn a",this);f.delegate(["tooltip|mouseout","tooltip|click"],function(){this.tooltip.hide()},".share-btn a",this)},_globalEventHandlers:function(f){var d=this,e=this.config.modId;this._handleTooltip(f);c.Global.on(e+"|"+e+":share-overlay",function(g){d._renderOverlay();d._beaconEvent("click",{t1:"a3",t2:"sh",sec:"sh",elm:"img",elmt:"op",_p:1,slk:"menu-sh",itc:1,respns:"op"})});c.Global.on(e+"|"+e+":mail",function(h){var g=h.getAttribute("href");if(d.config.device==="smartphone"||(f&&f.contains(h))){if(g.indexOf("mailto:")==-1){d._popupWindow(h,500,500)}d._beaconClick(d._getSec(h),"btn-sh-ma",d._getPos(h),{itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-ma",_p:d._getPos(h),cpos:d._getPos(h)},"sh")}});c.Global.on(e+"|"+e+":facebook",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-fb",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-fb",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":twitter",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-tw",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-tw",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":tumblr",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-tu",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-tu",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":gplus",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-gp",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-gp",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":linkedin",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){d._popupWindow(h,620,530);var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-li",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-li",d._getPos(h),g,"sh")}});c.Global.on(e+"|"+e+":whatsapp",function(h){if(d.config.device==="smartphone"||(f&&f.contains(h))){var i=(d._getT3(h)),g={itc:1,mid:e,t1:"a3",t2:d._getSec(h),elm:"icn",rspns:"op",elmt:"sh-fb",_p:d._getPos(h),cpos:d._getPos(h)};if(i!==false){g.t3=i}else{g.t4="mnu"}d._beaconClick(d._getSec(h),"btn-sh-wa",d._getPos(h),g,"wa");window.location=h._node.getAttribute("href")}});this._onCloseHandlers.popupClose=c.Global.on(e+"|"+this.mod_id+":popupClose",function(h){if("mail"===h.name||"facebook"===h.name){return}var g="";switch(h.name){case"twitter":g="tw";break;case"facebook":g="fb";break;case"tumblr":g="tu";break;case"gplus":g="gp";break;case"linkedin":g="li";break;case"mail":g="ma";break;case"whatsapp":g="wa";break;default:""}this._fireCloseBeacon(g)},this)},_fireCloseBeacon:function(d){this._beaconClick("sh","send-"+d,1,{itc:1,mid:this.config.modId,t1:"a0",t2:"sh",t3:"send",elm:"btn",elmt:"send-"+d,_p:1})},_getSec:function(d){return(d&&d.hasAttribute("data-share-sec"))?d.getAttribute("data-share-sec"):"unv-sh"},_getPos:function(k){var d=k.getAttribute("data-rapid_p"),j=k.ancestor(),g=j.ancestor().get("childNodes"),f=0;if(d!==""){return d}if(j.ancestor(".moreBoxInner")!==null){f=4}for(var h=0;h<g.size();h++){if(g.item(h)===j){return h+1+f}}},_getT3:function(d){return(d&&d.hasAttribute("data-share-pos"))?d.getAttribute("data-share-pos"):false},_buttonClickHandler:function(f){var g=this,d=c.one(f),k=g.config.modId;if(this.config.device==="smartphone"){d.delegate(k+"|click",function(m){if(m.currentTarget.one("a")!==null){var l=m.currentTarget.one("a").getAttribute("href");if(l.indexOf("mailto:")==-1){m.preventDefault();m.stopPropagation()}}c.one("body").detach("share-btn-int-overlay|touchmove");g.overlayNode.remove(true);g.orientationDetect=null;c.all("video").setAttribute("controls",true).removeClass("hidden")},".close-btn",this)}d.delegate(k+"|click",function(n){var m=k+":"+n.currentTarget.getAttribute("data-share-key"),l=n.currentTarget.getAttribute("href");c.Global.fire(k+":clickButton");if(m!==undefined||evtname!=""){if(l.indexOf("mailto:")==-1){n.halt()}c.Global.fire(m,n.currentTarget)}},".share-btn a",this);var j=d.one(".moreBox"),i=d.all(".share-btn.more a"),e,h=0;if(j&&i.size()>0){e=setInterval(function(){h++;if(j&&j.ancestor("body")){e=window.clearInterval(e);var l=new c.Overlay({srcNode:j,zIndex:100000000}).render(),n,m=function(){j.addClass("hidden")};i.on(k+"|mouseenter",function(o){g._displayMoreMenu(o,j,l,g.config.moreMenuPosition)},g);i.on(k+"|mouseover",function(o){if(n){clearTimeout(n)}},g);i.on(k+"|mouseout",function(o){n=setTimeout(m,g.config.moreMenuDelay)},g);j.on(k+"|mouseover",function(o){if(n){clearTimeout(n)}},g);j.on(k+"|mouseout",function(o){n=setTimeout(m,g.config.moreMenuDelay)},g);i.on(k+"|click",function(o){o.halt();if(j.hasClass("hidden")){g._displayMoreMenu(o,j,l,g.config.moreMenuPosition)}else{j.addClass("hidden")}},g)}else{if(h>20){e=window.clearInterval(e)}}},100)}},_displayMoreMenu:function(h,i,f,d){i.removeClass("hidden");f.set("align",{node:h.currentTarget,points:(d&&"top"===d)?[c.WidgetPositionAlign.BR,c.WidgetPositionAlign.TR]:[c.WidgetPositionAlign.TR,c.WidgetPositionAlign.BR]});var g=f.get("xy");f.move([g[0]+10,g[1]])},_popupWindow:function(l,g,s,q,r){var e=l.getAttribute("href"),r=(r===undefined)?l.getAttribute("data-share-key"):r,m=this.config.modId,g=(g)?g:500,s=(s)?s:450,q=(q===undefined)?"yes":"no";pos=(l.getAttribute("data-share-pos")!="")?("-"+l.getAttribute("data-share-pos")):"";var h=window.outerWidth||document.documentElement.clientWidth||document.body.clientWidth;var d=window.outerHeight||document.documentElement.clientHeight||document.body.clientHeight;var k=window.screenX||window.screenLeft||0;var i=window.screenY||window.screenTop||0;var j=(h/2)-(g/2)+k;var p=(d/2)-(s/2)+i;if(e===undefined||e==""||r===undefined||r==""||m===undefined||m==""){return}var o=window.open(e,r,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars="+q+", resizable=yes, copyhistory=no, width="+g+", height="+s+", top="+p+", left="+j),f={name:r,pos:pos},n=setInterval(function(){if(o.closed){clearInterval(n);c.Global.fire(m+":popupClose",f);c.Global.fire("rumbleStrip:open",f)}},1000);this.childWindow=o},updateShareInfo:function(G){if(!G||!G.url){return}if(this.modNode){if(-1==G.url.indexOf("http")){G.url=location.protocol+"//"+location.host+G.url}var H=(this.config.device==="smartphone"&&this.config.overlayBlob)?c.Node.create(this.config.overlayBlob):this.modNode,g=H.one(".facebook a"),m=H.one(".twitter a"),l=H.one(".tumblr a"),I=H.one(".linkedin a"),w=H.one(".mail a"),n=H.one(".gplus a"),x=H.one(".whatsapp a"),i=g&&g.get("href"),A=m&&m.get("href"),F=l&&l.get("href"),J=I&&I.get("href"),v=w&&w.get("href"),D=n&&n.get("href"),h=x&&x.get("href");if(i&&-1!=i.indexOf("?")){var f=i.substr(0,i.indexOf("?")),o=c.QueryString.parse(i.substr(i.indexOf("?")+1));o.link=encodeURIComponent(this._addTrackingParam(G.url,"fb"));o.picture=(G.img)?encodeURIComponent(G.img):"";o.name=encodeURIComponent((G.title)?G.title:o.name);o.description=encodeURIComponent((G.desc)?G.desc:o.description);o.source=(G&&G.img&&G.video)?encodeURIComponent(G.video):"";g.set("href",f+"?"+c.QueryString.unescape(c.QueryString.stringify(o)))}if(F&&-1!=F.indexOf("?")){var k="",s={},C=(G.desc&&G.desc.length>0)?G.desc:G.title;if(G.video){k="https://www.tumblr.com/share/video";s.embed=encodeURIComponent(this._addTrackingParam(G.url,"tu"));s.caption=encodeURIComponent(C)}else{if(G.img){k="https://www.tumblr.com/share/photo";s.clickthru=encodeURIComponent(this._addTrackingParam(G.url,"tu"));s.caption=encodeURIComponent(C);s.source=encodeURIComponent(G.img)}else{k="https://www.tumblr.com/share/link";s.url=encodeURIComponent(this._addTrackingParam(G.url,"tu"));s.name=(G.title)?encodeURIComponent(G.title):"";s.description=(G.desc)?encodeURIComponent(G.desc):""}}l.set("href",k+"?"+c.QueryString.unescape(c.QueryString.stringify(s)))}if(A&&-1!=A.indexOf("?")){var E=A.substr(0,A.indexOf("?")),p=c.QueryString.parse(A.substr(A.indexOf("?")+1)),B=(G.text&&G.text.length)?G.text:((G.title&&G.title.length)?G.title:"");p.url=encodeURIComponent(this._addTrackingParam(G.url,"tw"));p.text=encodeURIComponent((B.length>100)?B.substring(0,97)+"...":B);m.set("href",E+"?"+c.QueryString.unescape(c.QueryString.stringify(p)))}if(D&&-1!=D.indexOf("?")){var u=D.substr(0,D.indexOf("?")),t=c.QueryString.parse(D.substr(D.indexOf("?")+1));t.url=encodeURIComponent(this._addTrackingParam(G.url,"gp"));t.hl=(YMedia&&YMedia.Media&&YMedia.Media.pageChrome&&YMedia.Media.pageChrome.lang)?YMedia.Media.pageChrome.lang:"en-US";n.set("href",u+"?"+c.QueryString.unescape(c.QueryString.stringify(t)))}if(J&&-1!=J.indexOf("?")){var y=J.substr(0,J.indexOf("?")),d=c.QueryString.parse(J.substr(J.indexOf("?")+1));d.url=encodeURIComponent(this._addTrackingParam(G.url,"li"));d.title=encodeURIComponent(G.title);d.summary=encodeURIComponent(G.desc);I.set("href",y+"?"+c.QueryString.unescape(c.QueryString.stringify(d)))}if(h&&-1!=h.indexOf("?")){var j=h.substr(0,h.indexOf("?")),q=c.QueryString.parse(h.substr(h.indexOf("?")+1));q.text=encodeURIComponent(this._addTrackingParam(G.url,"wa"));x.set("href",j+"?"+c.QueryString.unescape(c.QueryString.stringify(q)))}if(v&&-1!=v.indexOf("?")){var r=v.substr(0,v.indexOf("?")),z=c.QueryString.parse(v.substr(v.indexOf("?")+1));if(this.config.device==="smartphone"){z.body=G.url;z.subject=(G.title)?G.title:""}else{z.url=encodeURIComponent(this._addTrackingParam(G.url,"ma"));z.share_image=(G.img)?encodeURIComponent(G.img):"";z.alias_id=""}w.set("href",r+"?"+c.QueryString.unescape(c.QueryString.stringify(z)))}if(this.config.device==="smartphone"&&this.config.overlayBlob){this.config.overlayBlob=H.get("outerHTML")}}},_addTrackingParam:function(f,g){if(!f){return""}var e=f.indexOf("?"),d=(-1===e)?f:f.substr(0,e),h=(-1===e)?{}:c.QueryString.parse(f.substr(e+1));h.soc_src=this.config.sec;if(g){h.soc_trk=g}return d+"?"+c.QueryString.unescape(c.QueryString.stringify(h))},_doClean:function(h){if(!h){return}var d=this,f=d.config,g=h.node,i=d.modNode;if(g.contains(i)){c.detach("share-btn-int-overlay|*");c.one("body").detach("share-btn-int-overlay|*");c.Global.detach(this.config.modId+"|*");this.modNode.detach("tooltip|*");if(this.tooltip){this.tooltip.destroy(true)}if(this.config.doClean&&this.config.doClean.detach){this.config.doClean.detach()}this.config=null;d=null}},destructor:function(){c.detach("share-btn-int-overlay|*");c.one("body").detach("share-btn-int-overlay|*");c.Global.detach(this.config.modId+"|*");this.modNode.detach("tooltip|*");if(this.tooltip){this.tooltip.destroy(true)}if(this.config.doClean&&this.config.doClean.detach){this.config.doClean.detach()}this.config=null}});c.namespace("Media").ContentShareButtonsInt=b},"0.1.0",{requires:["base-base","base-build","base-pluginhost","event-base","event-custom","node-base","node-core","io","json","querystring-stringify-simple","overlay","dom-screen","media-content-social-base"]});
/* content-social-base.js f516ed2 */ YUI.add("media-content-social-base",function(b){function a(c){a.superclass.constructor.apply(this,arguments)}a.NAME="mediacontentsocialbase";b.extend(a,b.Base,{initializer:function(d){var c=this;if(d&&d.mod_id){c.mod_id=d.mod_id}else{if(d&&d.modId){c.mod_id=d.modId}}},_beaconClick:function(f,c,i,d,g){var h;d.mid=this.mod_id;h={data:{sec:f,linkname:c,pos:parseInt(i,10),keys:d},mod_id:this.mod_id};if(g){h.data.outcome=g}b.Global.fire("rapid-tracker:click",h)},_beaconEvent:function(d,c,f){var g;c.mid=this.mod_id;c.act=d;g={data:{name:d,keys:c},mod_id:this.mod_id};if(f){g.data.outcome=f}b.Global.fire("rapid-tracker:event",g)},_decodeHTML:function(f){var e=b.Node.create("<p>"+f+"</p>"),d=e.get("innerText"),c=(d)?d:e.get("textContent");return c},_updateMixer:function(p,g,j){if(!j.id){return}var h="",k=this;switch(p){case"email":h="email";break;case"fb:like":h="fblike";break;case"fb:recommend":h="fbrecommend";break;case"fb:follow":h="follow";break;case"fbshare":h="fbshare";break;case"tweet":h="tweet";break;case"tumblr":h="share";break;case"linkedin":h="share";break;case"tw:follow":h="follow";break;case"inshare":h="lnkdshare";break;case"googleplus":h="plusone";break;case"pinterest":h="pinit";break;case"userstatus":h="userstatus";break;case"whatsapp":h="share";break;case null:case"mail":case"print":default:return}var i="action="+h+"&site="+g.site+"&region="+g.region+"&lang="+g.lang+"&crumb="+g.scrumb,l="/_xhr/mixer-update/";switch(h){case"follow":var c=g.url_orig,m=g.title_orig,r=g.content_id,q=j.id,e=j.name,f=j.url;i+="&url="+c+"&title="+m+"&content_id="+r+"&event_id="+q+"&event_name="+e+"&event_url="+f;break;case"userstatus":break;default:var c=j.url_orig,m=j.title_orig,r=j.id,o=j.summary,n=j.type;i+="&url="+c+"&title="+m+"&content_id="+r+"&description="+o+"&contentType="+n}if(window.FB){FB.getLoginStatus(function(s){if(s.status=="connected"){i+="&fbid="+s.authResponse.userID+"&access_token="+s.authResponse.accessToken+"&expires_in="+s.authResponse.expiresIn}})}var d={method:"POST",data:i,context:this,sync:false,on:{start:function(){},complete:function(){},success:function(v,s,u){var t=b.JSON.parse(s.responseText);k.userConnectStatus=t},failure:function(){}}};b.io(l,d)},_fireBeacon:function(j){var d=(j.currentTarget.getAttribute("href"))?j.currentTarget.getAttribute("href").replace("http://",""):"",c=(j.currentTarget.getAttribute("data-ylk"))?j.currentTarget.getAttribute("data-ylk").replace(/"/g,"").split(";"):null,h="";for(var g=0;g<c.length;g++){var f=c[g].split(":");if(f[0]&&f[1]){if(h){if(f[0]!=="itc"&&f[0]!=="_p"&&f[0]!=="cpos"){h+=',"'+f[0]+'":"'+f[1]+'"'}else{h+=',"'+f[0]+'":'+f[1]}}else{if(f[0]!=="itc"&&f[0]!=="_p"&&f[0]!=="cpos"){h+='"'+f[0]+'":"'+f[1]+'"'}else{h+='"'+f[0]+'":'+f[1]}}}}h="{"+h+"}";this._beaconEvent("secvw",h)}});b.namespace("Media").MediaContentSocialBase=a},"0.0.2",{requires:["base","event-base","event-custom","node-base","node-core","io","json"]});/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-xml-parse",function(e,t){e.mix(e.namespace("XML"),{parse:function(t){var n=null,r;return typeof t=="string"&&(r=e.config.win,r.ActiveXObject!==undefined?(n=new ActiveXObject("Microsoft.XMLDOM"),n.async=!1,n.loadXML(t)):r.DOMParser!==undefined?n=(new DOMParser).parseFromString(t,"text/xml"):r.Windows!==undefined&&(n=new Windows.Data.Xml.Dom.XmlDocument,n.loadXml(t))),n===null||n.documentElement===null||n.documentElement.nodeName==="parsererror",n}}),e.namespace("Parsers").xml=e.XML.parse,e.namespace("DataType"),e.DataType.XML=e.XML},"3.18.1");
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("io-xdr",function(e,t){function a(e,t,n){var r='<object id="io_swf" type="application/x-shockwave-flash" data="'+e+'" width="0" height="0">'+'<param name="movie" value="'+e+'">'+'<param name="FlashVars" value="yid='+t+"&uid="+n+'">'+'<param name="allowScriptAccess" value="always">'+"</object>",i=s.createElement("div");s.body.appendChild(i),i.innerHTML=r}function f(t,n,r){return n==="flash"&&(t.c.responseText=decodeURI(t.c.responseText)),r==="xml"&&(t.c.responseXML=e.DataType.XML.parse(t.c.responseText)),t}function l(e,t){return e.c.abort(e.id,t)}function c(e){return u?i[e.id]!==4:e.c.isInProgress(e.id)}var n=e.publish("io:xdrReady",{fireOnce:!0}),r={},i={},s=e.config.doc,o=e.config.win,u=o&&o.XDomainRequest;e.mix(e.IO.prototype,{_transport:{},_ieEvt:function(e,t){var n=this,r=e.id,s="timeout";e.c.onprogress=function(){i[r]=3},e.c.onload=function(){i[r]=4,n.xdrResponse("success",e,t)},e.c.onerror=function(){i[r]=4,n.xdrResponse("failure",e,t)},e.c.ontimeout=function(){i[r]=4,n.xdrResponse(s,e,t)},e.c[s]=t[s]||0},xdr:function(t,n,i){var s=this;return i.xdr.use==="flash"?(r[n.id]=i,o.setTimeout(function(){try{n.c.send(t,{id:n.id,uid:n.uid,method:i.method,data:i.data,headers:i.headers})}catch(e){s.xdrResponse("transport error",n,i),delete r[n.id]}},e.io.xdr.delay)):u?(s._ieEvt(n,i),n.c.open(i.method||"GET",t),setTimeout(function(){n.c.send(i.data)},0)):n.c.send(t,n,i),{id:n.id,abort:function(){return n.c?l(n,i):!1},isInProgress:function(){return n.c?c(n.id):!1},io:s}},xdrResponse:function(e,t,n){n=r[t.id]?r[t.id]:n;var s=this,o=u?i:r,a=n.xdr.use,l=n.xdr.dataType;switch(e){case"start":s.start(t,n);break;case"success":s.success(f(t,a,l),n),delete o[t.id];break;case"timeout":case"abort":case"transport error":t.c={status:0,statusText:e};case"failure":s.failure(f(t,a,l),n),delete o[t.id]}},_xdrReady:function(t,r){e.fire(n,t,r)},transport:function(t){t.id==="flash"&&(a(e.UA.ie?t.src+"?d="+(new Date).valueOf().toString():t.src,e.id,t.uid),e.IO.transports.flash=function(){return s.getElementById("io_swf")})}}),e.io.xdrReady=function(t,n){var r=e.io._map[n];e.io.xdr.delay=0,r._xdrReady.apply(r,[t,n])},e.io.xdrResponse=function(t,n,r){var i=e.io._map[n.uid];i.xdrResponse.apply(i,[t,n,r])},e.io.transport=function(t){var n=e.io._map["io:0"]||new e.IO;t.uid=n._uid,n.transport.apply(n,[t])},e.io.xdr={delay:100}},"3.18.1",{requires:["io-base","datatype-xml-parse"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("io-form",function(e,t){var n=encodeURIComponent;e.IO.stringify=function(t,n){n=n||{};var r=e.IO.prototype._serialize({id:t,useDisabled:n.useDisabled},n.extra&&typeof n.extra=="object"?e.QueryString.stringify(n.extra):n.extra);return r},e.mix(e.IO.prototype,{_serialize:function(t,r){var i=[],s=t.useDisabled||!1,o=0,u=typeof t.id=="string"?t.id:t.id.getAttribute("id"),a,f,l,c,h,p,d,v,m,g;u||(u=e.guid("io:"),t.id.setAttribute("id",u)),f=e.config.doc.getElementById(u);if(!f||!f.elements)return r||"";for(p=0,d=f.elements.length;p<d;++p){a=f.elements[p],h=a.disabled,l=a.name;if(s?l:l&&!h){l=n(l)+"=",c=n(a.value);switch(a.type){case"select-one":a.selectedIndex>-1&&(g=a.options[a.selectedIndex],i[o++]=l+n(g.attributes.value&&g.attributes.value.specified?g.value:g.text));break;case"select-multiple":if(a.selectedIndex>-1)for(v=a.selectedIndex,m=a.options.length;v<m;++v)g=a.options[v],g.selected&&(i[o++]=l+n(g.attributes.value&&g.attributes.value.specified?g.value:g.text));break;case"radio":case"checkbox":a.checked&&(i[o++]=l+c);break;case"file":case undefined:case"reset":case"button":break;case"submit":default:i[o++]=l+c}}}return r&&(i[o++]=r),i.join("&")}},!0)},"3.18.1",{requires:["io-base","node-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("io-upload-iframe",function(e,t){function u(t,n,r){var i=e.Node.create('<iframe id="io_iframe'+t.id+'" name="io_iframe'+t.id+'" />');i._node.style.position="absolute",i._node.style.top="-1000px",i._node.style.left="-1000px",e.one("body").appendChild(i),e.on("load",function(){r._uploadComplete(t,n)},"#io_iframe"+t.id)}function a(t){e.Event.purgeElement("#io_iframe"+t,!1),e.one("body").removeChild(e.one("#io_iframe"+t))}var n=e.config.win,r=e.config.doc,i=r.documentMode&&r.documentMode>=8,s=decodeURIComponent,o=e.IO.prototype.end;e.mix(e.IO.prototype,{_addData:function(t,n){e.Lang.isObject(n)&&(n=e.QueryString.stringify(n));var i=[],o=n.split("="),u,a;for(u=0,a=o.length-1;u<a;u++)i[u]=r.createElement("input"),i[u].type="hidden",i[u].name=s(o[u].substring(o[u].lastIndexOf("&")+1)),i[u].value=u+1===a?s(o[u+1]):s(o[u+1].substring(0,o[u+1].lastIndexOf("&"))),t.appendChild(i[u]);return i},_removeData:function(e,t){var n,r;for(n=0,r=t.length;n<r;n++)e.removeChild(t[n])},_setAttrs:function(t,n,r){this._originalFormAttrs={action:t.getAttribute("action"),target:t.getAttribute("target")},t.setAttribute("action",r),t.setAttribute("method","POST"),t.setAttribute("target","io_iframe"+n),t.setAttribute(e.UA.ie&&!i?"encoding":"enctype","multipart/form-data")},_resetAttrs:function(t,n){e.Object.each(n,function(e,n){e?t.setAttribute(n,e):t.removeAttribute(n)})},_startUploadTimeout:function(e,t){var r=this;r._timeout[e.id]=n.setTimeout(function(){e.status=0,e.statusText="timeout",r.complete(e,t),r.end(e,t)},t.timeout)},_clearUploadTimeout:function(e){var t=this;n.clearTimeout(t._timeout[e]),delete t._timeout[e]},_uploadComplete:function(t,r){var i=this,s=e.one("#io_iframe"+t.id).get("contentWindow.document"),o=s.one("body"),u;r.timeout&&i._clearUploadTimeout(t.id);try{o?(u=o.one("pre:first-child"),t.c.responseText=u?u.get("text"):o.get("text")):t.c.responseXML=s._node}catch(f){t.e="upload failure"}i.complete(t,r),i.end(t,r),n.setTimeout(function(){a(t.id)},0)},_upload:function(t,n,i){var s=this,o=typeof i.form.id=="string"?r.getElementById(i.form.id):i.form.id,u;return s._setAttrs(o,t.id,n),i.data&&(u=s._addData(o,i.data)),i.timeout&&s._startUploadTimeout(t,i),o.submit(),s.start(t,i),i.data&&s._removeData(o,u),{id:t.id,abort:function(){t.status=0,t.statusText="abort";if(!e.one("#io_iframe"+t.id))return!1;a(t.id),s.complete(t,i),s.end(t,i)},isInProgress:function(){return e.one("#io_iframe"+t.id)?!0:!1},io:s}},upload:function(e,t,n){return u(e,n,this),this._upload(e,t,n)},end:function(e,t){var n,i;return t&&(n=t.form,n&&n.upload&&(i=this,n=typeof n.id=="string"?r.getElementById(n.id):n.id,n&&i._resetAttrs(n,this._originalFormAttrs))),o.call(this,e,t)}},!0)},"3.18.1",{requires:["io-base","node-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("queue-promote",function(e,t){e.mix(e.Queue.prototype,{indexOf:function(t){return e.Array.indexOf(this._q,t)},promote:function(e){var t=this.indexOf(e);t>-1&&this._q.unshift(this._q.splice(t,1)[0])},remove:function(e){var t=this.indexOf(e);t>-1&&this._q.splice(t,1)}})},"3.18.1",{requires:["yui-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("io-queue",function(e,t){function r(e,t){return n.queue.apply(n,[e,t])}var n=e.io._map["io:0"]||new e.IO;e.mix(e.IO.prototype,{_q:new e.Queue,_qActiveId:null,_qInit:!1,_qState:1,_qShift:function(){var e=this,t=e._q.next();e._qActiveId=t.id,e._qState=0,e.send(t.uri,t.cfg,t.id)},queue:function(t,n){var r=this,i={uri:t,cfg:n,id:this._id++};return r._qInit||(e.on("io:complete",function(e,t){r._qNext(e)},r),r._qInit=!0),r._q.add(i),r._qState===1&&r._qShift(),i},_qNext:function(e){var t=this;t._qState=1,t._qActiveId===e&&t._q.size()>0&&t._qShift()},qPromote:function(e){this._q.promote(e)},qRemove:function(e){this._q.remove(e)},qEmpty:function(){this._q=new e.Queue},qStart:function(){var e=this;e._qState=1,e._q.size()>0&&e._qShift()},qStop:function(){this._qState=0},qSize:function(){return this._q.size()}},!0),r.start=function(){n.qStart()},r.stop=function(){n.qStop()},r.promote=function(e){n.qPromote(e)},r.remove=function(e){n.qRemove(e)},r.size=function(){n.qSize()},r.empty=function(){n.qEmpty()},e.io.queue=r},"3.18.1",{requires:["io-base","queue-promote"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-date-parse",function(e,t){e.mix(e.namespace("Date"),{parse:function(t){var n=new Date(+t||t);return e.Lang.isDate(n)?n:null}}),e.namespace("Parsers").date=e.Date.parse,e.namespace("DataType"),e.DataType.Date=e.Date},"3.18.1");
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("lang/datatype-date-format_en-US",function(e){e.Intl.add("datatype-date-format","en-US",{a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a, %b %d, %Y %l:%M:%S %p %Z",p:["AM","PM"],P:["am","pm"],x:"%m/%d/%y",X:"%l:%M:%S %p"})},"3.18.1");
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-date-format",function(e,t){var n=function(e,t,n){typeof n=="undefined"&&(n=10),t+="";for(;parseInt(e,10)<n&&n>1;n/=10)e=t+e;return e.toString()},r={formats:{a:function(e,t){return t.a[e.getDay()]},A:function(e,t){return t.A[e.getDay()]},b:function(e,t){return t.b[e.getMonth()]},B:function(e,t){return t.B[e.getMonth()]},C:function(e){return n(parseInt(e.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(e){return n(parseInt(r.formats.G(e)%100,10),0)},G:function(e){var t=e.getFullYear(),n=parseInt(r.formats.V(e),10),i=parseInt(r.formats.W(e),10);return i>n?t++:i===0&&n>=52&&t--,t},H:["getHours","0"],I:function(e){var t=e.getHours()%12;return n(t===0?12:t,0)},j:function(e){var t=new Date(""+e.getFullYear()+"/1/1 GMT"),r=new Date(""+e.getFullYear()+"/"+(e.getMonth()+1)+"/"+e.getDate()+" GMT"),i=r-t,s=parseInt(i/6e4/60/24,10)+1;return n(s,0,100)},k:["getHours"," "],l:function(e){var t=e.getHours()%12;return n(t===0?12:t," ")},m:function(e){return n(e.getMonth()+1,0)},M:["getMinutes","0"],p:function(e,t){return t.p[e.getHours()>=12?1:0]},P:function(e,t){return t.P[e.getHours()>=12?1:0]},s:function(e,t){return parseInt(e.getTime()/1e3,10)},S:["getSeconds","0"],u:function(e){var t=e.getDay();return t===0?7:t},U:function(e){var t=parseInt(r.formats.j(e),10),i=6-e.getDay(),s=parseInt((t+i)/7,10);return n(s,0)},V:function(e){var t=parseInt(r.formats.W(e),10),i=(new Date(""+e.getFullYear()+"/1/1")).getDay(),s=t+(i>4||i<=1?0:1);return s===53&&(new Date(""+e.getFullYear()+"/12/31")).getDay()<4?s=1:s===0&&(s=r.formats.V(new Date(""+(e.getFullYear()-1)+"/12/31"))),n(s,0)},w:"getDay",W:function(e){var t=parseInt(r.formats.j(e),10),i=7-r.formats.u(e),s=parseInt((t+i)/7,10);return n(s,0,10)},y:function(e){return n(e.getFullYear()%100,0)},Y:"getFullYear",z:function(e){var t=e.getTimezoneOffset(),r=n(parseInt(Math.abs(t/60),10),0),i=n(Math.abs(t%60),0);return(t>0?"-":"+")+r+i},Z:function(e){var t=e.toString().replace(/^.*:\d\d( GMT[+-]\d+)? \(?([A-Za-z ]+)\)?\d*$/,"$2").replace(/[a-z ]/g,"");return t.length>4&&(t=r.formats.z(e)),t},"%":function(e){return"%"}},aggregates:{c:"locale",D:"%m/%d/%y",F:"%Y-%m-%d",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},format:function(t,i){i=i||{};if(!e.Lang.isDate(t))return e.Lang.isValue(t)?t:"";var s,o,u,a,f;s=i.format||"%Y-%m-%d",o=e.Intl.get("datatype-date-format");var l=function(e,t){if(u&&t==="r")return o[t];var n=r.aggregates[t];return n==="locale"?o[t]:n},c=function(i,s){var u=r.formats[s];switch(e.Lang.type(u)){case"string":return t[u]();case"function":return u.call(t,t,o);case"array":if(e.Lang.type(u[0])==="string")return n(t[u[0]](),u[1]);default:return s}};while(s.match(/%[cDFhnrRtTxX]/))s=s.replace(/%([cDFhnrRtTxX])/g,l);var h=s.replace(/%([aAbBCdegGHIjklmMpPsSuUVwWyYzZ%])/g,c);return l=c=undefined,h}};e.mix(e.namespace("Date"),r),e.namespace("DataType"),e.DataType.Date=e.Date},"3.18.1",{lang:["ar","ar-JO","ca","ca-ES","da","da-DK","de","de-AT","de-DE","el","el-GR","en","en-AU","en-CA","en-GB","en-IE","en-IN","en-JO","en-MY","en-NZ","en-PH","en-SG","en-US","es","es-AR","es-BO","es-CL","es-CO","es-EC","es-ES","es-MX","es-PE","es-PY","es-US","es-UY","es-VE","fi","fi-FI","fr","fr-BE","fr-CA","fr-FR","hi","hi-IN","hu","id","id-ID","it","it-IT","ja","ja-JP","ko","ko-KR","ms","ms-MY","nb","nb-NO","nl","nl-BE","nl-NL","pl","pl-PL","pt","pt-BR","ro","ro-RO","ru","ru-RU","sv","sv-SE","th","th-TH","tr","tr-TR","vi","vi-VN","zh-Hans","zh-Hans-CN","zh-Hant","zh-Hant-HK","zh-Hant-TW"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-date-math",function(e,t){var n=e.Lang;e.mix(e.namespace("Date"),{isValidDate:function(e){return n.isDate(e)&&isFinite(e)&&e!="Invalid Date"&&!isNaN(e)&&e!=null?!0:!1},areEqual:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()==t.getTime()},isGreater:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()>t.getTime()},isGreaterOrEqual:function(e,t){return this.isValidDate(e)&&this.isValidDate(t)&&e.getTime()>=t.getTime()},isInRange:function(e,t,n){return this.isGreaterOrEqual(e,t)&&this.isGreaterOrEqual(n,e)},addDays:function(e,t){return new Date(e.getTime()+864e5*t)},addMonths:function(e,t){var n=e.getFullYear(),r=e.getMonth()+t;n=Math.floor(n+r/12),r=(r%12+12)%12;var i=new Date(e.getTime());return i.setFullYear(n),i.setMonth(r),i},addYears:function(e,t){var n=e.getFullYear()+t,r=new Date(e.getTime());return r.setFullYear(n),r},listOfDatesInMonth:function(e){if(!this.isValidDate(e))return[];var t=this.daysInMonth(e),n=e.getFullYear(),r=e.getMonth(),i=[];for(var s=1;s<=t;s++)i.push(new Date(n,r,s,12,0,0));return i},daysInMonth:function(e){if(!this.isValidDate(e))return 0;var t=e.getMonth(),n=[31,28,31,30,31,30,31,31,30,31,30,31];if(t!=1)return n[t];var r=e.getFullYear();return r%400===0?29:r%100===0?28:r%4===0?29:28}}),e.namespace("DataType"),e.DataType.Date=e.Date},"3.18.1",{requires:["yui-base"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-number-parse",function(e,t){var n=e.Escape.regex,r="\\s*";e.mix(e.namespace("Number"),{_buildParser:e.cached(function(e,t,i,s){var o=[],u;return e&&o.push("^"+r+n(e)+r),t&&o.push(r+n(t)+r+"$"),i&&o.push(n(i)+"(?=\\d)"),u=new RegExp("(?:"+o.join("|")+")","g"),s==="."&&(s=null),function(e){return e=e.replace(u,""),s?e.replace(s,"."):e}}),parse:function(t,n){var r;n&&typeof t=="string"&&(r=this._buildParser(n.prefix,n.suffix,n.thousandsSeparator,n.decimalSeparator),t=r(t)),typeof t=="string"&&e.Lang.trim(t)!==""&&(t=+t);if(typeof t!="number"||!isFinite(t))t=null;return t}}),e.namespace("Parsers").number=e.Number.parse,e.namespace("DataType"),e.DataType.Number=e.Number},"3.18.1",{requires:["escape"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-number-format",function(e,t){var n=e.Lang;e.mix(e.namespace("Number"),{format:function(e,t){if(n.isNumber(e)){t=t||{};var r=e<0,i=e+"",s=t.decimalPlaces,o=t.decimalSeparator||".",u=t.thousandsSeparator,a,f,l,c;n.isNumber(s)&&s>=0&&s<=20&&(i=e.toFixed(s)),o!=="."&&(i=i.replace(".",o));if(u){a=i.lastIndexOf(o),a=a>-1?a:i.length,f=i.substring(a);for(l=0,c=a;c>0;c--)l%3===0&&c!==a&&(!r||c>1)&&(f=u+f),f=i.charAt(c-1)+f,l++;i=f}return i=t.prefix?t.prefix+i:i,i=t.suffix?i+t.suffix:i,i}return n.isValue(e)&&e.toString?e.toString():""}}),e.namespace("DataType"),e.DataType.Number=e.Number},"3.18.1");
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("datatype-xml-format",function(e,t){var n=e.Lang;e.mix(e.namespace("XML"),{format:function(e){try{if(!n.isUndefined(e.getXml))return e.getXml();if(!n.isUndefined(XMLSerializer))return(new XMLSerializer).serializeToString(e)}catch(t){return e&&e.xml?e.xml:n.isValue(e)&&e.toString?e.toString():""}}}),e.namespace("DataType"),e.DataType.XML=e.XML},"3.18.1");
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("querystring-parse",function(e,t){var n=e.namespace("QueryString"),r=function(t){return function r(i,s){var o,u,a,f,l;return arguments.length!==2?(i=i.split(t),r(n.unescape(i.shift()),n.unescape(i.join(t)))):(i=i.replace(/^\s+|\s+$/g,""),e.Lang.isString(s)&&(s=s.replace(/^\s+|\s+$/g,""),isNaN(s)||(u=+s,s===u.toString(10)&&(s=u))),o=/(.*)\[([^\]]*)\]$/.exec(i),o?(f=o[2],a=o[1],f?(l={},l[f]=s,r(a,l)):r(a,[s])):(l={},i&&(l[i]=s),l))}},i=function(t,n){return t?e.Lang.isArray(t)?t.concat(n):!e.Lang.isObject(t)||!e.Lang.isObject(n)?[t].concat(n):s(t,n):n},s=function(e,t){for(var n in t)n&&t.hasOwnProperty(n)&&(e[n]=i(e[n],t[n]));return e};n.parse=function(t,n,s){return e.Array.reduce(e.Array.map(t.split(n||"&"),r(s||"=")),{},i)},n.unescape=function(e){return decodeURIComponent(e.replace(/\+/g," "))}},"3.18.1",{requires:["yui-base","array-extras"]});
/*
YUI 3.18.1 (build f7e7bcb)
Copyright 2014 Yahoo! Inc. All rights reserved.
Licensed under the BSD License.
http://yuilibrary.com/license/
*/

YUI.add("querystring-stringify",function(e,t){var n=e.namespace("QueryString"),r=[],i=e.Lang;n.escape=encodeURIComponent,n.stringify=function(e,t,s){var o,u,a,f,l,c,h=t&&t.sep?t.sep:"&",p=t&&t.eq?t.eq:"=",d=t&&t.arrayKey?t.arrayKey:!1;if(i.isNull(e)||i.isUndefined(e)||i.isFunction(e))return s?n.escape(s)+p:"";if(i.isBoolean(e)||Object.prototype.toString.call(e)==="[object Boolean]")e=+e;if(i.isNumber(e)||i.isString(e))return n.escape(s)+p+n.escape(e);if(i.isArray(e)){c=[],s=d?s+"[]":s,f=e.length;for(a=0;a<f;a++)c.push(n.stringify(e[a],t,s));return c.join(h)}for(a=r.length-1;a>=0;--a)if(r[a]===e)throw new Error("QueryString.stringify. Cyclical reference");r.push(e),c=[],o=s?s+"[":"",u=s?"]":"";for(a in e)e.hasOwnProperty(a)&&(l=o+a+u,c.push(n.stringify(e[a],t,l)));return r.pop(),c=c.join(h),!c&&s?s+"=":c}},"3.18.1",{requires:["yui-base"]});
