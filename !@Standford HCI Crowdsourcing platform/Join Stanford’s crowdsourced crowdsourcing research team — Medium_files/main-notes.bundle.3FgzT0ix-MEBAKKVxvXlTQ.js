(function(z){
var o7=function(a,b){a.Ra&&z.kd(a.Ra,"u-hide",b)};var Uda=function(a,b){return a.pc&&z.oy(a.pc,b)};var Vda=function(a,b){a.dt=b};
var Wda=function(a,b){z.et(a,7);var c=new z.Is("",1,a.X());b.forEach(function(a){z.at(c,z.Ht(a.startOffset,a.endOffset,[a.quoteId],[a.userId]))},a);for(var d=z.Ct(c),e=z.Dt(c,d),g=0;g<d.length;g++){var h=e[g];if(h.length){for(var k={},m=[],q=0;q<h.length;q++){var u=h[q];k[z.C(u,"creatorIds")]=!0;m.push(u.getName())}h=d[g];q=g<d.length-1?d[g+1]:a.X().length;z.at(a,z.Ht(h,q,m,Object.keys(k)))}}};var p7=function(a){return z.C(a,"replies")};var q7=function(){return(0,z.L)("Tap to leave a recommend note.")};
var r7=function(){return(0,z.L)("This note is only visible to the author, anyone @ mentioned, and publication editors (if any). The author or editors can choose to make it public.")};var s7=function(a,b,c){this.range=a;this.anchor=b;this.Xq=b.getAttribute("name");this.highlight=c};
var t7=function(a,b,c){z.wz.call(this);this.ML={};this.dL={};this.xt={};this.fm=null;this.ba=a;this.ui=a.get("request");this.U=a.get("routeBuilder");this.na=a.get("modelStore");this.Ea=b;this.gM=0;this.Tl=c;this.qK=!1;this.gg=null;this.bb="";this.kQ=null};var u7=function(a,b){var c=a.ML[b];c||(c=a.ML[b]=new z.CR,a.S("new_note_list",c,a));return c};
var Xda=function(a,b){if(!b)return!1;var c=b.X();if(a.content==c.substring(a.startIndex,a.endIndex))return!0;var d=new RegExp(z.Pa(a.content),"gi"),e=d.exec(c),c=e&&d.exec(c);return e&&!c?(c=a.endIndex-a.startIndex,a.startIndex=e.index,a.endIndex=e.index+c,a.content=e[0],!0):!1};
var Yda=function(a,b,c){var d=b.Kb(),e=u7(a,b.Ec()),g=e?e.indexOf(b):-1,h=b.Rj();b.cg(c);"HIDDEN"==c?a.na.remove(b):b=z.jB(a.na,b);var k=e?e.indexOf(b):-1;return{pe:a.ui.put(z.w(a.U,z.m4,{postId:a.Ea,noteId:d}),{state:c},{la:!0}),TQ:function(){b.cg(h);-1==k&&(-1==g?e.add(b):e.iu(b,g))}}};var Zda=function(a,b,c){return a.ui.put(z.w(a.U,z.p4,{postId:a.Ea,noteId:c,replyId:b}),{state:"HIDDEN"},{la:!0})};
var $da=function(a,b){var c=z.oy(a,"title");c&&b.call(void 0,c);(c=z.oy(a,"subtitle"))&&b.call(void 0,c);a.querySelector(".postField--body")&&z.QB(a.querySelector(".postField--body"),z.NB,z.$b(b,z.Xb(!0)),void 0)};var v7=function(a){var b;b=String(a).replace(/(\r\n|\r|\n)/g,"\x3cbr\x3e");return z.Dq(a,z.Gq)?(0,z.L)(b,z.Eq(a)):b};var w7=function(a,b,c){for(var d={},e=0;e<a.length;e++){var g=a[e],h=b.call(c,g,e,a);z.ba(h)&&(d[h]||(d[h]=[])).push(g)}return d};
var x7=function(a,b,c){z.yz.call(this);if(!a)throw Error("Missing element for TemplateView");this.Ra=a;this.pi=b;this.fN=c;this.vV="list"+z.oa(this);this.oL=""};var y7=function(a,b){a.gu=b;a.oC="note";a.Za()&&z7(a);return a};var z7=function(a,b){var c=!!b;if(a.Za()&&c)for(var c=a.pi.fd(),d=0;d<c.length;d++){var e=A7(a,c[d]);a.S("after-draw",c[d],e)}};var B7=function(a,b){var c=a.zL.call(null,b);return a.gu?(a.gu[a.oC]=c,c=z.Ax(a.fN,a.gu),delete a.gu[a.oC],String(c)):String(z.Ax(a.fN,c))};
var C7=function(a,b){var c=a.Ra.querySelector("#"+D7(a,b));a.S("before-clear",b,c);c.innerHTML=B7(a,b);a.S("after-draw",b,c)};var A7=function(a,b,c){var d=window.document.createElement("div");d.className=a.oL;d.id=D7(a,b);d.innerHTML=B7(a,b);z.Pe(a.Ra,d,"undefined"!=typeof c?c:a.Ra.children.length);return d};var D7=function(a,b){var c=b.D(),d=b.C();if(!c||!d)throw Error("Unable to generate id "+b);return a.vV+c+d};var E7=function(a){this.wq=a};var F7=function(a,b){return b?z.oy(a.wq,b):null};
var G7=function(a,b,c){$da(a.wq,function(a){var e=a.getAttribute("name");e&&b.call(c,a,e)})};var H7=function(a,b){return z.af(a.wq,b)?a.wq:null};var I7=function(a,b){var c;c=H7(a,b);return(c=z.Xx(b,z.NB,c))&&c.getAttribute("name")||null};var J7=function(a,b,c){(a=z.MB(c,H7(a,c)))&&z.kd(b,"is-darkBackgrounded",z.gd(a,"is-darkBackgrounded"))};var K7=function(a,b,c,d){z.AR.call(this,a,b,"Leave a note",400,d||null);this.Ea=c;this.U=a.get("routeBuilder")};
var aea=function(a,b,c){a.SB=b;a.TJ=c.text;a.TB=c.image};var bea=function(a,b,c,d){a.dD=b;a.cD=c;a.cL=d};
var L7=function(a,b,c){b='\x3cdiv class\x3d"js-quotesList u-xs-hide"\x3e'+(a.cda?"":z.P(z.lN({title:"Highlights",Fd:(0,z.U)(""+z.P(z.iN({href:(0,z.T)(""+z.S((0,z.Zt)("https://medium.com/the-story/introducing-highlights-a4df69e8ed43"))),DA:"Learn more",Pb:!0},c)))})))+'\x3cul class\x3d"list list--quotes list--short '+(a.hI.length?"":"is-empty")+'"\x3e';for(var d=a.hI,e=d.length,g=0;g<e;g++){for(var h=d[g],k="",m=h.quotes,q=m.length,u=0;u<q;u++)k+=""+m[u].quoteId+(u!=q-1?",":"");k=z.O(k);b+='\x3cli class\x3d"list-item list-item--inline" data-quote-ids\x3d"'+
z.R(k)+'" data-quote-creator-id\x3d"'+z.R(h.user.userId)+'"\x3e'+z.P(z.$M(z.M(a,{user:h.user}),c))+"\x3c/li\x3e"}return(0,z.L)(b+"\x3c/ul\x3e\x3c/div\x3e")};
var cea=function(a,b,c){return(0,z.L)('\x3cdiv\x3e\x3cdiv class\x3d"buttonSet buttonSet--highlightMenu"\x3e'+z.P(z.wF({action:"quote",source:"quote_popover",icon:"icon--highlighter",Z:"button--highlightMenu js-quoteAttributions-pileOn",md:!0,Pa:!0,Za:a.Za},c))+(c.variants.enable_quote_responses&&c.supportsEdit?z.P(z.yF({action:"quote-respond",source:"quote_popover",icon:(0,z.U)(""+z.P(z.pF())),Z:"button--highlightMenu",md:!0,Pa:!0},c)):"")+'\x3cdiv class\x3d"buttonSet-separator"\x3e\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"js-quoteAttributions-info quoteAttributions-info"\x3e'+
M7(a,0,c)+"\x3c/div\x3e\x3c/div\x3e")};var M7=function(a,b,c){b=z.L;a=a.J1?"Top highlight":(0,z.L)(z.P(z.WN(z.M(a,{DH:!0,nR:!0}),c))+(1==a.Qe&&a.Za?" highlighted":""));return b(a)};
var dea=function(a,b,c){return(0,z.L)('\x3cspan class\x3d"onboardingText"\x3e\x3ch4 class\x3d"onboardingText-title"\x3eThis is a highlight\x3c/h4\x3eSelect text and click \x3cspan class\x3d"icon icon--highlighter"\x3e\x3c/span\x3e to create your own.\x3cbr\x3eHighlights show the author and your followers that you value this bit.\x3c/span\x3e'+z.P(z.EL({dv:!0,W:"OK",ed:"done"},c)))};var eea=function(a,b,c){return(0,z.L)('\x3cdiv class\x3d"paragraphControls u-noUserSelect"\x3e'+N7(a,0,c)+"\x3c/div\x3e")};
var N7=function(a,b,c){b=z.L;var d='\x3cdiv class\x3d"notesMarker u-noUserSelect '+(0<a.Wr&&0==a.Zj?" u-xs-hide":"")+'" data-action\x3d"select-anchor" data-action-value\x3d"'+z.R(a.Xq)+'"\x3e'+O7(a,c)+"\x3c/div\x3e",e,g=""+(1==a.tP&&(a.FA||a.QA)?a.FA&&a.QA?" highlighted and commented":a.QA?" highlighted":a.FA?" commented":"":""),g=z.O(g);e='\x3cspan class\x3d"paragraphControls-itemText paragraphControls-itemText--social"\x3e';c=""+z.P(z.WN(z.M(a,{social:a.z1,Za:a.FA||a.QA,Qe:a.tP,DH:!0,S2:!0}),c))+
z.J(g);c=(0,z.U)(c);e+=z.P(z.$N(z.M(a,{text:c})))+"\x3c/span\x3e";a=(0,z.L)(e);return b(d+a)};
var O7=function(a,b){return(0,z.L)("remove"==a.Zj?'\x3cspan class\x3d"notesMarker-icon icon icon--notes"\x3e\x3c/span\x3e\x3cspan class\x3d"icon icon--remove"\x3e\x3c/span\x3e':a.Zj||a.Wr?b.variants.enable_quotes&&b.variants.combined_margin_quotes&&0==a.Zj?'\x3cspan class\x3d"notesMarker-icon icon icon--quotes"\x3e\x3c/span\x3e\x3cspan class\x3d"notesMarker-count"\x3e'+z.J(a.Wr)+"\x3c/span\x3e":'\x3cspan class\x3d"notesMarker-icon icon icon--notes"\x3e\x3c/span\x3e\x3cspan class\x3d"notesMarker-count u-showOnMobile"\x3e'+z.J(a.Zj)+
'\x3c/span\x3e\x3cspan class\x3d"notesMarker-count u-xs-hide"\x3e'+z.J(a.Zj+a.Wr)+"\x3c/span\x3e":'\x3cspan class\x3d"notesMarker-icon icon icon--notesHollow"\x3e\x3c/span\x3e\x3cspan class\x3d"notesMarker-nocount"\x3e+\x3c/span\x3e')};
var fea=function(a,b,c){return(0,z.L)(z.P(z.vF({Z:"button--dismissNotes",action:"dismiss-note",text:(0,z.U)(""+O7({Zj:"remove"},c))},c))+'\x3cdiv class\x3d"notesList js-notesList"\x3e'+(c.variants.enable_quotes&&c.variants.combined_margin_quotes?z.P(L7({hI:[]},0,c))+z.P(z.lN({title:"Notes",$g:!0,q1:!0})):"")+'\x3cdiv class\x3d"notesItems"\x3e\x3c/div\x3e\x3cdiv class\x3d"newNoteEditor" tabIndex\x3d"-1"\x3e'+z.P(z.vF({Z:"button--addNotes",action:"start-note",source:"new_note",md:!0,title:"Leave a note",
text:(0,z.U)('\x3cspan class\x3d"icon icon--addCircled icon--addNotes"\x3e\x3c/span\x3e\x3cspan class\x3d"notesAddText"\x3eLeave a note for \x3cspan class\x3d"js-notesPostCreator"\x3e\x3c/span\x3e\x3c/span\x3e\x3cspan class\x3d"notesAddCreatorText"\x3eLeave a note\x3c/span\x3e')},c))+(c.isAuthenticated?'\x3cdiv class\x3d"notesEditContainer is-notesEditMode"\x3e\x3cdiv class\x3d"notesAvatar"\x3e'+z.P(z.$M({Sf:!0,user:c.currentUser},c))+'\x3c/div\x3e\x3cdiv class\x3d"notesAuthor"\x3e'+z.J(c.currentUser.name)+
'\x3c/div\x3e\x3cdiv class\x3d"notesItemEditor notesEditor"\x3e\x3c/div\x3e\x3cdiv class\x3d"notesFooter u-noUserSelect"\x3e'+z.P(z.vF({isPrimary:!0,zA:!0,Z:"button--editNotesAction",action:"save-note",text:"Save"},c))+z.P(z.vF({Z:"button--editNotesAction",action:"cancel-note",text:"Cancel"},c))+'\x3c/div\x3e\x3cdiv class\x3d"notesDisclaimer"\x3e'+z.P(r7())+"\x3c/div\x3e\x3c/div\x3e":"")+"\x3c/div\x3e\x3c/div\x3e")};
var gea=function(a,b,c){var d=a.note.author?a.note.author.userId:null;b='\x3cdiv class\x3d"notesItem-inner"\x3e\x3cdiv class\x3d"notesItem-main"\x3e'+('\x3cdiv class\x3d"notesControls"\x3e'+(a.Bm?'\x3cul class\x3d"notesState notesState-dropdown" data-action\x3d"toggle-note-dropdown"\x3e'+("NEW"==a.note.state?'\x3cli\x3e\x3cspan class\x3d"icon icon--invisible"\x3e\x3c/span\x3ePrivate\x3cspan class\x3d"icon icon--notesStateDown"\x3e\x3c/span\x3e\x3c/li\x3e\x3cli data-action\x3d"approve-note" data-action-value\x3d"'+
z.R(a.note.noteId)+'"\x3e\x3cspan class\x3d"icon icon--group"\x3e\x3c/span\x3ePublic\x3c/li\x3e':"PUBLIC"==a.note.state?'\x3cli\x3e\x3cspan class\x3d"icon icon--group"\x3e\x3c/span\x3ePublic\x3cspan class\x3d"icon icon--notesStateDown"\x3e\x3c/span\x3e\x3c/li\x3e\x3cli data-action\x3d"unapprove-note" data-action-value\x3d"'+z.R(a.note.noteId)+'"\x3e\x3cspan class\x3d"icon icon--invisible"\x3e\x3c/span\x3ePrivate\x3c/li\x3e':"")+(a.aI.userId!=d?'\x3cli data-action\x3d"hide-note" data-action-value\x3d"'+
z.R(a.note.noteId)+'"\x3e\x3cspan class\x3d"icon icon--remove"\x3e\x3c/span\x3eDismiss\x3c/li\x3e':"")+"\x3c/ul\x3e":"PUBLIC"!=a.note.state?'\x3cul class\x3d"notesState"\x3e\x3cli data-tooltip\x3d"'+z.R(r7())+'"\x3e\x3cspan class\x3d"icon icon--invisible"\x3e\x3c/span\x3ePrivate\x3c/li\x3e\x3c/ul\x3e':"")+("PUBLIC"==a.note.state?'\x3cbutton data-action\x3d"show-note-permalink" data-action-value\x3d"'+z.R(a.note.anchor)+"-"+z.R(a.note.noteId)+'" class\x3d"notesLink icon icon--link" data-tooltip\x3d"Click to update the address bar with this note’s shareable link"\x3e':
"")+'\x3c/div\x3e\x3cdiv class\x3d"notesAvatar"\x3e'+z.P(z.$M({user:a.note.author},c))+'\x3c/div\x3e\x3cdiv class\x3d"notesAuthor"\x3e'+(d?'\x3ca href\x3d"/@'+z.R(a.note.author.username)+'" title\x3d"Go to the profile of '+z.R(a.note.author.name)+'"\x3e'+z.J(a.note.author.name)+"\x3c/a\x3e":"\x3ci\x3eUnknown user\x3c/i\x3e")+'\x3c/div\x3e\x3cdiv class\x3d"notesContent"\x3e'+v7(z.P(z.Bw(String(a.note.content))))+"\x3c/div\x3e"+(c.isAuthenticated?'\x3cdiv class\x3d"notesFooter u-noUserSelect"\x3e'+
(d==c.currentUser.userId?z.P(z.vF({Z:"button--notesTextAction",action:"edit-note",ya:a.note.noteId,text:"Edit"},c))+z.P(z.vF({isPrimary:!0,zA:!0,Z:"button--editNotesAction",action:"save-note",ya:a.note.noteId,text:"Save"},c))+z.P(z.vF({Z:"button--editNotesAction",action:"cancel-note",ya:a.note.noteId,text:"Cancel"},c))+z.P(z.vF({Z:"button--editNotesAction",action:"delete-note",ya:a.note.noteId,text:"Delete"},c)):"")+"\x3c/div\x3e":"")+"\x3c/div\x3e");var e=a.note.replies.length,g=Math.max(a.note.replies.length-
a.cn,0);if(e){b+='\x3cdiv class\x3d"notesReplies '+(0<g?"notesReplies--hidden":"")+'"\x3e\x3cdiv class\x3d"notesReplies-inner"\x3e';if(0<g){b+=z.P(z.vF({Z:"button--hiddenNotesReplies",action:"show-hidden-note-replies",text:(0,z.U)("View "+z.J(g)+(a.cn?" more":"")+(1<g?" replies":" reply"))},c))+'\x3cdiv class\x3d"notesReplies-container"\x3e';for(var h=a.note.replies,k=h.length,m=0;m<k;m++){var q=h[m];b+=m<g?P7(z.M(a,{Cf:q}),c):""}b+="\x3c/div\x3e"}h=a.note.replies;k=h.length;for(m=0;m<k;m++)q=h[m],
b+=m>=g?P7(z.M(a,{Cf:q}),c):"";b+="\x3c/div\x3e\x3c/div\x3e"}b+='\x3cdiv class\x3d"notesReplies-footer"\x3e'+(c.isAuthenticated?'\x3cdiv class\x3d"notesReply notesReply--creator is-notesEditMode"\x3e\x3cdiv class\x3d"notesAvatar"\x3e'+z.P(z.YM({user:c.currentUser},c))+'\x3c/div\x3e\x3cdiv class\x3d"notesAuthor"\x3e\x3ca href\x3d"/@'+z.R(c.currentUser.username)+'" title\x3d"Go to the profile of '+z.R(c.currentUser.name)+'"\x3e'+z.J(c.currentUser.name)+'\x3c/a\x3e\x3c/div\x3e\x3cdiv class\x3d"notesReply-editor notesEditor"\x3e\x3c/div\x3e\x3cdiv class\x3d"notesFooter u-noUserSelect"\x3e'+
z.P(z.vF({isPrimary:!0,zA:!0,Z:"button--editNotesAction",action:"save-reply",ya:a.note.noteId,text:"Save"},c))+z.P(z.vF({Z:"button--editNotesAction",action:"cancel-reply",ya:a.note.noteId,text:"Cancel"},c))+"\x3c/div\x3e\x3c/div\x3e":"")+z.P(z.vF({isPrimary:!0,Z:"button--notesReplyLink",action:"start-reply",source:"new_note_reply",ya:a.note.noteId,md:!0,title:"Leave a reply",text:(0,z.U)(""+(e||!a.note.author?"Reply to conversation":d==c.currentUser.userId?"Leave a reply":"Reply to "+z.J(a.note.author.name)))},
c))+"\x3c/div\x3e\x3c/div\x3e";return(0,z.L)(b)};
var P7=function(a,b){return(0,z.L)('\x3cdiv class\x3d"notesReply"\x3e'+(a.Bm&&(null==a.Cf.author?null:a.Cf.author.userId)!=b.currentUser.userId?'\x3cdiv class\x3d"notesReply-hider" data-action\x3d"hide-reply" data-action-value\x3d"'+z.R(a.note.noteId)+","+z.R(a.Cf.replyId)+'" data-tooltip\x3d"Dismiss this reply"\x3e\x3cspan class\x3d"icon icon--remove"\x3e\x3c/span\x3e\x3c/div\x3e':"")+'\x3cdiv class\x3d"notesAvatar"\x3e'+z.P(z.YM({user:a.Cf.author},b))+'\x3c/div\x3e\x3cdiv class\x3d"notesAuthor"\x3e'+
(a.Cf.author?'\x3ca href\x3d"/@'+z.R(a.Cf.author.username)+'" title\x3d"Go to the profile of '+z.R(a.Cf.author.name)+'"\x3e'+z.J(a.Cf.author.name)+"\x3c/a\x3e":"\x3ci\x3eUnknown user\x3c/i\x3e")+'\x3c/div\x3e\x3cdiv class\x3d"notesContent"\x3e'+v7(z.P(z.Bw(String(a.Cf.content))))+"\x3c/div\x3e"+(b.isAuthenticated?a.Cf.author&&a.Cf.author.userId==b.currentUser.userId?'\x3cdiv class\x3d"notesFooter u-noUserSelect"\x3e'+z.P(z.vF({Z:"button--notesTextAction",action:"edit-reply",ya:z.O(""+a.note.noteId+
","+(""+a.Cf.replyId)),text:"Edit"},b))+z.P(z.vF({isPrimary:!0,zA:!0,Z:"button--editNotesAction",action:"save-reply",ya:a.Cf.replyId,text:"Save"},b))+z.P(z.vF({Z:"button--editNotesAction",action:"cancel-reply",ya:a.Cf.replyId,text:"Cancel"},b))+z.P(z.vF({Z:"button--editNotesAction",action:"delete-reply",ya:a.Cf.replyId,text:"Delete"},b))+"\x3c/div\x3e":"":"")+"\x3c/div\x3e")};
z.gS=function(a,b,c){return(0,z.L)(z.P(z.vF({Z:"notesVote-mobileTapButton",action:"enter-editor-mode",text:(0,z.U)('\x3cdiv class\x3d"u-textMuted notesVoteEditor--wrapper"\x3e\x3cdiv class\x3d"notesVoteEditor notesEditor"\x3e'+z.P((0,z.L)("Tap here to tell the author and your followers why you recommended this story."))+"\x3c/div\x3e\x3c/div\x3e")},c))+z.P(z.sF({isPrimary:!0,Pa:!0,isDisabled:!0,W:"Send",action:"enter-editor-mode"},c))+z.P(z.sF({Pa:!0,W:"Skip",action:"exit-editor-mode"},c)))};
z.fS=function(a,b,c){return(0,z.L)(z.P(z.vF({text:(0,z.U)(""+z.P(q7())),Z:"notesVote-mobileTapButton",action:"enter-editor-mode"},c))+z.P(z.wF({icon:"icon--removeMedia",Pa:!0,kb:!0,se:!0,Z:"noteVote-mobileExitButton",action:"exit-editor-mode"},c)))};
z.NR=function(a,b,c){a=a||{};b=z.L;var d=z.P(z.wF({Pa:!0,kb:!0,se:!0,Z:"noteVote-mobileExitButton",action:"exit-editor-mode",icon:"icon--removeMedia"},c))+'\x3cdiv class\x3d"notesVoteEditor--wrapper js-notesVoteEditorWrapper"\x3e\x3cdiv class\x3d"js-notesVoteEditor notesVoteEditor notesEditor"\x3e\x3c/div\x3e\x3cdiv class\x3d"notesFooter u-noUserSelect"\x3e'+z.P(z.vF({isPrimary:!0,text:(0,z.U)(""+z.P((0,z.L)("Send"))),action:"save-notes-vote"},c))+z.P(z.vF({isPrimary:!0,text:(0,z.U)(""+z.P((0,z.L)("Skip"))),
action:"exit-editor-mode"},c))+'\x3c/div\x3e\x3c/div\x3e\x3cdiv class\x3d"notesVote-message js-notesVoteMessage u-hide"\x3e'+(a.dl&&0!=a.dl?z.P((0,z.L)("Your note will be shared with the author.")):z.P((0,z.L)("Your note will be shared with the author and visible to your "+z.J(c.productName)+" followers.")))+"\x3c/div\x3e";a=a.dl&&0!=a.dl?"":(0,z.L)('\x3cdiv class\x3d"notesVoteSocialShare"\x3e\x3cspan class\x3d"notesVoteSocialShare-prompt"\x3e'+z.P((0,z.L)("Share this story"))+"\x3c/span\x3e"+Q7(z.M(null,
{title:(0,z.U)(""+z.P(z.mA())),action:"share-on-twitter",bf:"post_recommend",icon:"icon--twitter"}))+Q7(z.M(null,{title:(0,z.U)(""+z.P(z.nA())),action:"share-on-facebook",bf:"post_recommend",icon:"icon--facebook"}))+(c.isCurrentUserVerified?Q7(z.M(null,{title:(0,z.U)(""+z.P(z.oA())),action:"share-by-email",bf:"post_recommend",icon:"icon--email"})):"")+"\x3c/div\x3e");return b(d+a)};
z.Wca=function(a,b,c){return(0,z.L)(z.P(z.vF({text:(0,z.U)(""+z.P(q7())),Z:"notesVote-mobileTapButton",action:"enter-editor-mode"},c))+'\x3cdiv class\x3d"notesFooter u-noUserSelect"\x3e'+z.P(z.vF({isPrimary:!0,text:(0,z.U)(""+z.P((0,z.L)("Skip"))),action:"exit-editor-mode"},c))+"\x3c/div\x3e")};
var Q7=function(a){var b=a.K$?"span":"button";a=""+("\x3c"+z.sr(b)+' class\x3d"button button--chromeless" title\x3d"'+z.R(a.title)+'" data-action\x3d"'+z.R(a.action)+'" data-action-source\x3d"'+z.R(a.bf)+'"\x3e\x3cspan class\x3d"icon '+z.R(a.icon)+'"\x3e\x3c/span\x3e\x3c/'+z.sr(b)+"\x3e");return(0,z.L)(a)};
var hea=function(a){var b="";if(10<a.count)b+='\x3cdiv class\x3d"slideIndicator-fraction"\x3e1 of '+z.J(a.count)+"\x3c/div\x3e";else if(1<a.count){b+='\x3cul class\x3d"slideIndicators"\x3e';a=a.count;for(var c=0;c<a;c++)b+='\x3cli class\x3d"slideIndicator"\x3e\x3c/li\x3e';b+="\x3c/ul\x3e"}return(0,z.L)(b)};
var R7=function(a,b,c,d){z.yz.call(this);this.l_=a;this.$a=b;this.Cc=null;this.Dg=c;this.Ea=d;a=window.document.createElement("div");a.className="notesMarkers";z.Oe(a,this.l_);this.Qn=a;this.mf={};this.Sp=this.lq=null};
var S7=function(a,b){var c=u7(a.$a,b),d=a.Cc?T7(a.Cc,b):[],e=c?c.pb():0,g=0,h=!1,k=!1,m={},q={};c.Id(function(a){var b=a.Kz();b&&((a=p7(a))&&a.forEach(function(a){g++;a.author&&(a.author.userId==z.Ji().userId&&(h=!0),a.author.social&&a.author.social.isFollowing&&(m[a.author.userId]=a.author))}),q[b.userId]=!0,b.userId==z.Ji().userId&&(h=!0),b.social&&b.social.isFollowing&&(m[b.userId]=b))});c=z.x.Ha();c.enable_quotes&&c.combined_margin_quotes&&d.forEach(function(a){a=a.user;q[a.userId]=!0;a.userId==
z.Ji().userId&&(k=!0);a.social&&a.social.isFollowing&&!m[a.userId]&&(m[a.userId]=a)});return{postId:a.Ea,Xq:b,Zj:e+g,FA:h,Wr:d.length,QA:k,tP:Object.keys(q).length,z1:z.wb(m)}};
var U7=function(a,b,c){var d=a.Dg.get(b);if(d){var e=a.mf[b];e&&(z.kd(e,"is-active",c),c="left"==z.kp(d,"float")?0:-1*z.Bp(d,"margin").right,e.style.left=(z.Hx()||0!==c?c:10)+"px",a=F7(a.Dg,b))&&(b=z.Ru(a.className),z.kd(e,"is-notesSourceFloated",2==b||4==b),z.kd(e,"u-hide",z.Vx(a,!1)),b=3==b,z.kd(e,"is-notesSourceOutsetCenter",b),a=b||7==z.JB(a),z.kd(e,"is-withoutSocialLine",a))}};var iea=function(a){var b={};G7(a.Dg,function(a,d){if(!(d in b)){var e;e=z.qp(a,this.Qn).y+z.Cp(a).top;b[d]=e}},a);return b};
var V7=function(a){var b=iea(a),c={};G7(a.Dg,function(a,d){if(!c[d]){var h;if(this.mf[d])h=this.mf[d];else{h=S7(this,d);var k=z.Cx(eea,h);this.Qn.appendChild(k);if(0<h.Zj||0<h.Wr)z.t(a,"is-withNotes"),z.t(k,"is-withNotes");h=this.mf[d]=k}h.style.top=b[d]+"px";U7(this,d,d==this.$a.bb);c[d]=!0;J7(this.Dg,h,a)}},a);for(var d in a.mf)c[d]||(z.Qe(a.mf[d]),delete a.mf[d])};var W7=function(a,b,c,d,e){z.AR.call(this,a,b,"Leave a reply",200,d);this.U=a.get("routeBuilder");this.Ea=c;this.ky=e||null};
var X7=function(a){z.wn.call(this);var b=z.Eo();this.Ng=b&&new Y7(z.Lp(b,!0),a);this.hj=b&&new Y7(z.Lp(b,!1),a)};var Y7=function(a,b){this.pf=a;this.fU=b;var c=z.LB(a.ma,b);this.VJ=(this.Cg=c)&&c.getAttribute("name");this.Ek=c?z.qy(a,c):-1};var Z7=function(a){var b=window.document.body;return z.af(b,a.pf.ma)?a.pf:a.Cg&&z.af(b,a.Cg)?z.ry(a.Ek,a.Cg):a.VJ&&(b=z.oy(a.fU,a.VJ))?z.ry(a.Ek,b):null};
var $7=function(a,b,c){z.wz.call(this);this.VA=a;this.screen=a.get("screen");this.eb=a.get("screenService");this.wF=a.get("app");this.we=b;this.XM=this.we.lb().clone();var d;(d=this.we.lb().rj)&&d.J("change",this.SK,this);this.Dd={};this.Tc=[];this.FF=a.get("butter-bar");this.vu=a.get("dialog");this.pc=b=b.pc;this.sL=0;d=b.querySelector(".notesSource");this.anchors=new E7(d);var e=z.De("div","layoutSingleColumn notesPositionContainer");z.Pe(this.pc,e,0);this.X2=e;e=window.document.createElement("div");
e.className="notesContainer";z.Bx(e,fea);this.X2.appendChild(e);this.Pf=e;this.gz=b.querySelector(".postField--body");this.Oc=this.Pf.querySelector(".notesList");this.nn=z.cy(d);this.isAuthenticated=!!z.Li();this.Bm=c;this.data=new t7(a,this.we.aa(),this.we.Tl);this.data.J("new_note_list",this.eX,this);this.Cc=null;if(this.Ao=a.get("voteWidget"))a=this.Ao,c=this.data,a.rt=c,a.Za()&&(c=c.load(),z.p(z.Tc(z.TR(a),c),a.PJ,a));this.Qd=new R7(this.Pf,this.data,this.anchors,this.we.aa());this.Qd.L();this.Eb=
new z.Ty;this.qu=z.p(this.data.load(),this.QH,this);z.MF(this.Qd.Qn).H("select-anchor",this.RH,this);z.MF(this.Pf).H("show-hidden-note-replies",this.rQ,this).H("start-reply",this.RX,this).H("save-reply",this.BX,this).H("edit-reply",this.IW,this).H("cancel-reply",this.lW,this).H("delete-reply",this.yW,this).H("approve-note",this.gW,this).H("unapprove-note",this.$X,this).H("edit-note",this.HW,this).H("save-note",this.AX,this).H("cancel-note",this.kW,this).H("delete-note",this.xW,this).H("hide-note",
this.QW,this);this.eb.J("historyUpdate",this.VL,this)};var jea=function(a){if(a.ve&&a.ve.Uu())return!0;for(var b in a.Dd)if(a.Dd[b].Uu())return!0;return!1};var kea=function(a){var b=new z.Lc,c=a.vu.open({title:(0,z.L)("Uh oh!"),bodyHtml:(0,z.L)("You have unsaved notes. Are you sure you want to abandon them?"),type:z.$5});c?(c.J(z.JR,b.ob.bind(b,!0)),c.J(z.KR,function(){this.EO();b.cancel()},a)):b.cancel();return b};var a8=function(a){z.An(a.ve);a.ve=null;for(var b in a.Dd)z.An(a.Dd[b]),delete a.Dd[b]};
var b8=function(a,b,c){var d=b.Rj(),e="PUBLIC"==c?(0,z.L)("Note was made public."):"HIDDEN"==c?(0,z.L)("Note was dismissed."):"NEW"==c?(0,z.L)("Note was made private."):"",g=Yda(a.data,b,c);z.r(z.p(g.pe,function(){z.p(this.FF.L(e,{type:z.AV,aw:!0}),function(){g.TQ();b8(this,b,d)},this);c8(this,z.Kaa,b,{noteState:c,previousNoteState:d})},a),function(a){this.FF.L((0,z.L)("Could not change note state"),"error");g.TQ();(400>a.status||499<a.status)&&b8(this,b,d)},a);return g.pe};
var d8=function(a,b){var c=b.value;return c?a.Dd[c]:a.ve};var lea=function(a,b){var c=a.we.tg(a.anchors.get(b));return{text:c.X(),image:4==c.type?c.ae():null}};
var e8=function(a,b){var c=b||a.Jh,d=a.data.be(c,a.data.bb),e=a.Oc.querySelector('[data-note-id\x3d"'+c+'"]');z.t(e,"is-showingNotesReplyCreator");var g=a.Dd["reply_"+c];g||(e=e.querySelector(".notesReply-editor"),g=new W7(a.VA,e,a.we.aa(),c),g.J("change",a.Nk,a),g.J("cancel",function(){g.clear()},a),g.J("save",function(a){g.clear();p7(d).push(a);c8(this,z.Laa,d,{replyId:a.td()});C7(this.Vi,d)},a),a.Dd["reply_"+c]=g);g.focus()};
var c8=function(a,b,c,d){d=d||{};d.postId=a.we.aa();d.noteId=c.Kb();d.noteType=c.Ki()?"highlight":"paragraph";z.V(b,d)};var f8=function(a,b,c){var d=z.Eo(),d=d&&H7(a.anchors,z.Jn(d)),e=c&&d&&new X7(d);z.p(g8(a,b&&b.anchor||a.data.bb),function(){if(b!=this.Gj){var a=this.Gj;a&&h8(this,a,!1);b&&h8(this,b,!0);this.Gj=b}(a=e&&e.restore())&&a.select()},a)};
var h8=function(a,b,c){var d=b.anchor,e=F7(a.anchors,d);if(e=a.we.tg(e)){z.et(e,4);if(c){if(!Xda(b,e))return;z.at(e,z.lt(b.startIndex,b.endIndex,b.id))}a.anchors.get(d).innerHTML=z.Tv(e,z.x,{mode:a.we.Tl?"edit":"view",isPublished:!!a.we.lb().Rk(),media:null,sections:!0,Ui:!1,zi:!1,sf:!1})}};
var i8=function(a,b,c){if(b!=a.Jh){c||z.QT(a.wF,"");(c=a.Oc.querySelector(".is-activeNote"))&&z.v(c,"is-activeNote");c=a.Jh=null;if(b&&a.data.bb){var d=a.data.be(b,a.data.bb);d&&(c=a.Oc.querySelector('[data-note-id\x3d"'+b+'"]'))&&(z.t(c,"is-activeNote"),a.Jh=b,b=(b=d.Ki())?a.data.pr(b):null,f8(a,b||null))}z.kd(a.Oc,"notesItem--selected",!!c)}};
var g8=function(a,b){a.sL=(0,z.Wp)();var c=b!=a.data.bb;if(c&&jea(a))return z.p(kea(a),function(){a8(this);return g8(this,b)},a);a.Gj&&(h8(a,a.Gj,!1),a.Gj=null);if(!c)return z.ad();i8(a,null);a.data.bb&&U7(a.Qd,a.data.bb,!1);a8(a);z.An(a.Vi);a.Vi=null;z.t(a.Oc,"is-hidingNotesEditor");a.data.bb=b&&a.Qd.mf[b]?b:"";a.data.bb?a.hu():a.XF();a.Nk();return z.ad()};
var j8=function(a,b,c,d){(b=F7(a.anchors,b))&&(0,z.Mb)(b.querySelectorAll(".markup--quote"),function(a){var b=a.getAttribute("data-creator-ids").split(" "),b=z.ab(b,c);z.kd(a,"is-selected",d&&b)},a)};
var k8=function(a,b){if(a.isAuthenticated){z.An(a.ve);var c=a.query(".notesItemEditor"),d=null,e=null;if("string"==typeof b)d=b;else if(b instanceof s7)e=b.highlight,d=e.anchor;else throw Error("Missing assoc for note editor");c.innerHTML="";a.ve=new K7(a.VA,c,a.we.aa());aea(a.ve,d,lea(a,d));e&&bea(a.ve,e.startIndex,e.endIndex,e.content);a.ve.J("change",a.Nk,a);a.ve.J("save",a.PH,a);a.ve.J("cancel",function(){u7(this.data,d).pb()?z.t(this.Oc,"is-hidingNotesEditor"):g8(this,null);i8(this,null)},a);
z.v(a.Oc,"is-hidingNotesEditor")}};
var l8=function(a,b,c,d){$7.call(this,a,b,c);this.JM=z.Ez(a.get("screen"));this.ab=a.get("dom-monitor");this.ab.J("resize-end",this.Jx,this);this.ab.J("inner-resize-end",this.Jx,this);this.ke=a.get("element-tracker");z.MF(this.Pf).H("hide-reply",this.RW,this).H("start-note",this.QX,this).H("show-note-permalink",this.OX,this);d&&(d.J("highlight",this.TL,this),this.Wc=d);[this.anchors.wq].forEach(function(a){this.Tc.push(z.Kx(a,"click",this.IX,this))},this);this.Cx=new z.uL;this.Cx.L();z.zn(this,this.Cx);
Vda(this.Cx,this.EV.bind(this));this.Cx.J("dismiss",this.AW,this)};var m8=function(a){if(a.ve){var b=a.JM,c=b.scrollTop,d=b.scrollLeft;a.ve.focus();b.scrollTop=c;b.scrollLeft=d}};var n8=function(a,b){for(var c=b?1:-1,d=a.parentNode.childNodes,e=d.length,g=(0,z.cb)(d,a),h=z.jC(a,0),k=z.iq(h),h=1!=z.ul(h),m=a,g=g+c;0<=g&&g<e;g+=c){var q=d[g];if("SECTION"===q.tagName){var u=z.jC(q,0),y=z.iq(u),u=1!=z.ul(u);if(k!=y||u||h)break;else m=q}}return m};
var o8=function(a){var b=a.gz.querySelectorAll(".js-is-spacedForNoteList"),c=!1;(0,z.ub)(b,function(a){a.style.paddingBottom="";a.style.paddingTop="";z.v(a,"js-is-spacedForNoteList");c=!0});c&&(V7(a.Qd),a.ke.$h())};var p8=function(a,b){f8(a,b.highlight);q8(a,{scroll:!0,ck:!0});k8(a,b);a.ve&&m8(a);a.S("show")};var mea=function(a){return!!z.Xx(a,function(a){a=z.VB(a);return 3==a||7==a})};var r8=function(a,b){u7(a.data,b).pb()||(k8(a,b),a.ve&&m8(a))};
var s8=function(a,b){z.p(g8(a,b),function(){r8(this,b);o8(this);t8(this,{scroll:!0,ck:!0});this.Oc.style.top=Math.round(z.by(this.Qd.mf[b]))+"px";this.Nk()},a)};var nea=function(a,b,c){if(!a.data.bb)return z.ad(!0);o8(a);var d=z.by(b);c&&(d-=z.ay(c,a.Oc).y);d=Math.round(d+z.Cp(b).top);a.Oc.style.top=d+"px";a.Nk();if(1>Math.abs(a.Oc.offsetTop-d)||!(0,z.P5)())return z.ad(!0);b=new z.Lc;z.Jx(a.Oc,z.P1,b.ob.bind(b,a));return b};
var u8=function(a,b,c){var d=a.anchors.get(a.data.bb);if(!a.isAuthenticated){var e=a.data.bb,e=a.Gj?e+("--highlight-"+a.Gj.startIndex+"-"+a.Gj.endIndex):e+"--newNote";a.Oc.querySelector(".button--addNotes").setAttribute("data-redirect",z.dQ.LG()+"#"+e)}d&&(e=d.querySelector(".markup--highlight"),d=c.ck&&e?e:d,(e=z.Xx(b,function(a){return z.gd(a,"js-notesList")}))&&(b=e),a=nea(a,d,b),c.scroll&&z.p(a,function(){z.jy(b,z.Xca)}))};
var q8=function(a,b){var c=a.Oc.querySelector(".newNoteEditor");c&&u8(a,c,b)};var v8=function(a,b,c){b=a.Oc.querySelector('[data-note-id\x3d"'+b+'"]');u8(a,b,c)};var t8=function(a,b){if(a.data.bb){var c=u7(a.data,a.data.bb),d=c.pb();(c=d?c.Lo(0).Kb():null)?(1==d&&i8(a,c),b.ck=!1,v8(a,c,b)):q8(a,b)}};var w8=function(a,b){return b==a.data.bb?z.p(g8(a,null),z.lF):z.p(g8(a,b),z.Xb(!!b))};
var x8=function(a,b,c){var d=z.pf(b.target,"notesItem");!d||b.relatedTarget&&z.af(d,b.relatedTarget)||!(b=a.data.be(d.getAttribute("data-note-id"),a.data.bb))||(d=null,c?d=b.Ki():a.Jh&&(d=a.data.be(a.Jh,a.data.bb).Ki()),f8(a,d?a.data.pr(d):null,a.we.Tl))};var y8=function(a){z.wn.call(this);this.ba=a};var z8=function(a,b){z.wz.call(this);this.ba=a;this.hc=b;this.As()};var A8=function(a){a=z.jp(a.hc,"transform").match(/translate3d\(([^,]*)/);return(0,window.parseInt)(a?a[1]:0,10)};
var B8=function(a,b,c,d){var e=b!=a.zy;a.zy=b;a.Dx=b*a.Ay;z.gp(a.hc,"transition-duration",c);z.gp(a.hc,"transform","translate3d("+a.Dx+"px,0,0)");if(e||d){c=b=Math.abs(b);d=a.hc.children;if(10<d.length){if(e=a.hc.parentNode.getElementsByClassName("slideIndicator-fraction")[0])e.innerHTML=c+1+" of "+d.length}else if(d=a.hc.parentNode.getElementsByClassName("slideIndicators")[0])(e=d.getElementsByClassName("is-active")[0])&&z.v(e,"is-active"),(e=d.children[c])&&z.t(e,"is-active");a.S("slide",b,a)}};
var C8=function(a,b,c){$7.call(this,a,b,c);this.NL=this.query(".notesItems");this.tC=a.get("diagnostics");this.hc=new z8(a,this.NL);this.hc.J("slide",this.ZL,this);this.Eg=this.yy=null;z.MF(this.Pf).H("dismiss-note",this.KD,this).H("toggle-note-dropdown",function(a){z.ld(a.target,"is-open")});this.Tc.push(z.Kx(this.Pf,"click",this.SL,this));this.Tc.push(z.Kx(this.gz,"click",this.SL,this));this.Tc.push(z.Kx(this.Pf,"focusout",this.OW,this))};
var D8=function(a,b){if(a.Gj){var c=a.gz.querySelector(".markup--highlight"),d=a.Oc.querySelector(".is-activeNote");if(d&&c){var d=window.innerHeight-d.offsetHeight+20,e=c.offsetHeight,c=z.by(c);e<d&&(c-=(d-e)/2);a.Eg&&a.Eg.cancel();b?a.Eg=new z.kV(a.nn,"scrollTop",200,Math.max(c,0)):z.$x(a.nn,0,c)}}};var E8=function(a,b){a.hc.enable();z.p(g8(a,b),function(){var a=u7(this.data,this.data.bb).pb();this.yy=z.Cx(hea,{count:a});this.Oc.appendChild(this.yy);B8(this.hc,0,"0",!0)},a)};
var F8=function(a){z.wn.call(this);this.ba=a};var G8=function(a,b){z.wn.call(this);this.Ma=a.get("modelRequest");this.na=a.get("modelStore");this.my=a.get("request");this.U=a.get("routeBuilder");this.Ea=b;this.bd=null;this.Cq={};this.sj=new z.CR;this.sj.J("add",this.tN,this);this.sj.J("remove",this.tN,this);z.zn(this,this.sj)};var oea=function(a,b,c,d){return(0,z.id)(a.Cq[b.name]||[],function(a){return a.Zb()==c&&a.Fc()==d})};var T7=function(a,b){return H8(a,a.Cq[b]||[])};
var pea=function(a,b,c,d){b=oea(a,b,c,d);return H8(a,b)};var I8=function(a,b,c,d){return(a=J8(a,b,c,d))&&a.za()==z.Ji().userId?a:null};var J8=function(a,b,c,d){a=a.Cq[b.name]||[];if(!a.length)return null;b=null;for(var e=0;e<a.length;e++){var g=a[e];if(!(c<g.Zb()||d>g.Fc())&&(b&&"anon"!=b.za()||(b=g),g.za()==z.Ji().userId))return g}return b};var K8=function(a,b){return w7(b,function(a){return a.xb()[0].getName()},a)};
var H8=function(a,b){b=b.filter(function(a){return"anon"!=a.za()});var c=w7(b,function(a){return a.za()},a);return z.wb(c).map(function(a){return new qea(a[0].Lc(),a)},a)};var qea=function(a,b){this.user=a;this.quotes=b};
var L8=function(a,b,c){z.yz.call(this);this.Cc=new G8(a,b.aa());z.zn(this,this.Cc);var d=this.Cc.sj;d.J("add",this.AM,this);d.J("remove",this.AM,this);this.Ab=b;this.pc=b.cj;this.qj=c;this.qj.Rv(this.Cc);this.sK=[];this.Ba=a.get("app");this.oa=a.get("popover");this.ab=a.get("dom-monitor");this.ke=a.get("element-tracker");this.U=a.get("routeBuilder")};
var M8=function(a,b,c,d){var e=N8(a,b);e&&(c=z.u1(z.w1(z.VW(z.v1(z.UW(z.WW(a.oa),cea,e),"top"),c),"popover--dark popover--quoteAttributions"),d).L())&&(c.Bd("deactivate",function(){this.Hk===b&&O8(this,null)},a),z.vM(c).H("quote",a.XU.bind(a,c)).H("quote-respond",a.YU.bind(a,c)))};
var N8=function(a,b){if("anon"==b.za())return{Za:!1,J1:!0};var c=P8(a,b),d=b.Zb(),e=b.Fc(),c=pea(a.Cc,c,d,e);if(!c||!c.length)return null;c=(0,z.Mb)(c,function(a){return a.user});d=(0,z.id)(c,function(a){return a.userId!=z.Ji().userId});return{Za:(0,z.Xc)(c,function(a){return a.userId==z.Ji().userId}),social:d,Qe:c.length}};var rea=function(a,b){var c=a.pc.querySelectorAll('.markup--quote[name~\x3d"'+b.ug()+'"]');return z.ib(c)};
var P8=function(a,b){var c=b.xb()[0].name;return(c=z.oy(a.pc,c))?a.Ab.tg(c):null};var Q8=function(a,b){var c=z.Go(b);return(c=z.OV(a.qj,c))?J8(a.Cc,c.Ru,c.start,c.end):null};var O8=function(a,b){a.Hk!==b&&(a.Hk&&R8(a,a.Hk,!1),b&&R8(a,b,!0),a.Hk=b)};var R8=function(a,b,c){rea(a,b).map(function(a){z.kd(a,"is-targeted",c)})};var S8=function(a,b){var c=b.xb(),d=z.oy(a.pc,c[0].getName()),c=z.oy(a.pc,z.Va(c).getName());(d=z.fF(d,b.Zb(),c,b.Fc()))&&z.QF(a.Sg(),d)};
var sea=function(a,b,c){var d=(b=Uda(a.Ab,b))&&a.Ab.tg(b);if(d){var e=[];c.forEach(function(a){a.xb()[0].X()!=d.X()&&(a.startOffset=0,a.endOffset=d.X().length);e.push(a)},a);Wda(d,e);b.innerHTML=z.Tv(d,z.x,z.zw)}};var T8=function(a,b,c,d){z.V(c?z.v5:z.Paa,{postId:a.Ab.aa(),quoteId:b,source:d})};var U8=function(a){this.ba=a};z.AR.prototype.Uu=z.Z(147,function(){return this.Jn.trim()!=this.Ta().trim()});z.gV.prototype.Uu=z.Z(146,function(){return this.Jn.trim()!=this.Ta().trim()});
z.hj.prototype.Nv=z.Z(119,function(a){return z.E(this,"highlight",a)});z.hj.prototype.pr=z.Z(118,function(){return z.C(this,"highlight")});z.aj.prototype.wr=z.Z(117,function(){return z.C(this,"quotes")});z.Vl.prototype.wr=z.Z(116,function(){return z.C(this,"quotes")});z.e0.prototype.wr=z.Z(115,function(a){return z.p(this.O.get(z.w(this.U,z.q4,{postId:a}),{background:!0,la:!0}),this.cd.bind(this,z.Ql))});z.Qg.prototype.Ki=z.Z(65,function(){return z.C(this,"highlightId")});
z.hj.prototype.Ki=z.Z(64,function(){return z.C(this,"highlightId")});z.mj.prototype.Ki=z.Z(63,function(){return z.C(this,"highlightId")});z.Qg.prototype.Sh=z.Z(62,function(){return z.C(this,"authorId")});z.Rg.prototype.Sh=z.Z(61,function(){return z.C(this,"authorId")});z.gh.prototype.Sh=z.Z(60,function(){return z.C(this,"authorId")});z.hj.prototype.Sh=z.Z(59,function(){return z.C(this,"authorId")});z.jj.prototype.Sh=z.Z(58,function(){return z.C(this,"authorId")});
z.mm.prototype.Sh=z.Z(57,function(){return z.C(this,"authorId")});z.sg.prototype.cg=z.Z(32,function(a){return z.E(this,"state",a)});z.Qg.prototype.cg=z.Z(31,function(a){return z.E(this,"state",a)});z.Rg.prototype.cg=z.Z(30,function(a){return z.E(this,"state",a)});z.ei.prototype.cg=z.Z(29,function(a){return z.E(this,"state",a)});z.fi.prototype.cg=z.Z(28,function(a){return z.E(this,"state",a)});z.hj.prototype.cg=z.Z(27,function(a){return z.E(this,"state",a)});
z.jj.prototype.cg=z.Z(26,function(a){return z.E(this,"state",a)});z.lg.prototype.td=z.Z(18,function(){return z.C(this,"replyId")});z.mg.prototype.td=z.Z(17,function(){return z.C(this,"replyId")});z.Mg.prototype.td=z.Z(16,function(){return z.C(this,"replyId")});z.Rg.prototype.td=z.Z(15,function(){return z.C(this,"replyId")});z.Xh.prototype.td=z.Z(14,function(){return z.C(this,"replyId")});z.Zh.prototype.td=z.Z(13,function(){return z.C(this,"replyId")});
z.Vi.prototype.td=z.Z(12,function(){return z.C(this,"replyId")});z.jj.prototype.td=z.Z(11,function(){return z.C(this,"replyId")});z.nj.prototype.td=z.Z(10,function(){return z.C(this,"replyId")});z.pk.prototype.td=z.Z(9,function(){return z.C(this,"replyId")});z.n(t7,z.wz);z.f=t7.prototype;z.f.load=function(){this.gg||(this.gg=z.r(z.p(this.ui.get(z.w(this.U,z.k4,{postId:this.Ea}),{la:!0,background:!0}),this.HY,this),z.rz));return this.gg.Tb()};z.f.Qi=function(){return this.qK};z.f.Mm=function(){return this.gM};
z.f.tg=function(a){var b=a&&a.getAttribute("name");if(!b||!a)return null;var c=this.xt[b];return c&&!this.Tl?c:this.xt[b]=z.oC(a)};z.f.pr=function(a){return this.dL[a]||null};z.f.be=function(a,b){return u7(this,b).jr(a)};z.f.HG=function(){return u7(this,"vote")};z.f.LO=function(){var a=z.Ji().userId;return this.HG().find(function(b){return b.Sh()==a})};z.f.Nv=function(a,b){this.dL[a]=b};z.f.uB=function(a){a=z.jB(this.na,a);u7(this,a.Ec()).add(a)};z.f.aa=function(){return this.Ea};
z.f.HY=function(a){var b=a.references.User;this.fm=b[a.post.creatorId];this.gM=a.post.visibility;var c=a.value;if(c)for(var d=0;d<c.length;d++){var e=c[d];if("HIDDEN"!=e.state){var g=e.replies,h=b;if(g)for(var k=0;k<g.length;k++){var m=g[k],q=m.authorId||null;m.author=q&&h[q]||null}g=e.anchor;h=e.authorId||null;e.author=h&&b[h]||null;g=u7(this,g);e=z.ij(e);g.add(z.jB(this.na,e))}}if(a=a.highlights)for(b=0;b<a.length;b++)this.Nv(a[b].id,z.ii.nb(z.lj,a[b]));this.qK=!0};
z.f.ia=function(){this.gg.cancel();t7.F.ia.call(this)};z.n(x7,z.yz);z.f=x7.prototype;z.f.zL=function(a){return a.Wb()};z.f.gu=null;z.f.oC=null;z.f.ha=function(){return this.Ra};z.f.N=function(){x7.F.N.call(this);z.zz(this,this.pi,"change",this.vW,this);z.zz(this,this.pi,"add",this.$W,this);z.zz(this,this.pi,"remove",this.aX,this);z7(this,!0)};z.f.fa=function(){this.Ra.innerHTML="";delete this.Ra;x7.F.fa.call(this)};z.f.getData=function(){return this.pi};
z.f.$W=function(a,b){if(this.Za())for(var c=0;c<a.length;c++){var d=b.indexOf(a[c]),d=A7(this,a[c],d);this.S("after-draw",a[c],d)}};z.f.aX=function(a){if(this.Za()){var b=this.Ra.querySelector("#"+D7(this,a));this.S("before-clear",a,b);this.S("destroy",a,b);z.Qe(b)}};z.f.vW=function(a){for(var b=0;b<a.length;b++)C7(this,a[b])};E7.prototype.get=function(a){return F7(this,a)};z.n(K7,z.AR);z.f=K7.prototype;z.f.SB=null;z.f.TJ=null;z.f.TB=null;z.f.dD=null;z.f.cD=null;z.f.cL=null;z.f.vG=function(){return z.ER()};z.f.QG=function(){return z.FR()};z.f.KF=function(){return!!this.Kb()};z.f.op=function(a){var b=z.zx();return(new z.hj({postId:a.postId,anchor:a.anchor,noteId:a.noteId,content:a.content,state:a.state,createdAt:a.createdAt,replies:[],highlight:a.highlight||null,highlightId:a.highlightId||null})).XA(b).pn(b.za())};z.f.MG=function(){return this.Kb()?"put":"post"};
z.f.Yz=function(){return this.Kb()?z.w(this.U,z.l4,{postId:this.Ea,noteId:this.Kb()}):z.w(this.U,z.j4,{postId:this.Ea})};z.f.NG=function(a){a={content:a};this.SB&&(a.anchor=this.SB,a.anchorContent=this.TJ,a.anchorImage=this.TB?this.TB.Wb():null);null!=this.dD&&null!=this.cD&&(a.highlightStart=this.dD,a.highlightEnd=this.cD,a.highlightContent=this.cL);return a};z.n(R7,z.yz);z.f=R7.prototype;z.f.Rv=function(a){this.Cc=a;Object.keys(a.Cq).map(this.cw,this);a=a.sj;a.J("add",this.uN,this);a.J("remove",this.uN,this)};z.f.uN=function(a){Object.keys(K8(this.Cc,a instanceof Array?a:[a])).map(this.cw,this)};z.f.cw=function(a){if(this.$a.Qi()){var b=a||this.$a.bb;if(a=this.mf[b]){var b=S7(this,b),c=z.x.Ha();c.enable_quotes&&c.combined_margin_quotes?(z.Bx(a,N7,b),z.kd(a,"is-withNotes",0<b.Zj||0<b.Wr)):(z.Bx(a,N7,b),z.kd(a,"is-withNotes",0<b.Zj))}}};
z.f.eW=function(a){if(a=I7(this.Dg,a.target)){var b=F7(this.Dg,a),c=this.mf[a];!c||c===this.lq||!b||z.Vx(b,!1)||z.gd(b,"postField--insetLeftImage")||z.gd(b,"postField--outsetLeftImage")||(this.lq&&z.v(this.lq,"is-highlighted"),z.t(c,"is-highlighted"),this.lq=c,z.An(this.Sp),this.Sp=new z.vL(b),this.Sp.gc(c),this.Sp.L(),this.Sp.Bd("dismiss",function(){z.v(c,"is-highlighted");this.lq===c&&(this.lq=null)},this))}};
z.f.N=function(){R7.F.N.call(this);z.Dx()||[this.Dg.wq].forEach(function(a){this.Ga(a,"mouseover",this.eW)},this)};z.f.Ua=function(){z.An(this.Sp);z.Qe(this.Qn);this.mf=this.Qn=null;R7.F.Ua.call(this)};z.n(W7,z.AR);z.f=W7.prototype;z.f.vG=function(){return(0,z.L)("Are you sure you want to delete this reply?")};z.f.QG=function(){return(0,z.L)("Your reply is too long; do you want to abandon your changes?")};z.f.KF=function(){return!!this.ky};z.f.op=function(a){var b=z.zx();return(new z.jj({postId:a.postId,noteId:a.noteId,replyId:a.replyId,content:a.content,createdAt:a.createdAt})).XA(b).pn(b.za())};z.f.MG=function(){return this.ky?"put":"post"};
z.f.Yz=function(){return this.ky?z.w(this.U,z.o4,{postId:this.Ea,noteId:this.Kb(),replyId:this.ky}):z.w(this.U,z.n4,{postId:this.Ea,noteId:this.Kb()})};z.f.NG=function(a){return{content:a}};z.n(X7,z.Cn);X7.prototype.Iv=function(){if(!this.Ng)return null;var a=Z7(this.Ng);if(!a)return null;var b=Z7(this.hj);return b?z.oo(a.ma,a.offset,b.ma,b.offset):null};z.n($7,z.wz);z.f=$7.prototype;z.f.ve=null;z.f.Jh=null;z.f.Gj=null;z.f.Vi=null;z.f.cn=0;z.f.ia=function(){a8(this);g8(this,null);var a;(a=this.we.lb().rj)&&a.Gb("change",this.SK,this);this.eb.Gb("historyUpdate",this.VL,this);this.KL&&z.Lx(this.KL);z.Lx(this.Tc);this.Tc.length=0;z.CI(this.Qd.Qn);z.CI(this.Pf);z.Qe(this.Pf);this.data.Rc();this.qu&&this.qu.cancel();z.An(this.Qd);z.An(this.Eb);this.KL=this.Cc=this.qu=this.data=this.Pf=this.anchors=this.Qd=null;$7.F.ia.call(this)};
z.f.Rv=function(a){this.Cc=a;this.Qd.Rv(a)};z.f.SK=function(){var a=this.we.lb();z.x.Ha().enable_recommend_notes&&this.XM.So()!=a.So()&&(this.XM=a.clone(),!a.So()&&(a=this.data.LO()))&&(c8(this,z.u5,a),this.data.HG().remove(a))};z.f.QH=function(){};z.f.GA=function(){};z.f.PH=function(a){a.pr()&&(this.data.Nv(a.Ki(),a.pr()),a.Nv(null));this.data.uB(a);c8(this,z.s5,a)};z.f.RH=function(){};z.f.oQ=function(){};z.f.Nk=function(){};z.f.EO=function(){};z.f.jU=function(a){return a.Wb()};
z.f.RX=function(a){e8(this,a.value)};z.f.BX=function(a){(a=this.Dd["reply_"+a.value])&&a.save()};z.f.lW=function(a){var b=this.Dd["reply_"+a.value];b&&z.BR(b);(a=z.pf(a.target,"notesItem"))&&z.v(a,"is-showingNotesReplyCreator")};
z.f.IW=function(a){function b(){var a=this.data.be(d,this.data.bb);C7(this.Vi,a);z.v(g,"is-notesEditMode");z.An(h);delete this.Dd["reply_"+e]}var c=a.value.split(","),d=c[0],e=c[1],c=z.pf(a.target,"notesItem"),g=z.pf(a.target,"notesReply");z.t(g,"is-notesEditMode");z.v(c,"is-showingNotesReplyCreator");a=g.querySelector(".notesContent");var h=new W7(this.VA,a,this.we.aa(),d,e);h.J("save",function(a){for(var c=this.data.be(d,this.data.bb),g=p7(c),h=0;h<g.length;h++)if(g[h].td()==e){g[h]=a;break}c8(this,
z.Maa,c,{replyId:e});b.call(this)},this);h.J("delete",function(){for(var a=this.data.be(d,this.data.bb),c=p7(a),g=0;g<c.length;g++)if(c[g].td()==e){z.eb(c,g);break}c8(this,z.Naa,a,{replyId:e});b.call(this)},this);h.J("cancel",function(){b.call(this)},this);h.J("change",this.Nk,this);h.focus(!0);this.Dd["reply_"+e]=h};z.f.yW=function(a){(a=this.Dd["reply_"+a.value])&&a.$F()};
z.f.hW=function(a){a=a.Kb();this.Dd[a]&&(z.An(this.Dd[a]),delete this.Dd[a]);this.Dd["reply_"+a]&&(z.An(this.Dd["reply_"+a]),delete this.Dd["reply_"+a])};z.f.dW=function(a,b){z.v(b,"is-showingNotesReplyCreator");b.setAttribute("data-note-id",a.Kb())};z.f.gW=function(a){z.r(b8(this,this.data.be(a.value,this.data.bb),"PUBLIC"),z.hL(this.vu,(0,z.L)("Sorry, we couldn’t approve the note. Please try again later and make sure you are logged in.")))};
z.f.$X=function(a){z.r(b8(this,this.data.be(a.value,this.data.bb),"NEW"),z.hL(this.vu,(0,z.L)("Sorry, we couldn’t unapprove the note. Please try again later and make sure you are logged in.")))};
z.f.HW=function(a){function b(){z.v(d,"is-notesEditMode");z.An(g);delete this.Dd[c]}var c=a.value,d=z.pf(a.target,"notesItem");z.t(d,"is-notesEditMode");z.v(d,"is-showingNotesReplyCreator");var e=d.querySelector(".notesContent"),g=new K7(this.VA,e,this.we.aa(),a.value);g.J("save",function(a){this.data.uB(a);c8(this,z.t5,a);b.call(this)},this);g.J("delete",function(){var a=u7(this.data,this.data.bb),d=a.jr(c);c8(this,z.u5,d);a.remove(d);b.call(this)},this);g.J("cancel",function(){var a=this.data.be(c,
this.data.bb);C7(this.Vi,a);b.call(this)},this);g.J("change",this.Nk,this);g.focus(!0);this.Dd[c]=g};z.f.AX=function(a){(a=d8(this,a))&&a.save()};z.f.kW=function(a){(a=d8(this,a))&&z.BR(a)};z.f.xW=function(a){(a=d8(this,a))&&a.$F()};z.f.fX=function(a){for(var b=0;b<a.length;b++)this.Qd.cw(a[b].Ec())};z.f.QW=function(a){var b=a.value,c=this.data.be(b,this.data.bb);z.r(z.p(b8(this,c,"HIDDEN"),function(){this.GA(c);this.Jh==b&&(this.Jh=null)},this),z.hL(this.vu,(0,z.L)("Sorry, we couldn’t hide the note. Please try again later and make sure you are logged in.")))};
z.f.eX=function(a){a.J("add",this.fX,this);a.J("change",this.oQ,this);a.J("remove",this.GA,this)};z.f.query=function(a){return this.Pf.querySelector(a)};z.f.Hp=function(){V7(this.Qd);this.Qd.mf[this.data.bb]||g8(this,null)};z.f.rQ=function(a){this.KI(a)};z.f.KI=function(a){(a=z.pf(a.target,"notesReplies"))&&z.v(a,"notesReplies--hidden")};
z.f.hu=function(){var a=this.data.bb,b=this.query(".notesItems"),c=u7(this.data,a),d=z.x.Ha();if(d.enable_quotes&&d.combined_margin_quotes){var a=this.Cc?T7(this.Cc,a):[],d=this.query(".js-quotesList"),e=z.Cx(L7,{hI:a});z.Re(e,d);z.Dx()||z.Kx(e,"mouseover",this.cV,this);a.length||z.vy(e)}b=new x7(b,c,gea);b.oL="notesItem";b.zL=this.jU.bind(void 0);z7(b);this.Vi=y7(b,{Bm:this.Bm,aI:this.data.fm,cn:this.cn});this.Vi.J("before-clear",this.hW,this);this.Vi.J("after-draw",this.dW,this);this.Vi.L();U7(this.Qd,
this.data.bb,!0);z.t(this.screen.V(),"is-notesListVisible");z.Oy(z.Jaa)};z.f.cV=function(a){if((a=z.Xx(a.target,function(a){return!!a.getAttribute("data-quote-ids")},a.currentTarget))&&this.NJ!=a){this.yn&&this.yn.mO();var b=this.data.bb,c=a.getAttribute("data-quote-creator-id");this.NJ=a;this.yn=new z.vL(F7(this.anchors,b),300);this.yn.gc(a);this.yn.J("dismiss",function(){j8(this,b,c,!1);z.An(this.yn);this.yn=this.NJ=null},this);this.yn.L();j8(this,b,c,!0)}};
z.f.XF=function(){z.QT(this.wF,"");z.v(this.screen.V(),"is-notesListVisible")};z.f.getSelection=function(a){var b=z.Eo();if(!b||b.isCollapsed())if(a&&(b=a),!b||b.isCollapsed())return null;a=z.Jn(b);var c=H7(this.anchors,a);if(!c)return null;c=(a=z.Xx(a,z.NB,c))&&this.we.tg(a);if(!a)return null;var d=z.py(b,a,!0),e=z.py(b,a,!1);return-1==d||-1==e?null:new s7(b,a,new z.lj({anchor:a.getAttribute("name"),startIndex:d,endIndex:e,content:c.X().substring(d,e)}))};z.f.VL=function(){this.fz(z.mW())};z.n(l8,$7);z.f=l8.prototype;z.f.cn=3;z.f.Sl=!1;z.f.Wc=null;
z.f.QH=function(){var a=(0,z.Wp)();this.qu=null;this.Sl=!0;var b=z.mW();this.Hp();if(this.isAuthenticated){var c=this.data.fm.userId===z.Ji().userId;z.kd(this.Oc,"is-notesCreator",c)}z.ff(this.query(".js-notesPostCreator"),this.data.fm.name);this.fz(b);this.Tc.push(z.Kx(this.Pf,"mouseover",this.sW,this));this.Tc.push(z.Kx(this.Pf,"mouseout",this.rW,this));this.Tc.push(z.Kx(this.Oc,"click",this.mW,this));this.Tc.push(z.Kx(this.gz,z.P1,this.TD,this));z.Py("notes.renderMarkers",(0,z.Wp)()-a)};
z.f.fz=function(a){if(a.Wf&&this.Qd.mf[a.Wf])if("highlight"==a.br){s8(this,a.Wf);var b=this.anchors.get(a.Wf),c=a.startIndex,d=a.endIndex;if(z.la(c)&&z.la(d)){var e=z.fF(b,c,b,d);e&&(b=new s7(e,b,new z.lj({anchor:a.Wf,startIndex:c,endIndex:d,content:e.X()})),p8(this,b))}}else a.noteId?(z.p(g8(this,a.Wf),function(){r8(this,a.Wf)},this),i8(this,a.noteId,!0),v8(this,a.noteId,{scroll:!0,ck:!0}),"reply"==a.br&&e8(this)):"newNote"==a.br&&s8(this,a.Wf)};
z.f.PH=function(a){l8.F.PH.call(this,a);this.ve.clear();i8(this,a.Kb());z.t(this.Oc,"is-hidingNotesEditor")};z.f.EO=function(){var a={scroll:!0,ck:!0};if(this.ve)q8(this,a),m8(this);else{var b;a:{b=this.Dd;for(var c in b){b=b[c];break a}b=void 0}if(c=b&&b.Kb())i8(this,c),v8(this,c,a),b.focus()}};z.f.hu=function(){l8.F.hu.call(this);J7(this.anchors,this.Pf,this.anchors.get(this.data.bb))};
z.f.Nk=function(){o8(this);var a=(0,window.parseInt)(this.Oc.style.top,10);if(!(0,window.isNaN)(a)){var b=this.data.bb;if(b=b?this.anchors.get(b):null)if(b=z.MB(b,H7(this.anchors,b))){var c=n8(b,!1),b=n8(b,!0),d=!1,e=z.by(c);a<e&&(d=e-a,c.style.paddingTop=z.Cp(c).top+d+"px",this.Oc.style.top=a+d+"px",z.t(c,"js-is-spacedForNoteList"),d=!0);a+=this.Oc.offsetHeight;c=z.by(b)+b.offsetHeight;a>c&&(a-=c,b.style.paddingBottom=z.Cp(b).bottom+a+"px",z.t(b,"js-is-spacedForNoteList"),d=!0);d&&(V7(this.Qd),this.ke.$h())}}};
z.f.RH=function(a){z.p(w8(this,a.value),function(a){a&&(this.data.bb&&u7(this.data,this.data.bb).pb()||((a=this.getSelection())&&a.highlight.anchor==this.data.bb?(f8(this,a.highlight),k8(this,a)):k8(this,this.data.bb),this.ve&&m8(this),this.S("show")),t8(this,{scroll:!0,ck:!0}))},this)};z.f.GA=function(a){this.Qd.cw(a.Ec());a.Kb()==this.Jh&&f8(this,null)};z.f.KI=function(a){z.v(z.pf(a.target,"notesReplies"),"notesReplies--hidden");this.Nk()};
z.f.IX=function(a){if(!this.we.Tl&&!mea(a.target)&&(z.Dx()||this.data.bb)){var b=this.getSelection();if(!b||b.Xq!=this.data.bb){if(this.data.bb&&z.Dx())return g8(this,null);500>(0,z.Wp)()-this.sL||(a=I7(this.anchors,a.target),z.p(w8(this,a),function(a){var b=this.data.bb;a&&b&&(r8(this,b),t8(this,{scroll:!0,ck:!0}))},this))}}};z.f.Jx=function(){this.Hp()};
z.f.EV=function(a){if(!this.data.bb)return!1;a=a.target;return z.sy(a)?!0:!!z.Xx(a,function(a){return a==this.Oc||a==this.Qd.Qn||this.Wc&&a==this.Wc.ha()||a.getAttribute("data-action")&&"zoom"!=a.getAttribute("data-action")}.bind(this))};z.f.AW=function(){this.data.bb&&g8(this,null)};z.f.OX=function(a){z.QT(this.wF,a.value)};z.f.sW=function(a){x8(this,a,!0)};z.f.rW=function(a){x8(this,a,!1)};z.f.TL=function(){if(!this.Wc)return!1;var a=this.getSelection(this.Wc.Rq);z.NF(this.Wc);a&&p8(this,a);return!1};
z.f.RW=function(a){a=a.value.split(",");var b=a[0],c=a[1];z.r(z.p(Zda(this.data,c,b),function(){for(var a=p7(this.data.be(b,this.data.bb)),e=0;e<a.length;e++)if(a[e].td()==c){z.eb(a,e);break}c8(this,z.Oaa,this.data.be(b,this.data.bb),{replyId:c});this.FF.L((0,z.L)("The reply has been dismissed."),z.AV)},this),z.hL(this.vu,(0,z.L)("Sorry, we couldn’t hide the reply. Please try again later and make sure you are logged in.")))};
z.f.mW=function(a){a=a.target;var b=z.pf(a,"notesItem");if(b){var c=b.getAttribute("data-note-id");c==this.Jh?z.Xx(a,function(a){return!!a.getAttribute("data-action")||z.gd(a,"editable")},b,!0)==b&&i8(this,null):(i8(this,c),v8(this,c,{scroll:!0,ck:!0}))}};z.f.QX=function(){var a=this.getSelection();i8(this,null);a&&f8(this,a.highlight);k8(this,a||this.data.bb);this.ve&&(a&&q8(this,{scroll:!0,ck:!0}),m8(this))};
z.f.TD=function(a){(a=a.target.getAttribute("name"))&&F7(this.anchors,a)&&U7(this.Qd,a,a==this.data.bb)};z.f.Hp=function(){if(this.Sl){if(this.Rf)return z.Hy(Error("UpdatePositions called after dispose"));l8.F.Hp.call(this);var a={scroll:!1,ck:!0};this.Jh?v8(this,this.Jh,a):t8(this,a)}};z.f.E2=function(){if(this.data.bb){var a=this.anchors.get(this.data.bb);if(!a)g8(this,null);else if(!this.we.Tl){var b=z.Eo();b&&(b=z.Jn(b),z.af(a,b)||g8(this,null))}}};
z.f.ia=function(){this.ab.Gb("resize-end",this.Jx,this);this.ab.Gb("inner-resize-end",this.Jx,this);this.Wc&&this.Wc.Gb("highlight",this.TL,this);l8.F.ia.call(this)};z.n(y8,z.wn);y8.prototype.PF=function(a,b,c,d){return new l8(a.Fa(),b,c,d)};z.n(z8,z.wz);z.f=z8.prototype;z.f.wt=0;z.f.YD=0;z.f.jk=0;z.f.sC=0;z.f.Dx=0;z.f.tL=0;z.f.lo=0;z.f.AE=1;z.f.Ay=0;z.f.zy=0;z.f.IM=0;z.f.oi=void 0;z.f.cb=[];z.f.As=function(){this.cb.length||(this.cb=[z.Kx(this.hc,"touchstart",this.ZX,this),z.Kx(this.hc,"touchmove",this.SD,this),z.Kx(this.hc,"touchend",this.YX,this)])};
z.f.ZX=function(a){var b=this.hc.firstChild;this.sC=this.jk=0;this.IM=b.offsetWidth*this.hc.children.length;this.oi=void 0;this.Ay=this.hc.offsetWidth;this.AE=1;this.tL=-(this.hc.children.length-1);this.lo=+new Date;this.wt=a.touches[0].pageX;this.YD=a.touches[0].pageY;z.gp(this.hc,"transition-duration",0)};
z.f.SD=function(a){1<a.touches.length||(this.jk=a.touches[0].pageX-this.wt,this.sC=a.touches[0].pageY-this.YD,this.wt=a.touches[0].pageX,this.YD=a.touches[0].pageY,"undefined"==typeof this.oi&&(this.oi=Math.abs(this.sC)>Math.abs(this.jk)),this.oi||(this.Dx=this.jk/this.AE+A8(this),a.preventDefault(),this.AE=0===this.zy&&0<this.jk?this.wt/this.Ay+1.25:this.zy==this.tL&&0>this.jk?Math.abs(this.wt)/this.Ay+1.25:1,z.gp(this.hc,"transform","translate3d("+this.Dx+"px,0,0)")))};
z.f.YX=function(){if(!this.oi){var a=1E3>+new Date-this.lo&&15<Math.abs(this.jk)?0>this.jk?-1:1:0,b=Math[a?0>this.jk?"ceil":"floor":"round"](A8(this)/(this.IM/this.hc.children.length)),b=Math.min(b+a,0),b=Math.max(-(this.hc.children.length-1),b);B8(this,b,".2s")}};z.f.disable=function(){z.gp(this.hc,"transition-duration","0");z.gp(this.hc,"transform","translate3d(0,0,0)");z.Lx(this.cb);this.cb=[]};z.f.enable=z8.prototype.As;z.n(C8,$7);z.f=C8.prototype;z.f.ia=function(){this.NL=null;this.hc&&(this.hc.disable(),this.hc.Gb("slide",this.ZL,this),this.hc=null);this.Eg&&(this.Eg.cancel(),this.Eg=null);C8.F.ia.call(this)};z.f.hu=function(){C8.F.hu.call(this);o7(this.tC,!0)};z.f.XF=function(){o7(this.tC,!1);C8.F.XF.call(this)};
z.f.QH=function(){this.qu=null;var a=(0,z.Wp)(),b=z.mW();this.Hp();if(this.isAuthenticated){var c=this.data.fm.userId===z.Ji().userId;z.kd(this.Oc,"is-notesCreator",c)}z.ff(this.query(".js-notesPostCreator"),this.data.fm.name);this.fz(b);z.Py("notes.renderMarkers",(0,z.Wp)()-a)};z.f.fz=function(a){a.Wf&&this.Qd.mf[a.Wf]&&a.noteId&&this.data.be(a.noteId,a.Wf)&&E8(this,a.Wf)};z.f.oQ=function(){};
z.f.rQ=function(a){this.KI(a);z.t(this.nn,"is-showingNotesReplies");this.hc.disable();y7(this.Vi,{Bm:this.Bm,aI:this.data.fm,cn:window.Infinity})};z.f.RH=function(a){a=a.value;this.Qd.mf[a]&&(a==this.data.bb?g8(this,null):E8(this,a))};z.f.GA=function(a){this.Qd.cw(a.Ec());if(!this.data.bb||!u7(this.data,this.data.bb).pb())return this.KD();B8(this.hc,0,"0")};z.f.OW=function(){D8(this,!0)};z.f.SL=function(a){this.data.bb&&!z.af(this.Oc,a.target)&&(a.stopPropagation(),this.KD())};
z.f.ZL=function(a){if(a=u7(this.data,this.data.bb).Lo(a)){i8(this,a.Kb());if(!a.Ki()){a=a.Ec();var b=this.anchors.get(a),b=z.Sx(b);f8(this,new z.lj({anchor:a,startIndex:0,endIndex:b.length-1,content:b}),!0)}D8(this,!0)}};
z.f.KD=function(){z.gd(this.nn,"is-showingNotesReplies")?z.gd(this.nn,"is-showingNotesReplies")&&(z.t(this.Oc.querySelector(".is-activeNote .notesReplies"),"notesReplies--hidden"),z.v(this.nn,"is-showingNotesReplies"),this.hc.enable(),B8(this.hc,0,"0",!0),D8(this,!1),y7(this.Vi,{Bm:this.Bm,aI:this.data.fm,cn:this.cn})):z.p(g8(this,null),function(){z.v(this.nn,"is-showingNotesReplies");z.v(this.nn,"is-newNoteEditorActivated");z.v(this.Pf,"is-showingNewNoteEditor");z.v(this.screen.V(),"is-notesListVisible");
o7(this.tC,!1);this.yy&&z.Qe(this.yy);this.hc.disable();this.Hp()},this)};z.n(F8,z.wn);F8.prototype.PF=function(a,b,c){return new C8(a.Fa(),b,c)};z.n(G8,z.wn);z.f=G8.prototype;z.f.load=function(){this.bd||(this.bd=z.p(this.Ma.wr(this.Ea),this.JU,this));return this.bd.Tb()};z.f.toggle=function(a,b,c,d){var e=J8(this,a,b,c);return e&&e.za()==z.Ji().userId?this.remove(e):e&&d?this.create(a,e.Zb(),e.Fc()):this.create(a,b,c)};z.f.qG=function(a,b,c){var d=I8(this,a,b,c);return d?z.ad(d):(d=J8(this,a,b,c))?this.create(a,d.Zb(),d.Fc()):this.create(a,b,c)};
z.f.create=function(a,b,c){return z.p(this.my.post(z.w(this.U,z.q4,{postId:this.Ea}),{paragraphs:[a.nb().Wb()],startOffset:b,endOffset:c},{la:!0}),function(a){a=z.jB(this.na,z.Rj(a.value));this.sj.add(a);return a},this)};z.f.remove=function(a){this.sj.remove(a);this.na.remove(a);return z.p(this.my.Gd(z.w(this.U,z.r4,{postId:this.Ea,quoteId:a.ug()})),function(){return a},this)};z.f.JU=function(a){z.cB(this.na,a);this.sj.ne(a.value||[]);return this.sj};z.f.tN=function(){this.Cq=K8(this,this.sj.fd())};z.n(L8,z.yz);z.f=L8.prototype;z.f.Sg=function(){return this.qj.Sg()};z.f.N=function(){L8.F.N.call(this);this.Ga(this.pc,"click",this.Zs,this);z.TV(this.Ab)&&z.Gx()&&this.Ga(this.pc,"mouseover",this.SU,this);z.r(this.Cc.load(),z.rz);var a=this.Sg();a&&(z.zz(this,a,"quote",this.NU,this),z.zz(this,a,"quote-respond",this.OU,this),z.zz(this,a,"show",this.eF,this),z.zz(this,a,"hide",this.SW,this));z.Li()&&z.Gx()&&z.x.Ha().enable_quote_onboarding&&z.zz(this,this.ab,"scroll-end",this.mj,this)};
z.f.Zs=function(a){z.Xx(a.target,function(a){if(a===this.pc)return!0;var c=z.VB(a);if(3==c)return!0;if(7==c){if(c=Q8(this,a))if(O8(this,c),z.Gx())S8(this,c);else{var d=new z.uL;M8(this,c,a,d)}return!0}return!1}.bind(this))};
z.f.SU=function(a){z.Xx(a.target,function(a){if(a===this.pc)return!0;var c=z.VB(a);if(3==c)return!0;if(7==c){c=z.Eo();if(!(c&&!c.isCollapsed()||this.Sg()&&this.Sg().gp()||(c=this.oa.Mb(),c&&z.gd(c.V(),"js-quoteOnboarding")))&&(c=Q8(this,a))){var d=this.pc.querySelector('.markup--quote[name~\x3d"'+c.ug()+'"]');a=new z.vL(a,100);M8(this,c,d,a);O8(this,c)}return!0}return!1}.bind(this))};
z.f.eF=function(){var a=z.Eo();a&&!a.isCollapsed()&&O8(this,null);if(z.TV(this.Ab)&&(a=z.OV(this.qj,this.Sg().Rq))){var a=I8(this.Cc,a.Ru,a.start,a.end),b=this.Sg().ha().querySelector(".js-highlightMenuQuoteButton");z.kd(b,"is-active",!!a)}};z.f.SW=function(){this.Hk&&O8(this,null)};
z.f.NU=function(){if(z.TV(this.Ab)){var a=z.IF(this.Sg());if(a){var b=a.range,c=a.i2,a=this.Sg().ha().querySelector(".js-highlightMenuQuoteButton"),d=z.gd(a,"is-active"),b=z.OV(this.qj,b);z.r(z.p(this.Cc.toggle(b.Ru,b.start,b.end,!c),function(a){z.Jo();d?z.NF(this.Sg()):S8(this,a);var b=c?"selection_menu":"quote_click_menu";T8(this,a.ug(),!d,b)},this),z.rz)}}};
z.f.OU=function(){if(z.UV(this.Ab)){var a=z.IF(this.Sg());a&&(a=z.OV(this.qj,a.range),z.r(z.p(this.Cc.qG(a.Ru,a.start,a.end),function(a){T8(this,a.ug(),!0,"selection_menu_quote_respond");this.Ba.navigate(z.w(this.U,z.Fw,{},{inResponseToQuoteId:a.quoteId}))},this),z.rz))}};
z.f.XU=function(a){var b=this.Hk,c=P8(this,b),d=b.Zb(),e=b.Fc(),b=a.query(".js-quoteAttributions-pileOn"),g=z.gd(b,"is-active");z.r(z.p(this.Cc.toggle(c,d,e,!0),function(b){var k=a.query(".js-quoteAttributions-pileOn");z.ld(k,"is-active");if(k=J8(this.Cc,c,d,e)){var m=N8(this,k),q=a.query(".js-quoteAttributions-info");z.Bx(q,M7,m)}else a.fb();!g&&z.Gx()&&(a.fb(),S8(this,k));k=z.Gx()?"quote_hover":"quote_click_mobile";T8(this,b.ug(),!g,k)},this),z.rz)};
z.f.YU=function(){if(z.UV(this.Ab)){var a=P8(this,this.Hk),b=this.Hk.Zb(),c=this.Hk.Fc();z.r(z.p(this.Cc.qG(a,b,c),function(a){T8(this,a.ug(),!0,"quote_respond");this.Ba.navigate(z.w(this.U,z.Fw,{},{inResponseToQuoteId:a.quoteId}))},this),z.rz)}};z.f.AM=function(){var a=new X7(this.pc),b=this.Cc.Cq,c=Object.keys(b).concat(this.sK);z.mb(c);c.forEach(function(a){sea(this,a,b[a]||[])},this);this.sK=Object.keys(b);(a=a.restore())&&a.select();z.Li()&&z.Gx()&&z.x.Ha().enable_quote_onboarding&&this.mj()};
z.f.mj=function(){var a=this.pc.querySelector(".markup--quote.is-other");if(a){var b=z.Kz(this.ke),c=this.ke.track(a).Yc();if(b.contains(c)&&(b=new z.yy("quotes"),!b.get("quotes-onboarding"))){var d=z.w1(z.v1(z.VW(z.UW(z.WW(this.oa),dea),a),"top"),"popover--onboarding popover--quoteOnboarding js-quoteOnboarding").L();z.vM(d).H("done",function(){d.fb()});b.put("quotes-onboarding",!0);this.ab.Gb("scroll-end",this.mj,this)}}};U8.prototype.E0=function(a,b){return new L8(this.ba,a,b)};var V8=z.qT;V8.Fa().scope("screen").add("notes",y8).add("notes-mobile",F8).add("quotes",U8);z.c6(V8,"notes");})(_mdm);
